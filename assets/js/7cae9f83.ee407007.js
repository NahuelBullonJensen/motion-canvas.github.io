(self.webpackChunk_motion_canvas_docs=self.webpackChunk_motion_canvas_docs||[]).push([[5152],{61532:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=61532,t.exports=e},70989:(t,e,s)=>{"use strict";s.d(e,{A:()=>b});var i=s(93091),n=s(88104),r=s(15688);function o(t,e){return void 0===e&&(e=t=>t),(s,i)=>{s[`getDefault${(0,r.k)(i)}`]=function(){this.requestLayoutUpdate();const s=this.element.style[t];this.element.style[t]="";const i=e.call(this,this.styles.getPropertyValue(t));return this.element.style[t]=s,i}}}var a=s(46350),l=s(5788),h=s(29797),c=s(23357),u=s(98378),d=s(74534),p=s(67292),f=s(20092),m=s(11258),g=s(53693),v=s(68003),y=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class b extends f.N{get columnGap(){return this.gap.x}get rowGap(){return this.gap.y}getX(){return this.isLayoutRoot()?this.x.context.getter():this.computedPosition().x}setX(t){this.x.context.setter(t)}getY(){return this.isLayoutRoot()?this.y.context.getter():this.computedPosition().y}setY(t){this.y.context.setter(t)}get width(){return this.size.x}get height(){return this.size.y}getWidth(){return this.computedSize().width}setWidth(t){this.width.context.setter(t)}*tweenWidth(t,e,s,i){const n=this.desiredSize().x,r="number"!=typeof n||"number"!=typeof t;let o,a;o=r?this.size.x():n,r?(this.size.x(t),a=this.size.x()):a=t,this.size.x(o),r&&this.lockSize(),yield*(0,d.i)(e,(t=>this.size.x(i(o,a,s(t))))),this.size.x(t),r&&this.releaseSize()}getHeight(){return this.computedSize().height}setHeight(t){this.height.context.setter(t)}*tweenHeight(t,e,s,i){const n=this.desiredSize().y,r="number"!=typeof n||"number"!=typeof t;let o,a;o=r?this.size.y():n,r?(this.size.y(t),a=this.size.y()):a=t,this.size.y(o),r&&this.lockSize(),yield*(0,d.i)(e,(t=>this.size.y(i(o,a,s(t))))),this.size.y(t),r&&this.releaseSize()}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}*tweenSize(t,e,s,i){const n=this.desiredSize();let r,o;r="number"!=typeof n.x||"number"!=typeof n.y?this.size():new h.F(n),"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y?o=new h.F(t):(this.size(t),o=this.size()),this.size(r),this.lockSize(),yield*(0,d.i)(e,(t=>this.size(i(r,o,s(t))))),this.releaseSize(),this.size(t)}constructor(t){super(t)}lockSize(){this.sizeLockCounter(this.sizeLockCounter()+1)}releaseSize(){this.sizeLockCounter(this.sizeLockCounter()-1)}parentTransform(){let t=this.parent();for(;t;){if(t instanceof b)return t;t=t.parent()}return null}anchorPosition(){const t=this.computedSize(),e=this.offset();return t.scale(.5).mul(e)}layoutEnabled(){var t;return this.layout()??(null==(t=this.parentTransform())?void 0:t.layoutEnabled())??!1}isLayoutRoot(){var t;return!this.layoutEnabled()||!(null!=(t=this.parentTransform())&&t.layoutEnabled())}localToParent(){const t=new DOMMatrix;t.translateSelf(this.x(),this.y()),t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y());const e=this.offset();if(!e.exactlyEquals(h.F.zero)){const s=this.size().mul(e).scale(-.5);t.translateSelf(s.x,s.y)}return t}scalingRotationMatrix(){const t=new DOMMatrix;t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y());const e=this.offset();if(!e.exactlyEquals(h.F.zero)){const s=this.size().mul(e).scale(-.5);t.translateSelf(s.x,s.y)}return t}getComputedLayout(){return new c.b(this.element.getBoundingClientRect())}computedPosition(){this.requestLayoutUpdate();const t=this.getComputedLayout(),e=new h.F(t.x+t.width/2*this.offset.x(),t.y+t.height/2*this.offset.y()),s=this.parentTransform();if(s){const i=s.getComputedLayout();e.x-=i.x+(i.width-t.width)/2,e.y-=i.y+(i.height-t.height)/2}return e}computedSize(){return this.requestLayoutUpdate(),this.getComputedLayout().size}requestLayoutUpdate(){const t=this.parentTransform();this.appendedToView()?(null==t||t.requestFontUpdate(),this.updateLayout()):t.requestLayoutUpdate()}appendedToView(){const t=this.isLayoutRoot();return t&&this.view().element.append(this.element),t}updateLayout(){if(this.applyFont(),this.applyFlex(),this.layoutEnabled()){const t=this.layoutChildren();for(const e of t)e.updateLayout()}}layoutChildren(){const t=[...this.children()],e=[],s=[];for(;t.length;){const i=t.shift();i instanceof b?(e.push(i),s.push(i.element)):i&&t.unshift(...i.children())}return this.element.replaceChildren(...s),e}requestFontUpdate(){var t;this.appendedToView(),null==(t=this.parentTransform())||t.requestFontUpdate(),this.applyFont()}getCacheBBox(){return c.b.fromSizeCentered(this.computedSize())}draw(t){if(this.clip()){const e=this.computedSize();if(0===e.width||0===e.height)return;t.beginPath(),t.rect(e.width/-2,e.height/-2,e.width,e.height),t.closePath(),t.clip()}this.drawChildren(t)}drawOverlay(t,e){const s=this.computedSize(),i=s.mul(this.offset()).scale(.5).transformAsPoint(e),n=c.b.fromSizeCentered(s),r=n.transformCorners(e),o=n.addSpacing(this.padding().scale(-1)).transformCorners(e),a=n.addSpacing(this.margin()).transformCorners(e);t.beginPath(),(0,m.pS)(t,a),(0,m.pS)(t,r),t.closePath(),t.fillStyle="rgba(255,193,125,0.6)",t.fill("evenodd"),t.beginPath(),(0,m.pS)(t,r),(0,m.pS)(t,o),t.closePath(),t.fillStyle="rgba(180,255,147,0.6)",t.fill("evenodd"),t.beginPath(),(0,m.pS)(t,r),t.closePath(),t.lineWidth=1,t.strokeStyle="white",t.stroke(),t.beginPath(),(0,m.wp)(t,i),t.stroke()}getOriginDelta(t){const e=this.computedSize().scale(.5),s=this.offset().mul(e);if(t===u.aP.Middle)return s.flipped;return(0,u.WS)(t).mul(e).sub(s)}moveOffset(t){const e=this.computedSize().scale(.5),s=this.offset().mul(e),i=t.mul(e);this.offset(t),this.position(this.position().add(i).sub(s))}parsePixels(t){return null===t?"":`${t}px`}parseLength(t){return null===t?"":"string"==typeof t?t:`${t}px`}applyFlex(){this.element.style.position=this.isLayoutRoot()?"absolute":"relative";const t=this.desiredSize();this.element.style.width=this.parseLength(t.x),this.element.style.height=this.parseLength(t.y),this.element.style.maxWidth=this.parseLength(this.maxWidth()),this.element.style.minWidth=this.parseLength(this.minWidth()),this.element.style.maxHeight=this.parseLength(this.maxHeight()),this.element.style.minHeight=this.parseLength(this.minHeight()),this.element.style.aspectRatio=null===this.ratio()?"":this.ratio().toString(),this.element.style.marginTop=this.parsePixels(this.margin.top()),this.element.style.marginBottom=this.parsePixels(this.margin.bottom()),this.element.style.marginLeft=this.parsePixels(this.margin.left()),this.element.style.marginRight=this.parsePixels(this.margin.right()),this.element.style.paddingTop=this.parsePixels(this.padding.top()),this.element.style.paddingBottom=this.parsePixels(this.padding.bottom()),this.element.style.paddingLeft=this.parsePixels(this.padding.left()),this.element.style.paddingRight=this.parsePixels(this.padding.right()),this.element.style.flexDirection=this.direction(),this.element.style.flexBasis=this.parseLength(this.basis()),this.element.style.flexWrap=this.wrap(),this.element.style.justifyContent=this.justifyContent(),this.element.style.alignContent=this.alignContent(),this.element.style.alignItems=this.alignItems(),this.element.style.alignSelf=this.alignSelf(),this.element.style.columnGap=this.parseLength(this.gap.x()),this.element.style.rowGap=this.parseLength(this.gap.y()),this.sizeLockCounter()>0?(this.element.style.flexGrow="0",this.element.style.flexShrink="0"):(this.element.style.flexGrow=this.grow().toString(),this.element.style.flexShrink=this.shrink().toString())}applyFont(){if(this.element.style.fontFamily=this.fontFamily.isInitial()?"":this.fontFamily(),this.element.style.fontSize=this.fontSize.isInitial()?"":`${this.fontSize()}px`,this.element.style.fontStyle=this.fontStyle.isInitial()?"":this.fontStyle(),this.lineHeight.isInitial())this.element.style.lineHeight="";else{const t=this.lineHeight();this.element.style.lineHeight="string"==typeof t?(parseFloat(t)/100).toString():`${t}px`}if(this.element.style.fontWeight=this.fontWeight.isInitial()?"":this.fontWeight().toString(),this.element.style.letterSpacing=this.letterSpacing.isInitial()?"":`${this.letterSpacing()}px`,this.element.style.textAlign=this.textAlign.isInitial()?"":this.textAlign(),this.textWrap.isInitial())this.element.style.whiteSpace="";else{const t=this.textWrap();this.element.style.whiteSpace="boolean"==typeof t?t?"normal":"nowrap":t}}dispose(){var t;super.dispose(),null==(t=this.sizeLockCounter)||t.context.dispose(),this.element&&(this.element.remove(),this.element.innerHTML=""),this.element=null,this.styles=null}hit(t){const e=t.transformAsPoint(this.localToParent().inverse());return this.cacheBBox().includes(e)?super.hit(t)??this:null}}function w(t){return(e,s)=>{(0,i.td)()(e,s),(0,i.r_)(!1)(e,s);const n=(0,i.uN)(e,s);n.getter=function(){return this.getOriginDelta(t).transformAsPoint(this.localToParent())},n.setter=function(e){return this.position((0,v.Pj)(e,(e=>this.getOriginDelta(t).transform(this.scalingRotationMatrix()).flipped.add(e)))),this}}}y([(0,i.nn)(null),(0,i.td)()],b.prototype,"layout",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"maxWidth",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"maxHeight",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"minWidth",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"minHeight",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"ratio",void 0),y([(0,g.g)("margin")],b.prototype,"margin",void 0),y([(0,g.g)("padding")],b.prototype,"padding",void 0),y([(0,i.nn)("row"),(0,i.td)()],b.prototype,"direction",void 0),y([(0,i.nn)(null),(0,i.td)()],b.prototype,"basis",void 0),y([(0,i.nn)(0),(0,i.td)()],b.prototype,"grow",void 0),y([(0,i.nn)(1),(0,i.td)()],b.prototype,"shrink",void 0),y([(0,i.nn)("nowrap"),(0,i.td)()],b.prototype,"wrap",void 0),y([(0,i.nn)("start"),(0,i.td)()],b.prototype,"justifyContent",void 0),y([(0,i.nn)("normal"),(0,i.td)()],b.prototype,"alignContent",void 0),y([(0,i.nn)("stretch"),(0,i.td)()],b.prototype,"alignItems",void 0),y([(0,i.nn)("auto"),(0,i.td)()],b.prototype,"alignSelf",void 0),y([(0,i.nn)(0),(0,n.y)({x:"columnGap",y:"rowGap"})],b.prototype,"gap",void 0),y([o("font-family"),(0,i.td)()],b.prototype,"fontFamily",void 0),y([o("font-size",parseFloat),(0,i.td)()],b.prototype,"fontSize",void 0),y([o("font-style"),(0,i.td)()],b.prototype,"fontStyle",void 0),y([o("font-weight",parseInt),(0,i.td)()],b.prototype,"fontWeight",void 0),y([o("line-height",parseFloat),(0,i.td)()],b.prototype,"lineHeight",void 0),y([o("letter-spacing",(t=>"normal"===t?0:parseFloat(t))),(0,i.td)()],b.prototype,"letterSpacing",void 0),y([o("white-space",(t=>"pre"===t?"pre":"normal"===t)),(0,i.td)()],b.prototype,"textWrap",void 0),y([(0,i.nn)("inherit"),(0,i.td)()],b.prototype,"textDirection",void 0),y([o("text-align"),(0,i.td)()],b.prototype,"textAlign",void 0),y([(0,i.nn)({x:null,y:null}),(0,n.y)({x:"width",y:"height"})],b.prototype,"size",void 0),y([(0,p.C)()],b.prototype,"tweenWidth",null),y([(0,p.C)()],b.prototype,"tweenHeight",null),y([(0,a.F)()],b.prototype,"desiredSize",null),y([(0,p.C)()],b.prototype,"tweenSize",null),y([(0,n.y)("offset")],b.prototype,"offset",void 0),y([w(u.aP.Top)],b.prototype,"top",void 0),y([w(u.aP.Bottom)],b.prototype,"bottom",void 0),y([w(u.aP.Left)],b.prototype,"left",void 0),y([w(u.aP.Right)],b.prototype,"right",void 0),y([w(u.aP.TopLeft)],b.prototype,"topLeft",void 0),y([w(u.aP.TopRight)],b.prototype,"topRight",void 0),y([w(u.aP.BottomLeft)],b.prototype,"bottomLeft",void 0),y([w(u.aP.BottomRight)],b.prototype,"bottomRight",void 0),y([(0,i.nn)(!1),(0,i.td)()],b.prototype,"clip",void 0),y([(0,i.nn)(0),(0,i.td)()],b.prototype,"sizeLockCounter",void 0),y([(0,a.F)()],b.prototype,"parentTransform",null),y([(0,a.F)()],b.prototype,"anchorPosition",null),y([(0,a.F)()],b.prototype,"layoutEnabled",null),y([(0,a.F)()],b.prototype,"isLayoutRoot",null),y([(0,a.F)()],b.prototype,"scalingRotationMatrix",null),y([(0,a.F)()],b.prototype,"computedPosition",null),y([(0,a.F)()],b.prototype,"computedSize",null),y([(0,a.F)()],b.prototype,"requestLayoutUpdate",null),y([(0,a.F)()],b.prototype,"appendedToView",null),y([(0,a.F)()],b.prototype,"updateLayout",null),y([(0,a.F)()],b.prototype,"layoutChildren",null),y([(0,a.F)()],b.prototype,"requestFontUpdate",null),y([(0,a.F)()],b.prototype,"applyFlex",null),y([(0,a.F)()],b.prototype,"applyFont",null),(0,l.f)(b.prototype,(t=>{t.element=document.createElement("div"),t.element.style.display="flex",t.element.style.boxSizing="border-box",t.styles=getComputedStyle(t.element)}))},20092:(t,e,s)=>{"use strict";s.d(e,{N:()=>T});var i=s(93091),n=s(88104),r=s(46350),o=s(43595),a=s(29797),l=s(74741),h=s(23357),c=s(49111),u=s(3163);var d=s(97074),p=s(74534),f=s(13170),m=s(67292),g=s(11258),v=s(97140);const y={invert:{name:"invert"},sepia:{name:"sepia"},grayscale:{name:"grayscale"},brightness:{name:"brightness",default:1},contrast:{name:"contrast",default:1},saturate:{name:"saturate",default:1},hue:{name:"hue-rotate",unit:"deg",scale:1},blur:{name:"blur",transform:!0,unit:"px",scale:1}};class b{get name(){return this.props.name}get default(){return this.props.default}constructor(t){this.props={name:"invert",default:0,unit:"%",scale:100,transform:!1,...t,value:t.value??t.default??0},this.value=(0,v.g)(this.props.value,f.UI,this)}isActive(){return this.value()!==this.props.default}serialize(t){let e=this.value();return this.props.transform&&(e=(0,l.X)(e,t)),`${this.props.name}(${e*this.props.scale}${this.props.unit})`}}var w=s(5376),x=s(5788),S=s(16249),k=s(68003);class C extends S.V{constructor(t,e){var s;super(t,f.o0,e),s=this;for(const i in y){const t=y[i];Object.defineProperty(this.invokable,i,{value:function(e,i,n){var r,o,a;if(void 0===n&&(n=d.qb),void 0===e)return(null==(o=s.get())||null==(a=o.find((e=>e.name===t.name)))?void 0:a.value())??t.default??0;let l=null==(r=s.get())?void 0:r.find((e=>e.name===t.name));return l||(l=new b(t),s.set([...s.get(),l])),void 0===i?(l.value(e),s.owner):l.value(e,i,n)}})}}*tweener(t,e,s){const i=this.get(),n=(0,k.Wg)(t);if(function(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s].name!==e[s].name)return!1;return!0}(i,n))return yield*(0,w.$)(...i.map(((t,i)=>t.value(n[i].value(),e,s)))),void this.set(n);for(const a of n)a.value(a.default);const r=n.map((t=>t.value.context.raw())),o=i.length>0&&n.length>0?e/2:e;i.length>0&&(yield*(0,w.$)(...i.map((t=>t.value(t.default,o,s))))),this.set(n),n.length>0&&(yield*(0,w.$)(...n.map(((t,e)=>t.value(r[e],o,s)))))}}var P=s(76062),R=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class T{get x(){return this.position.x}get y(){return this.position.y}getAbsolutePosition(){const t=this.localToWorld();return new a.F(t.m41,t.m42)}setAbsolutePosition(t){this.position((0,k.Pj)(t,(t=>new a.F(t).transformAsPoint(this.worldToParent()))))}getAbsoluteRotation(){const t=this.localToWorld();return a.F.degrees(t.m11,t.m12)}setAbsoluteRotation(t){this.rotation((0,k.Pj)(t,(t=>(0,l.$)(t,this.worldToParent()))))}getAbsoluteScale(){const t=this.localToWorld();return new a.F(a.F.magnitude(t.m11,t.m12),a.F.magnitude(t.m21,t.m22))}setAbsoluteScale(t){this.scale((0,k.Pj)(t,(t=>this.getRelativeScale(new a.F(t)))))}getRelativeScale(t){var e;const s=(null==(e=this.parent())?void 0:e.absoluteScale())??a.F.one;return t.div(s)}*tweenCompositeOperation(t,e,s){const i=(0,k.Wg)(t);"source-over"===i?(yield*this.compositeOverride(1,e,s),this.compositeOverride(0),this.compositeOperation(i)):(this.compositeOperation(i),this.compositeOverride(1),yield*this.compositeOverride(0,e,s))}absoluteOpacity(){var t;return((null==(t=this.parent())?void 0:t.absoluteOpacity())??1)*this.opacity()}hasFilters(){return!!this.filters().find((t=>t.isActive()))}hasShadow(){return!!this.shadowColor()&&(this.shadowBlur()>0||0!==this.shadowOffset.x()||0!==this.shadowOffset.y())}filterString(){let t="";const e=this.compositeToWorld();for(const s of this.filters())s.isActive()&&(t+=" "+s.serialize(e));return t}setChildren(t){this.spawner(t)}getChildren(){return this.spawnChildren(),this.realChildren}spawnChildren(){const t=this.spawner();if((0,k.PG)(this.spawner.context.raw())){const e=new Set;for(const s of t){const t=s.parent.context.raw();if(t&&t!==this)throw new c.t("The spawner returned a node that already has a parent","A spawner should either create entirely new nodes or reuse nodes from a pool.");s.parent(this),e.add(s.key)}for(const t of this.realChildren)e.has(t.key)||t.parent(null);this.realChildren=t}else this.realChildren=t}sortedChildren(){return[...this.children()].sort(((t,e)=>Math.sign(t.zIndex()-e.zIndex())))}constructor(t){let{children:e,spawner:s,key:n,...r}=t;this.compositeOverride=(0,v.g)(0),this.stateStack=[],this.realChildren=[],this.parent=(0,v.g)(null),this.properties=(0,i.RG)(this);const o=(0,u.$r)();this.key=o.registerNode(this,n),this.view2D=o.getView(),this.creationStack=(new Error).stack,(0,i.Xd)(this,r),this.add(e),s&&this.children(s)}localToWorld(){const t=this.parent();return t?t.localToWorld().multiply(this.localToParent()):this.localToParent()}worldToLocal(){return this.localToWorld().inverse()}worldToParent(){var t;return(null==(t=this.parent())?void 0:t.worldToLocal())??new DOMMatrix}localToParent(){const t=new DOMMatrix;return t.translateSelf(this.position.x(),this.position.y()),t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y()),t}compositeToWorld(){var t;return(null==(t=this.compositeRoot())?void 0:t.localToWorld())??new DOMMatrix}compositeRoot(){var t;return this.composite()?this:(null==(t=this.parent())?void 0:t.compositeRoot())??null}compositeToLocal(){const t=this.compositeRoot();if(t){const e=this.worldToLocal();return e.m44=1,t.localToWorld().multiply(e)}return new DOMMatrix}view(){return this.view2D}add(t){return this.insert(t,1/0)}insert(t,e){void 0===e&&(e=0);const s=Array.isArray(t)?t:[t];if(0===s.length)return this;const i=this.children(),n=i.slice(0,e);for(const r of s)r instanceof T&&(n.push(r),r.remove(),r.parent(this));return n.push(...i.slice(e)),this.children(n),this}remove(){const t=this.parent();return null===t||(t.children(t.children().filter((t=>t!==this))),this.parent(null)),this}move(t){void 0===t&&(t=1);const e=this.parent();if(0===t||!e)return this;const s=e.children(),i=[];if(t>0)for(let n=0;n<s.length;n++){const e=s[n];if(e===this){const e=n+t;for(;n<e&&n+1<s.length;n++)i[n]=s[n+1]}i[n]=e}else for(let n=s.length-1;n>=0;n--){const e=s[n];if(e===this){const e=n+t;for(;n>e&&n>0;n--)i[n]=s[n-1]}i[n]=e}return e.children(i),this}moveUp(){return this.move(1)}moveDown(){return this.move(-1)}moveToTop(){return this.move(1/0)}moveToBottom(){return this.move(-1/0)}moveTo(t){const e=this.parent();if(!e)return this;const s=t-e.children().indexOf(this);return this.move(s)}moveBelow(t,e){void 0===e&&(e=!1);const s=this.parent();if(!s)return this;if(t.parent()!==s)return(0,u.wL)().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const i=s.children(),n=i.indexOf(this),r=i.indexOf(t);if(!e&&n<r)return this;const o=r-n-1;return this.move(o)}moveAbove(t,e){void 0===e&&(e=!1);const s=this.parent();if(!s)return this;if(t.parent()!==s)return(0,u.wL)().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const i=s.children(),n=i.indexOf(this),r=i.indexOf(t);if(!e&&n>r)return this;const o=r-n+1;return this.move(o)}reparent(t){const e=this.absolutePosition(),s=this.absoluteRotation(),i=this.absoluteScale();t.add(this),this.absolutePosition(e),this.absoluteRotation(s),this.absoluteScale(i)}removeChildren(){for(const t of this.children())t.remove()}dispose(){this.stateStack=[];for(const{signal:t}of this)null==t||t.context.dispose()}clone(t){void 0===t&&(t={});const e={...t};(0,k.PG)(this.spawner.context.raw())?e.spawner=this.spawner.context.raw():this.children().length>0&&(e.children??(e.children=this.children().map((t=>t.clone()))));for(const{key:s,meta:i,signal:n}of this)if(i.cloneable&&!(s in e))if(i.compound)for(const[t,r]of i.compoundEntries)r in e||(e[r]=n[t].context.raw());else e[s]=n.context.raw();return this.instantiate(e)}snapshotClone(t){void 0===t&&(t={});const e={...this.getState(),...t};return this.children().length>0&&(e.children??(e.children=this.children().map((t=>t.snapshotClone())))),this.instantiate(e)}reactiveClone(t){void 0===t&&(t={});const e={...t};this.children().length>0&&(e.children??(e.children=this.children().map((t=>t.reactiveClone()))));for(const{key:s,meta:i,signal:n}of this)i.cloneable&&!(s in e)&&(e[s]=()=>n());return this.instantiate(e)}instantiate(t){return void 0===t&&(t={}),new this.constructor(t)}requiresCache(){return this.cache()||this.opacity()<1||"source-over"!==this.compositeOperation()||this.hasFilters()||this.hasShadow()}cacheCanvas(){const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Could not create a cache canvas");return t}cachedCanvas(){const t=this.cacheCanvas(),e=this.worldSpaceCacheBBox(),s=this.localToWorld();return t.canvas.width=e.width,t.canvas.height=e.height,t.setTransform(s.a,s.b,s.c,s.d,s.e-e.x,s.f-e.y),this.draw(t),t}getCacheBBox(){return new h.b}cacheBBox(){const t=this.getCacheBBox(),e=this.children();if(0===e.length)return t;const s=t.corners;for(const i of e){const t=i.fullCacheBBox(),e=i.localToParent();s.push(...t.corners.map((t=>t.transformAsPoint(e))))}return h.b.fromPoints(...s)}fullCacheBBox(){const t=this.compositeToLocal(),e=this.shadowOffset().transform(t),s=(0,l.X)(this.shadowBlur(),t),i=this.cacheBBox().expand(2*this.filters.blur()+s);return e.x<0?(i.x+=e.x,i.width-=e.x):i.width+=e.x,e.y<0?(i.y+=e.y,i.height-=e.y):i.height+=e.y,i}worldSpaceCacheBBox(){const t=h.b.fromSizeCentered(this.view().size()),e=h.b.fromPoints(...t.transformCorners(this.view().localToWorld())),s=h.b.fromPoints(...this.cacheBBox().transformCorners(this.localToWorld()));return e.intersection(s).pixelPerfect}setupDrawFromCache(t){if(t.globalCompositeOperation=this.compositeOperation(),t.globalAlpha*=this.opacity(),this.hasFilters()&&(t.filter=this.filterString()),this.hasShadow()){const e=this.compositeToWorld(),s=this.shadowOffset().transform(e),i=(0,l.X)(this.shadowBlur(),e);t.shadowColor=this.shadowColor().serialize(),t.shadowBlur=i,t.shadowOffsetX=s.x,t.shadowOffsetY=s.y}}render(t){if(!(this.absoluteOpacity()<=0)){if(t.save(),this.transformContext(t),this.requiresCache()){const e=this.worldSpaceCacheBBox();if(0!==e.width&&0!==e.height){this.setupDrawFromCache(t);const s=this.cachedCanvas(),i=this.compositeOverride(),n=this.worldToLocal();t.transform(n.a,n.b,n.c,n.d,n.e,n.f),t.drawImage(s.canvas,e.position.x,e.position.y),i>0&&(t.save(),t.globalAlpha*=i,t.globalCompositeOperation="source-over",t.drawImage(s.canvas,e.position.x,e.position.y),t.restore())}}else this.draw(t);t.restore()}}draw(t){this.drawChildren(t)}drawChildren(t){for(const e of this.sortedChildren())e.render(t)}drawOverlay(t,e){const s=this.cacheBBox().transformCorners(e),i=this.getCacheBBox().transformCorners(e);t.strokeStyle="white",t.lineWidth=1,t.beginPath(),(0,g.pS)(t,s),t.closePath(),t.stroke(),t.strokeStyle="blue",t.beginPath(),(0,g.pS)(t,i),t.closePath(),t.stroke()}transformContext(t){const e=this.localToParent();t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}hit(t){let e=null;const s=t.transformAsPoint(this.localToParent().inverse());for(const i of this.children().reverse())if(e=i.hit(s),e)break;return e}collectAsyncResources(){for(const t of this.children())t.collectAsyncResources()}async toPromise(){do{await P.k.consumePromises(),this.collectAsyncResources()}while(P.k.hasPromises());return this}getState(){const t={};for(const{key:e,meta:s,signal:i}of this)s.cloneable&&!(e in t)&&(t[e]=i());return t}applyState(t){for(const e in t){const s=this.signalByKey(e);s&&s(t[e])}}save(){this.stateStack.push(this.getState())}restore(t,e){void 0===e&&(e=d.qb);const s=this.stateStack.pop();if(void 0===s)return;const i=this.getState();for(const n in s)i[n]===s[n]&&delete s[n];return(0,p.i)(t,(t=>{const n=e(t),r=Object.keys(s).reduce(((t,e)=>(t[e]=(0,f.o0)(i[e],s[e],n),t)),{});this.applyState(r)}))}*[Symbol.iterator](){for(const t in this.properties){const e=this.properties[t],s=this.signalByKey(t);yield{meta:e,signal:s,key:t}}}signalByKey(t){return this[t]}}R([(0,n.y)()],T.prototype,"position",void 0),R([(0,i.YS)(a.F),(0,i.r_)(!1),(0,i.td)()],T.prototype,"absolutePosition",void 0),R([(0,i.nn)(0),(0,i.td)()],T.prototype,"rotation",void 0),R([(0,i.r_)(!1),(0,i.td)()],T.prototype,"absoluteRotation",void 0),R([(0,i.nn)(a.F.one),(0,n.y)("scale")],T.prototype,"scale",void 0),R([(0,i.YS)(a.F),(0,i.r_)(!1),(0,i.td)()],T.prototype,"absoluteScale",void 0),R([(0,i.nn)(0),(0,i.td)()],T.prototype,"zIndex",void 0),R([(0,i.nn)(!1),(0,i.td)()],T.prototype,"cache",void 0),R([(0,i.nn)(!1),(0,i.td)()],T.prototype,"composite",void 0),R([(0,i.nn)("source-over"),(0,i.td)()],T.prototype,"compositeOperation",void 0),R([(0,m.C)()],T.prototype,"tweenCompositeOperation",null),R([(0,i.nn)(1),(0,i.td)()],T.prototype,"opacity",void 0),R([(0,r.F)()],T.prototype,"absoluteOpacity",null),R([(t,e)=>{const s=(0,i.J)(t,e);(0,x.f)(t,(t=>{t[e]=new C(s.default??[],t).toSignal()}))}],T.prototype,"filters",void 0),R([(0,i.nn)("#0000"),(0,o.j)()],T.prototype,"shadowColor",void 0),R([(0,i.nn)(0),(0,i.td)()],T.prototype,"shadowBlur",void 0),R([(0,n.y)("shadowOffset")],T.prototype,"shadowOffset",void 0),R([(0,r.F)()],T.prototype,"hasFilters",null),R([(0,r.F)()],T.prototype,"hasShadow",null),R([(0,r.F)()],T.prototype,"filterString",null),R([(0,i.Oq)(!1),(0,i.r_)(!1),(0,i.nn)([]),(0,i.td)()],T.prototype,"spawner",void 0),R([(0,i.Oq)(!1),(0,i.r_)(!1),(0,i.td)()],T.prototype,"children",void 0),R([(0,r.F)()],T.prototype,"spawnChildren",null),R([(0,r.F)()],T.prototype,"sortedChildren",null),R([(0,r.F)()],T.prototype,"localToWorld",null),R([(0,r.F)()],T.prototype,"worldToLocal",null),R([(0,r.F)()],T.prototype,"worldToParent",null),R([(0,r.F)()],T.prototype,"localToParent",null),R([(0,r.F)()],T.prototype,"compositeToWorld",null),R([(0,r.F)()],T.prototype,"compositeRoot",null),R([(0,r.F)()],T.prototype,"compositeToLocal",null),R([(0,r.F)()],T.prototype,"cacheCanvas",null),R([(0,r.F)()],T.prototype,"cachedCanvas",null),R([(0,r.F)()],T.prototype,"cacheBBox",null),R([(0,r.F)()],T.prototype,"fullCacheBBox",null),R([(0,r.F)()],T.prototype,"worldSpaceCacheBBox",null),T.prototype.isClass=!0},15498:(t,e,s)=>{"use strict";s.d(e,{U:()=>h});var i=s(23357),n=s(13730),r=s(11258),o=s(93091),a=s(53693),l=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class h extends n.b{constructor(t){super(t)}getPath(){const t=new Path2D,e=this.radius(),s=this.smoothCorners(),n=this.cornerSharpness(),o=i.b.fromSizeCentered(this.size());return(0,r.Zy)(t,o,e,s,n),t}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}getRipplePath(){const t=new Path2D,e=this.rippleSize(),s=this.radius().addScalar(e),n=this.smoothCorners(),o=this.cornerSharpness(),a=i.b.fromSizeCentered(this.size()).expand(e);return(0,r.Zy)(t,a,s,n,o),t}}l([(0,a.g)("radius")],h.prototype,"radius",void 0),l([(0,o.nn)(!1),(0,o.td)()],h.prototype,"smoothCorners",void 0),l([(0,o.nn)(.6),(0,o.td)()],h.prototype,"cornerSharpness",void 0)},13730:(t,e,s)=>{"use strict";s.d(e,{b:()=>f});var i=s(93091),n=s(46350),r=s(70989),o=s(67292),a=s(97074),l=s(13170),h=s(11258),c=s(30204);function u(){return(t,e)=>{(0,i.td)()(t,e),(0,i.E2)(h.av)(t,e),(0,i.JI)(c.I.lerp)(t,e),(0,i.nn)(null)(t,e)}}var d=s(97140),p=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class f extends r.A{rippleSize(){return(0,a.ad)(this.rippleStrength(),0,50)}constructor(t){super(t),this.rippleStrength=(0,d.g)(0)}applyText(t){t.direction=this.textDirection(),this.element.dir=this.textDirection()}applyStyle(t){t.fillStyle=(0,h.ho)(this.fill(),t),t.strokeStyle=(0,h.ho)(this.stroke(),t),t.lineWidth=this.lineWidth(),t.lineJoin=this.lineJoin(),t.lineCap=this.lineCap(),t.setLineDash(this.lineDash()),t.lineDashOffset=this.lineDashOffset(),this.antialiased()||(t.filter="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxmaWx0ZXIgaWQ9ImZpbHRlciIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJpZGVudGl0eSIvPjxmZUZ1bmNHIHR5cGU9ImlkZW50aXR5Ii8+PGZlRnVuY0IgdHlwZT0iaWRlbnRpdHkiLz48ZmVGdW5jQSB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgMSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48L2ZpbHRlcj48L3N2Zz4=#filter)")}draw(t){this.drawShape(t),this.clip()&&t.clip(this.getPath()),this.drawChildren(t)}drawShape(t){const e=this.getPath(),s=this.lineWidth()>0&&null!==this.stroke(),i=null!==this.fill();t.save(),this.applyStyle(t),this.drawRipple(t),this.strokeFirst()?(s&&t.stroke(e),i&&t.fill(e)):(i&&t.fill(e),s&&t.stroke(e)),t.restore()}getCacheBBox(){return super.getCacheBBox().expand(this.lineWidth()/2)}getPath(){return new Path2D}getRipplePath(){return new Path2D}drawRipple(t){const e=this.rippleStrength();if(e>0){const s=this.getRipplePath();t.save(),t.globalAlpha*=(0,l.UI)(.54,0,e),t.fill(s),t.restore()}}*ripple(t){void 0===t&&(t=1),this.rippleStrength(0),yield*this.rippleStrength(1,t,a.GE),this.rippleStrength(0)}}p([u()],f.prototype,"fill",void 0),p([u()],f.prototype,"stroke",void 0),p([(0,i.nn)(!1),(0,i.td)()],f.prototype,"strokeFirst",void 0),p([(0,i.nn)(0),(0,i.td)()],f.prototype,"lineWidth",void 0),p([(0,i.nn)("miter"),(0,i.td)()],f.prototype,"lineJoin",void 0),p([(0,i.nn)("butt"),(0,i.td)()],f.prototype,"lineCap",void 0),p([(0,i.nn)([]),(0,i.td)()],f.prototype,"lineDash",void 0),p([(0,i.nn)(0),(0,i.td)()],f.prototype,"lineDashOffset",void 0),p([(0,i.nn)(!0),(0,i.td)()],f.prototype,"antialiased",void 0),p([(0,n.F)()],f.prototype,"rippleSize",null),p([(0,n.F)()],f.prototype,"getPath",null),p([(0,o.C)()],f.prototype,"ripple",null)},70419:(t,e,s)=>{"use strict";s.d(e,{h:()=>l});var i=s(15498),n=s(93091),r=s(88733),o=s(79116),a=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class l extends i.U{constructor(t){super({composite:!0,fontFamily:"Roboto",fontSize:48,lineHeight:"120%",textWrap:!1,fontStyle:"normal",...t}),this.view2D=this,l.shadowRoot.append(this.element),this.applyFlex()}transformContext(){}dispose(){this.removeChildren(),super.dispose()}render(t){this.computedSize(),this.computedPosition(),super.render(t)}requestLayoutUpdate(){this.updateLayout()}requestFontUpdate(){this.applyFont()}view(){return this}}a([(0,n.nn)(r.q.Paused),(0,n.td)()],l.prototype,"playbackState",void 0),a([(0,n.td)()],l.prototype,"assetHash",void 0),a([(0,o.V)((()=>{const t="motion-canvas-2d-frame";let e=document.querySelector(`#${t}`);return e||(e=document.createElement("div"),e.id=t,e.style.position="absolute",e.style.pointerEvents="none",e.style.top="0",e.style.left="0",e.style.opacity="0",e.style.overflow="hidden",document.body.prepend(e)),e.shadowRoot??e.attachShadow({mode:"open"})}))],l,"shadowRoot",void 0)},43595:(t,e,s)=>{"use strict";s.d(e,{j:()=>r});var i=s(30204),n=s(93091);function r(){return(t,e)=>{(0,n.td)()(t,e),(0,n.YS)(i.I)(t,e)}}},37060:(t,e,s)=>{"use strict";s.d(e,{I:()=>u});var i=s(3163),n=s(93091),r=s(5788),o=s(13170),a=s(46096),l=s(16249),h=s(834),c=s(68003);function u(t){return(e,s)=>{const u=(0,n.J)(e,s);u.compound=!0,u.compoundEntries=Object.entries(t),(0,r.f)(e,(t=>{if(!u.parser)return void(0,i.wL)().error(`Missing parser decorator for "${s.toString()}"`);const e=u.default,n=u.parser.bind(t),r=new a.N(u.compoundEntries.map((s=>{let[i,r]=s;const a=new l.V((0,c.Pj)(e,(t=>n(t)[i])),o.UI,t,void 0,(0,h.f)(void 0,t,r)).toSignal();return[i,a]})),n,e,u.interpolationFunction??o.o0,t,(0,h.f)(u,t,s));t[s]=r.toSignal()}))}}},46350:(t,e,s)=>{"use strict";s.d(e,{F:()=>r});var i=s(5788),n=s(73662);function r(){return(t,e)=>{(0,i.f)(t,(t=>{const s=Object.getPrototypeOf(t)[e];t[e]=(0,n.D)(s.bind(t),t)}))}}},5788:(t,e,s)=>{"use strict";s.d(e,{f:()=>n,j:()=>r});const i=Symbol.for("@motion-canvas/2d/decorators/initializers");function n(t,e){if(t[i]){if(t[i]&&!Object.prototype.hasOwnProperty.call(t,i)){const e=Object.getPrototypeOf(t);t[i]=[...e[i]]}}else t[i]=[];t[i].push(e)}function r(t,e){if(t[i])try{t[i].forEach((s=>s(t,e)))}catch(s){throw s.inspect??(s.inspect=t.key),s}}},93091:(t,e,s)=>{"use strict";s.d(e,{E2:()=>v,J:()=>u,JI:()=>g,Oq:()=>w,RG:()=>d,Xd:()=>p,YS:()=>y,nn:()=>m,r_:()=>b,td:()=>f,uN:()=>c});var i=s(13170),n=s(5788),r=s(15688),o=s(3163),a=s(834),l=s(16249);const h=Symbol.for("@motion-canvas/2d/decorators/properties");function c(t,e){var s;return(null==(s=t[h])?void 0:s[e])??null}function u(t,e){let s;return t[h]?t[h]&&!Object.prototype.hasOwnProperty.call(t,h)?t[h]=s=Object.fromEntries(Object.entries(t[h]).map((t=>{let[e,s]=t;return[e,{...s}]}))):s=t[h]:t[h]=s={},s[e]??(s[e]={cloneable:!0,inspectable:!0,compoundEntries:[]}),s[e]}function d(t){return t&&"object"==typeof t?t[h]??{}:{}}function p(t,e){(0,n.j)(t);for(const[s,i]of Object.entries(d(t))){const n=t[s];if(n.reset(),void 0!==e[s]&&n(e[s]),void 0!==i.compoundEntries)for(const[t,s]of i.compoundEntries)s in e&&n[t](e[s])}}function f(){return(t,e)=>{const s=u(t,e);(0,n.f)(t,(t=>{var n,o;const h=null==(n=t[`getDefault${(0,r.k)(e)}`])?void 0:n.bind(t),c=new l.V(h??s.default,s.interpolationFunction??i.o0,t,null==(o=s.parser)?void 0:o.bind(t),(0,a.f)(s,t,e));t[e]=c.toSignal()}))}}function m(t){return(e,s)=>{const i=c(e,s);i?i.default=t:(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}function g(t){return(e,s)=>{const i=c(e,s);i?i.interpolationFunction=t:(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}function v(t){return(e,s)=>{const i=c(e,s);i?i.parser=t:(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}function y(t){return(e,s)=>{const i=c(e,s);i?(i.parser=e=>new t(e),"lerp"in t&&(i.interpolationFunction??(i.interpolationFunction=t.lerp))):(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}function b(t){return void 0===t&&(t=!0),(e,s)=>{const i=c(e,s);i?i.cloneable=t:(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}function w(t){return void 0===t&&(t=!0),(e,s)=>{const i=c(e,s);i?i.inspectable=t:(0,o.wL)().error(`Missing property decorator for "${s.toString()}"`)}}},53693:(t,e,s)=>{"use strict";s.d(e,{g:()=>o});var i=s(43188),n=s(37060),r=s(93091);function o(t){return(e,s)=>{(0,n.I)({top:t?`${t}Top`:"top",right:t?`${t}Right`:"right",bottom:t?`${t}Bottom`:"bottom",left:t?`${t}Left`:"left"})(e,s),(0,r.YS)(i.K)(e,s)}}},88104:(t,e,s)=>{"use strict";s.d(e,{y:()=>o});var i=s(29797),n=s(37060),r=s(93091);function o(t){return(e,s)=>{(0,n.I)("object"==typeof t?t:{x:t?`${t}X`:"x",y:t?`${t}Y`:"y"})(e,s),(0,r.YS)(i.F)(e,s)}}},15914:(t,e,s)=>{"use strict";s.d(e,{r:()=>T});var i=s(92673),n=s(82344),r=s(11726);var o=s(80638),a=s(5881),l=s(97140);class h{constructor(t){this.scene=t,this.signals={},this.variables={},this.handleReset=()=>{this.signals={}},t.onReset.subscribe(this.handleReset)}get(t,e){var s;return(s=this.signals)[t]??(s[t]=(0,l.g)(this.variables[t]??e)),()=>this.signals[t]()}updateSignals(t){this.variables=t,Object.keys(t).map((e=>{e in this.signals&&this.signals[e](t[e])}))}}var c,u=s(1323),d=s(96881),p=s(42075),f=s(67292),m=s(3163),g=s(97715);!function(t){t[t.BeforeRender=0]="BeforeRender",t[t.BeginRender=1]="BeginRender",t[t.FinishRender=2]="FinishRender",t[t.AfterRender=3]="AfterRender"}(c||(c={}));class v{get onBeforeRender(){return this.beforeRender.subscribable}get onBeginRender(){return this.beginRender.subscribable}get onFinishRender(){return this.finishRender.subscribable}get onAfterRender(){return this.afterRender.subscribable}constructor(t){this.scene=t,this.beforeRender=new d.p,this.beginRender=new d.p,this.finishRender=new d.p,this.afterRender=new d.p,this.scene.onRenderLifecycle.subscribe((t=>{let[e,s]=t;switch(e){case c.BeforeRender:return this.beforeRender.dispatch(s);case c.BeginRender:return this.beginRender.dispatch(s);case c.FinishRender:return this.finishRender.dispatch(s);case c.AfterRender:return this.afterRender.dispatch(s)}})),this.scene.onReset.subscribe((()=>{this.beforeRender.clear(),this.beginRender.clear(),this.finishRender.clear(),this.afterRender.clear()}))}}var y,b=s(23357);!function(t){t[t.Initial=0]="Initial",t[t.AfterTransitionIn=1]="AfterTransitionIn",t[t.CanTransitionOut=2]="CanTransitionOut",t[t.Finished=3]="Finished"}(y||(y={}));var w=s(76062),x=s(88733);class S{get onChanged(){return this.slides.subscribable}constructor(t){this.scene=t,this.slides=new u.G([]),this.lookup=new Map,this.collisionLookup=new Set,this.current=null,this.canResume=!1,this.waitsForId=null,this.targetId=null,this.handleReload=()=>{this.lookup.clear(),this.collisionLookup.clear(),this.current=null,this.waitsForId=null,this.targetId=null},this.handleReset=()=>{this.collisionLookup.clear(),this.current=null,this.waitsForId=null},this.handleRecalculated=()=>{this.slides.current=[...this.lookup.values()]},this.scene.onReloaded.subscribe(this.handleReload),this.scene.onReset.subscribe(this.handleReset),this.scene.onRecalculated.subscribe(this.handleRecalculated)}setTarget(t){this.targetId=t}resume(){this.canResume=!0}isWaitingFor(t){return this.waitsForId===t}isWaiting(){return null!==this.waitsForId}didHappen(t){if(null===this.current)return!1;for(const s of this.lookup.keys()){var e;if(s===t)return!0;if(s===(null==(e=this.current)?void 0:e.id))return!1}return!1}getCurrent(){return this.current}register(t,e){if(null!==this.waitsForId)throw new Error(`The animation already waits for a slide: ${this.waitsForId}.`);const s=this.toId(t);this.scene.playback.state!==x.q.Presenting&&(this.lookup.has(s)||this.lookup.set(s,{id:s,name:t,time:e,scene:this.scene,stack:(new Error).stack}),this.collisionLookup.has(t)?this.scene.logger.warn({message:`A slide named "${t}" already exists.`,stack:(new Error).stack}):this.collisionLookup.add(t)),this.waitsForId=s,this.current=this.lookup.get(s)??null,this.canResume=!1}shouldWait(t){const e=this.toId(t);if(this.waitsForId!==e)throw new Error(`The animation waits for a different slide: ${this.waitsForId}.`);if(!this.lookup.get(e))throw new Error(`Could not find the "${t}" slide.`);let s=this.canResume;return this.scene.playback.state!==x.q.Presenting&&(s=e!==this.targetId),s&&(this.waitsForId=null),!s}toId(t){return`${this.scene.name}:${t}`}}class k{get firstFrame(){return this.cache.current.firstFrame}get lastFrame(){return this.firstFrame+this.cache.current.duration}get onCacheChanged(){return this.cache.subscribable}get onReloaded(){return this.reloaded.subscribable}get onRecalculated(){return this.recalculated.subscribable}get onThreadChanged(){return this.thread.subscribable}get onRenderLifecycle(){return this.renderLifecycle.subscribable}get onReset(){return this.afterReset.subscribable}get LifecycleEvents(){return this.logger.warn("LifecycleEvents is deprecated. Use lifecycleEvents instead."),this.lifecycleEvents}get previous(){return this.previousScene}constructor(t){this.cache=new u.G({firstFrame:0,transitionDuration:0,duration:0,lastFrame:0}),this.reloaded=new d.p,this.recalculated=new d.p,this.thread=new u.G(null),this.renderLifecycle=new d.p,this.afterReset=new d.p,this.lifecycleEvents=new v(this),this.previousScene=null,this.runner=null,this.state=y.Initial,this.cached=!1,this.counters={},this.name=t.name,this.size=t.size,this.resolutionScale=t.resolutionScale,this.logger=t.logger,this.playback=t.playback,this.meta=t.meta,this.runnerFactory=t.config,this.creationStack=t.stack,(0,p.G)(this.runnerFactory,(0,f.C)(this.name)),this.timeEvents=new t.timeEventsClass(this),this.variables=new h(this),this.slides=new S(this),this.random=new r.k(this.meta.seed.get())}update(){}async render(t){let e=0;do{e++,await w.k.consumePromises(),t.save();const s=b.b.fromSizeCentered(this.getSize());t.clearRect(s.x,s.y,s.width,s.height),this.execute((()=>this.draw(t))),t.restore()}while(w.k.hasPromises()&&e<10);e>1&&this.logger.debug(`render iterations: ${e}`)}reload(t){let{config:e,size:s,stack:i,resolutionScale:n}=void 0===t?{}:t;e&&(this.runnerFactory=e),s&&(this.size=s),n&&(this.resolutionScale=n),i&&(this.creationStack=i),this.cached=!1,this.reloaded.dispatch()}async recalculate(t){const e=this.cache.current;if(e.firstFrame=this.playback.frame,e.lastFrame=e.firstFrame+e.duration,this.isCached())return t(e.lastFrame),void(this.cache.current={...e});for(e.transitionDuration=-1,await this.reset();!this.canTransitionOut();)e.transitionDuration<0&&this.state===y.AfterTransitionIn&&(e.transitionDuration=this.playback.frame-e.firstFrame),t(this.playback.frame+1),await this.next();-1===e.transitionDuration&&(e.transitionDuration=0),e.lastFrame=this.playback.frame,e.duration=e.lastFrame-e.firstFrame,await new Promise((t=>setTimeout(t,0))),this.cached=!0,this.cache.current={...e},this.recalculated.dispatch()}async next(){if(!this.runner)return;let t=this.execute((()=>this.runner.next()));for(this.update();t.value;){if((0,o.x)(t.value)){const e=await t.value.toPromise();t=this.execute((()=>this.runner.next(e)))}else if((0,a.t)(t.value)){const e=await t.value;t=this.execute((()=>this.runner.next(e)))}else this.logger.warn({message:"Invalid value yielded by the scene.",object:t.value}),t=this.execute((()=>this.runner.next(t.value)));this.update()}if(w.k.hasPromises()){var e;const t=await w.k.consumePromises();this.logger.error({message:"Tried to access an asynchronous property before the node was ready. Make sure to yield the node before accessing the property.",stack:t[0].stack,inspect:(null==(e=t[0].owner)?void 0:e.key)??void 0})}t.done&&(this.state=y.Finished)}async reset(t){void 0===t&&(t=null),this.counters={},this.previousScene=t,this.random=new r.k(this.meta.seed.get()),this.runner=(0,a.C)((()=>this.runnerFactory(this.getView())),(t=>{this.thread.current=t})),this.state=y.AfterTransitionIn,this.afterReset.dispatch(),await this.next()}getSize(){return this.size}isAfterTransitionIn(){return this.state===y.AfterTransitionIn}canTransitionOut(){return this.state===y.CanTransitionOut||this.state===y.Finished}isFinished(){return this.state===y.Finished}enterInitial(){this.state===y.AfterTransitionIn?this.state=y.Initial:this.logger.warn(`Scene ${this.name} entered initial in an unexpected state: ${this.state}`)}enterAfterTransitionIn(){this.state===y.Initial?this.state=y.AfterTransitionIn:this.logger.warn(`Scene ${this.name} transitioned in an unexpected state: ${this.state}`)}enterCanTransitionOut(){this.state===y.AfterTransitionIn||this.state===y.Initial?this.state=y.CanTransitionOut:this.logger.warn(`Scene ${this.name} was marked as finished in an unexpected state: ${this.state}`)}isCached(){return this.cached}execute(t){let e;(0,m.DO)(this),(0,g.wA)(this.playback);try{e=t()}finally{(0,g.Mh)(this.playback),(0,m.ug)(this)}return e}}var C=s(29797),P=s(70419);class R extends k{constructor(t){super(t),this.view=null,this.registeredNodes={},this.nodeCounters={},this.assetHash=Date.now().toString(),this.recreateView()}getView(){return this.view}next(){var t;return null==(t=this.getView())||t.playbackState(this.playback.state),super.next()}draw(t){t.save(),this.renderLifecycle.dispatch([c.BeforeRender,t]),t.save(),this.renderLifecycle.dispatch([c.BeginRender,t]),this.getView().playbackState(this.playback.state),this.getView().render(t),this.renderLifecycle.dispatch([c.FinishRender,t]),t.restore(),this.renderLifecycle.dispatch([c.AfterRender,t]),t.restore()}reset(t){for(const s in this.registeredNodes)try{this.registeredNodes[s].dispose()}catch(e){this.logger.error(e)}return this.registeredNodes={},this.nodeCounters={},this.recreateView(),super.reset(t)}inspectPosition(t,e){return this.execute((()=>{var s;return(null==(s=this.getView().hit(new C.F(t,e).scale(this.resolutionScale)))?void 0:s.key)??null}))}validateInspection(t){var e;return(null==(e=this.getNode(t))?void 0:e.key)??null}inspectAttributes(t){const e=this.getNode(t);if(!e)return null;const s={stack:e.creationStack,key:e.key};for(const{key:i,meta:n,signal:r}of e)n.inspectable&&(s[i]=r());return s}drawOverlay(t,e,s){const i=this.getNode(t);i&&this.execute((()=>{i.drawOverlay(s,e.scale(1/this.resolutionScale,1/this.resolutionScale).multiplySelf(i.localToWorld()))}))}registerNode(t,e){var s,i;const n=(null==(s=t.constructor)?void 0:s.name)??"unknown";(i=this.nodeCounters)[n]??(i[n]=0);const r=this.nodeCounters[n]++;return e??(e=`${this.name}/${n}[${r}]`),this.registeredNodes[e]=t,e}getNode(t){return"string"!=typeof t?null:this.registeredNodes[t]??null}recreateView(){this.execute((()=>{const t=this.getSize();this.view=new P.h({position:t.scale(this.resolutionScale/2),scale:this.resolutionScale,assetHash:this.assetHash,size:t})}))}}function T(t){return{klass:R,config:t,stack:(new Error).stack,meta:new i.v("scene",{version:new n.C("version",1),timeEvents:new n.C("time events",[]),seed:new n.C("seed",r.k.createSeed())})}}},11258:(t,e,s)=>{"use strict";s.d(e,{Nb:()=>k,JQ:()=>C,av:()=>p,AE:()=>y,pS:()=>x,wp:()=>S,is:()=>v,Zy:()=>m,kZ:()=>w,Ao:()=>b,pt:()=>P,ho:()=>f});var i=s(93091),n=s(88104),r=s(46350),o=s(30204),a=s(68003),l=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class h{constructor(t){(0,i.Xd)(this,t)}canvasGradient(t){let e;switch(this.type()){case"linear":e=t.createLinearGradient(this.from.x(),this.from.y(),this.to.x(),this.to.y());break;case"conic":e=t.createConicGradient(this.angle(),this.from.x(),this.from.y());break;case"radial":e=t.createRadialGradient(this.from.x(),this.from.y(),this.fromRadius(),this.to.x(),this.to.y(),this.toRadius())}for(const{offset:s,color:i}of this.stops())e.addColorStop((0,a.Wg)(s),new o.I((0,a.Wg)(i)).serialize());return e}}l([(0,i.nn)("linear"),(0,i.td)()],h.prototype,"type",void 0),l([(0,n.y)("from")],h.prototype,"from",void 0),l([(0,n.y)("to")],h.prototype,"to",void 0),l([(0,i.nn)(0),(0,i.td)()],h.prototype,"angle",void 0),l([(0,i.nn)(0),(0,i.td)()],h.prototype,"fromRadius",void 0),l([(0,i.nn)(0),(0,i.td)()],h.prototype,"toRadius",void 0),l([(0,i.nn)([]),(0,i.td)()],h.prototype,"stops",void 0),l([(0,r.F)()],h.prototype,"canvasGradient",null);var c=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class u{constructor(t){(0,i.Xd)(this,t)}canvasPattern(t){return t.createPattern(this.image(),this.repetition())}}c([(0,i.td)()],u.prototype,"image",void 0),c([(0,i.nn)(null),(0,i.td)()],u.prototype,"repetition",void 0),c([(0,r.F)()],u.prototype,"canvasPattern",null);var d=s(29797);function p(t){return null===t?null:t instanceof h||t instanceof u?t:new o.I(t)}function f(t,e){return null===t?"":t instanceof o.I?t.serialize():t instanceof h?t.canvasGradient(e):t instanceof u?t.canvasPattern(e)??"":""}function m(t,e,s,i,n){if(0===s.top&&0===s.right&&0===s.bottom&&0===s.left)return void function(t,e){t.rect(e.x,e.y,e.width,e.height)}(t,e);const r=g(s.top,s.right,s.left,e),o=g(s.right,s.top,s.bottom,e),a=g(s.bottom,s.left,s.right,e),l=g(s.left,s.bottom,s.top,e);if(i){const s=t=>t-t*n;return t.moveTo(e.left+r,e.top),t.lineTo(e.right-o,e.top),t.bezierCurveTo(e.right-s(o),e.top,e.right,e.top+s(o),e.right,e.top+o),t.lineTo(e.right,e.bottom-a),t.bezierCurveTo(e.right,e.bottom-s(a),e.right-s(a),e.bottom,e.right-a,e.bottom),t.lineTo(e.left+l,e.bottom),t.bezierCurveTo(e.left+s(l),e.bottom,e.left,e.bottom-s(l),e.left,e.bottom-l),t.lineTo(e.left,e.top+r),void t.bezierCurveTo(e.left,e.top+s(r),e.left+s(r),e.top,e.left+r,e.top)}t.moveTo(e.left+r,e.top),t.arcTo(e.right,e.top,e.right,e.bottom,o),t.arcTo(e.right,e.bottom,e.left,e.bottom,a),t.arcTo(e.left,e.bottom,e.left,e.top,l),t.arcTo(e.left,e.top,e.right,e.top,r)}function g(t,e,s,i){const n=t+e>i.width?i.width*(t/(t+e)):t,r=t+s>i.height?i.height*(t/(t+s)):t;return Math.min(n,r)}function v(t,e,s){const i=e.size.scale(.5);for(let n=0;n<=s;n++){const e=2*n*Math.PI/s,r=d.F.fromRadians(e).perpendicular.mul(i);0==n?b(t,r):w(t,r)}t.closePath()}function y(t,e,s,i){i?t.drawImage(e,s.x,s.y,s.width,s.height,i.x,i.y,i.width,i.height):t.drawImage(e,s.x,s.y,s.width,s.height)}function b(t,e){t.moveTo(e.x,e.y)}function w(t,e){t.lineTo(e.x,e.y)}function x(t,e){if(!(e.length<2)){b(t,e[0]);for(const s of e.slice(1))w(t,s)}}function S(t,e,s){void 0===s&&(s=8),w(t,e.addY(-s)),w(t,e.addY(s)),w(t,e),w(t,e.addX(-s)),k(t,e,s)}function k(t,e,s,i,n,r){void 0===i&&(i=0),void 0===n&&(n=2*Math.PI),void 0===r&&(r=!1),t.arc(e.x,e.y,s,i,n,r)}function C(t,e,s,i){t.bezierCurveTo(e.x,e.y,s.x,s.y,i.x,i.y)}function P(t,e,s){t.quadraticCurveTo(e.x,e.y,s.x,s.y)}},834:(t,e,s)=>{"use strict";s.d(e,{f:()=>n});var i=s(15688);function n(t,e,s){void 0===t&&(t={});const n={};if(s&&e){const r=t.setter??(null==e?void 0:e[`set${(0,i.k)(s)}`]);r&&(n.setter=r.bind(e));const o=t.getter??(null==e?void 0:e[`get${(0,i.k)(s)}`]);o&&(n.getter=o.bind(e));const a=t.tweener??(null==e?void 0:e[`tween${(0,i.k)(s)}`]);a&&(n.tweener=a.bind(e))}return n}},88733:(t,e,s)=>{"use strict";s.d(e,{q:()=>i,r:()=>r});var i,n=s(1323);!function(t){t[t.Playing=0]="Playing",t[t.Rendering=1]="Rendering",t[t.Paused=2]="Paused",t[t.Presenting=3]="Presenting"}(i||(i={}));class r{constructor(){this.frame=0,this.speed=1,this.fps=30,this.duration=0,this.finished=!1,this.slides=[],this.previousScene=null,this.state=i.Paused,this.currentSceneReference=null,this.scenes=new n.G([])}get onSceneChanged(){if(null===this.currentSceneReference)throw new Error("PlaybackManager has not been properly initialized");return this.currentSceneReference.subscribable}get onScenesRecalculated(){return this.scenes.subscribable}get currentScene(){if(null===this.currentSceneReference)throw new Error("PlaybackManager has not been properly initialized");return this.currentSceneReference.current}set currentScene(t){if(!t)throw new Error("Invalid scene.");this.currentSceneReference??(this.currentSceneReference=new n.G(t)),this.currentSceneReference.current=t}setup(t){this.scenes.current=t,this.currentScene=t[0]}async progress(){return this.finished=await this.next(),this.finished}async seek(t){if(t<=this.frame||this.currentScene.isCached()&&this.currentScene.lastFrame<t){const e=this.findBestScene(t);e!==this.currentScene?(this.previousScene=null,this.currentScene=e,this.frame=this.currentScene.firstFrame,await this.currentScene.reset()):this.frame>=t&&(this.previousScene=null,this.frame=this.currentScene.firstFrame,await this.currentScene.reset())}for(this.finished=!1;this.frame<t&&!this.finished;)this.finished=await this.next();return this.finished}async goBack(){let t=this.currentScene.slides.getCurrent();if(t&&this.currentScene.slides.isWaiting()){const e=this.slides.indexOf(t);t=this.slides[e-1]}await this.seekSlide(t)}async goForward(){const t=this.currentScene.slides.getCurrent(),e=this.slides.indexOf(t);await this.seekSlide(this.slides[e+1])}async goTo(t){await this.seekSlide(this.slides.find((e=>e.id===t)))}async seekSlide(t){if(void 0===t&&(t=null),!t)return;const{id:e,scene:s}=t;for((this.currentScene!==s||this.currentScene.slides.didHappen(e))&&(this.previousScene=null,this.currentScene=s,this.frame=this.currentScene.firstFrame,this.currentScene.slides.setTarget(e),await this.currentScene.reset()),this.finished=!1,this.currentScene.slides.setTarget(e);!this.currentScene.slides.isWaitingFor(e)&&!this.finished;)this.finished=await this.next();return this.currentScene.slides.setTarget(null),this.finished}async reset(){this.previousScene=null,this.currentScene=this.scenes.current[0],this.frame=0,await this.currentScene.reset()}reload(t){this.scenes.current.forEach((e=>e.reload(t)))}async recalculate(){this.previousScene=null,this.slides=[];const t=this.speed;this.frame=0,this.speed=1;const e=[];try{for(const t of this.scenes.current)await t.recalculate((t=>{this.frame=t})),this.slides.push(...t.slides.onChanged.current),e.push(t)}finally{this.speed=t}this.scenes.current=e,this.duration=this.frame}async next(){if(this.previousScene&&(await this.previousScene.next(),this.currentScene.isFinished()&&(this.previousScene=null)),this.frame+=this.speed,this.currentScene.isFinished())return!0;if(await this.currentScene.next(),this.previousScene&&this.currentScene.isAfterTransitionIn()&&(this.previousScene=null),this.currentScene.canTransitionOut()){this.previousScene=this.currentScene;const t=this.getNextScene(this.previousScene);t&&(this.currentScene=t,await this.currentScene.reset(this.previousScene)),t&&!this.currentScene.isAfterTransitionIn()||(this.previousScene=null)}return this.currentScene.isFinished()}findBestScene(t){let e=this.scenes.current[0];for(const s of this.scenes.current){if(!s.isCached()||s.lastFrame>t)return s;e=s}return e}getNextScene(t){const e=this.scenes.current;if(!t)return e[0];const s=e.findIndex((e=>e===t));return s<0?null:e[s+1]??null}}},2672:(t,e,s)=>{"use strict";s.d(e,{J:()=>m});var i=s(88733),n=s(1323),r=s(3163);class o{get onDataChanged(){return this.data.subscribable}constructor(t){this.logger=t,this.data=new n.G(null),this.context=new AudioContext,this.audioElement=new Audio,this.source=null,this.error=!1,this.abortController=null,this.offset=0}getTime(){return this.toAbsoluteTime(this.audioElement.currentTime)}setTime(t){this.audioElement.currentTime=this.toRelativeTime(t)}setOffset(t){this.offset=t}setMuted(t){this.audioElement.muted=t}setSource(t){var e;this.source=t,this.audioElement.src=t,null==(e=this.abortController)||e.abort(),this.abortController=new AbortController,this.loadData(this.abortController.signal).catch((t=>{"AbortError"!==t.name&&this.logger.error(t)}))}isInRange(t){return t>=this.offset&&t<this.audioElement.duration}toRelativeTime(t){return Math.max(0,t-this.offset)}toAbsoluteTime(t){return t+this.offset}isReady(){return this.source&&!this.error}async setPaused(t){if(this.source&&this.audioElement.paused!==t)if(t)this.audioElement.pause();else try{return await this.audioElement.play(),this.error=!1,!0}catch(e){this.error||(0,r.wL)().error(e),this.error=!0}return!1}async loadData(t){if(this.data.current=null,!this.source)return;const e=await fetch(this.source,{signal:t}),s=await e.arrayBuffer();if(t.aborted)return;const i=await this.decodeAudioData(s);if(t.aborted)return;const n=256,r=~~(i.length/n),o=[];let a=0;for(let l=0;l<i.numberOfChannels;l++){const t=i.getChannelData(l);for(let e=0;e<r;e++){const s=~~(e*n),i=~~(s+n);let r=t[s],h=r;for(let e=s;e<i;e++){const s=t[e];s>h&&(h=s),s<r&&(r=s)}(0===l||h>o[2*e])&&(o[2*e]=h),(0===l||r<o[2*e+1])&&(o[2*e+1]=r),h>a&&(a=h),Math.abs(r)>a&&(a=Math.abs(r))}}this.data.current={peaks:o,absoluteMax:a,length:r,sampleRate:i.sampleRate/n*2}}decodeAudioData(t){return new Promise(((e,s)=>this.context.decodeAudioData(t,e,s)))}}var a=s(13170),l=s(11395);class h extends l.p{async dispatch(t){await Promise.all(this.notifySubscribers(t))}}var c=s(96881),u=s(29797);class d{constructor(t){this.playback=t}secondsToFrames(t){return Math.ceil(t*this.playback.fps)}framesToSeconds(t){return t/this.playback.fps}get time(){return this.framesToSeconds(this.playback.frame)}get frame(){return this.playback.frame}get speed(){return this.playback.speed}get fps(){return this.playback.fps}get state(){return this.playback.state}}var p=s(15649);class f{get onChanged(){return this.events.subscribable}constructor(t){this.scene=t,this.events=new n.G([]),this.registeredEvents={},this.lookup={},this.collisionLookup=new Set,this.previousReference=[],this.didEventsChange=!1,this.preserveTiming=!0,this.handleReload=()=>{this.registeredEvents={},this.collisionLookup.clear()},this.handleRecalculated=()=>{var t;this.preserveTiming=!0,this.events.current=Object.values(this.registeredEvents),(this.didEventsChange||((null==(t=this.previousReference)?void 0:t.length)??0)!==this.events.current.length)&&(this.didEventsChange=!1,this.previousReference=Object.values(this.registeredEvents).map((t=>({name:t.name,targetTime:t.targetTime}))),this.scene.meta.timeEvents.set(this.previousReference))},this.handleReset=()=>{this.collisionLookup.clear()},this.handleMetaChanged=t=>{t!==this.previousReference&&(this.previousReference=t,this.load(t),this.scene.reload())},this.previousReference=t.meta.timeEvents.get(),this.load(this.previousReference),t.onReloaded.subscribe(this.handleReload),t.onRecalculated.subscribe(this.handleRecalculated),t.onReset.subscribe(this.handleReset),t.meta.timeEvents.onChanged.subscribe(this.handleMetaChanged,!1)}set(t,e,s){void 0===s&&(s=!0),this.lookup[t]&&this.lookup[t].offset!==e&&(this.preserveTiming=s,this.lookup[t]={...this.lookup[t],targetTime:this.lookup[t].initialTime+e,offset:e},this.registeredEvents[t]=this.lookup[t],this.events.current=Object.values(this.registeredEvents),this.didEventsChange=!0,this.scene.reload())}register(t,e){if(this.collisionLookup.has(t))return this.scene.logger.error({message:`name "${t}" has already been used for another event name.`,stack:(new Error).stack}),0;if(this.collisionLookup.add(t),this.lookup[t]){let s=!1;const i={...this.lookup[t]},n=(new Error).stack;i.stack!==n&&(i.stack=n,s=!0),i.initialTime!==e&&(i.initialTime=e,s=!0);const r=Math.max(0,i.targetTime-i.initialTime);this.preserveTiming&&i.offset!==r&&(i.offset=r,s=!0);const o=i.initialTime+i.offset;this.preserveTiming||i.targetTime===o||(this.didEventsChange=!0,i.targetTime=o,s=!0),s&&(this.lookup[t]=i)}else this.didEventsChange=!0,this.lookup[t]={name:t,initialTime:e,targetTime:e,offset:0,stack:(new Error).stack};return this.registeredEvents[t]=this.lookup[t],this.lookup[t].offset}load(t){for(const e of t){const t=this.lookup[e.name]??{name:e.name,initialTime:0,offset:0};this.lookup[e.name]={...t,targetTime:e.targetTime}}}}class m{get onRender(){return this.render.subscribable}get onStateChanged(){return this.playerState.subscribable}get onFrameChanged(){return this.frame.subscribable}get onDurationChanged(){return this.duration.subscribable}get onRecalculated(){return this.recalculated.subscribable}get startFrame(){return Math.min(this.playback.duration,this.status.secondsToFrames(this.startTime))}get endFrame(){return Math.min(this.playback.duration,this.status.secondsToFrames(this.endTime))}get finished(){return this.playback.finished||this.playback.frame>=this.endFrame}constructor(t,e,s,r){var a,l;void 0===e&&(e={}),void 0===s&&(s={}),void 0===r&&(r=-1),this.project=t,this.settings=e,this.initialState=s,this.initialFrame=r,this.render=new h,this.frame=new n.G(0),this.duration=new n.G(0),this.recalculated=new c.p,this.lock=new p.L,this.startTime=0,this.endTime=1/0,this.requestId=null,this.renderTime=0,this.requestedSeek=-1,this.requestedRecalculation=!0,this.active=!1,this.playerState=new n.G({loop:!0,muted:!0,speed:1,...s,paused:!0}),this.requestedSeek=r,this.logger=this.project.logger,this.playback=new i.r,this.status=new d(this.playback),this.audio=new o(this.logger),this.size=e.size??new u.F(1920,1080),this.resolutionScale=e.resolutionScale??1,this.startTime=(null==(a=e.range)?void 0:a[0])??0,this.endTime=(null==(l=e.range)?void 0:l[1])??1/0,this.playback.fps=e.fps??60,this.audio.setOffset(e.audioOffset??0),t.audio&&this.audio.setSource(t.audio);const m=[];for(const i of t.scenes){var g;const e=new i.klass({...i,playback:this.status,logger:this.project.logger,size:this.size,resolutionScale:this.resolutionScale,timeEventsClass:f});null==(g=i.onReplaced)||g.subscribe((t=>{e.reload(t)}),!1),e.onReloaded.subscribe((()=>this.requestRecalculation())),e.variables.updateSignals(t.variables??{}),m.push(e)}this.playback.setup(m),this.activate()}async configure(t){await this.lock.acquire();let e=this.playback.frame,s=!1;if(this.startTime=t.range[0],this.endTime=t.range[1],this.playback.fps!==t.fps){const i=t.fps/this.playback.fps;this.playback.fps=t.fps,e=Math.floor(e*i),s=!0}t.size.exactlyEquals(this.size)&&t.resolutionScale===this.resolutionScale||(this.size=t.size,this.resolutionScale=t.resolutionScale,this.playback.reload({size:this.size,resolutionScale:this.resolutionScale})),void 0!==t.audioOffset&&this.audio.setOffset(t.audioOffset),this.lock.release(),s&&(this.playback.reload(),this.frame.current=e,this.requestRecalculation(),this.requestedSeek=e)}requestSeek(t){this.requestedSeek=this.clampRange(t)}requestPreviousFrame(){this.requestedSeek=this.frame.current-this.playback.speed}requestNextFrame(){this.requestedSeek=this.frame.current+this.playback.speed}requestReset(){this.requestedSeek=0}toggleLoop(t){void 0===t&&(t=!this.playerState.current.loop),t!==this.playerState.current.loop&&(this.playerState.current={...this.playerState.current,loop:t})}togglePlayback(t){void 0===t&&(t=this.playerState.current.paused),t===this.playerState.current.paused&&(this.playerState.current={...this.playerState.current,paused:!t},t&&!this.playerState.current.loop&&this.playback.frame===this.playback.duration&&this.requestReset())}toggleAudio(t){void 0===t&&(t=this.playerState.current.muted),t===this.playerState.current.muted&&(this.playerState.current={...this.playerState.current,muted:!t})}setSpeed(t){t!==this.playerState.current.speed&&(this.playback.speed=t,this.playback.reload(),this.playerState.current={...this.playerState.current,speed:t},this.requestRecalculation())}setVariables(t){for(const e of this.playback.onScenesRecalculated.current)e.variables.updateSignals(t)}activate(){this.active=!0,this.request()}deactivate(){this.active=!1,null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null)}requestRecalculation(){this.requestedRecalculation=!0,this.request()}async prepare(){const t={...this.playerState.current,seek:this.requestedSeek};if(this.requestedSeek=-1,this.requestedRecalculation){t.seek<0&&(t.seek=this.playback.frame);try{await this.playback.recalculate(),this.duration.current=this.playback.frame,this.recalculated.dispatch()}catch(s){throw this.requestSeek(t.seek),s}finally{this.requestedRecalculation=!1}}(!t.loop&&this.finished&&!t.paused&&t.seek<0||this.endFrame===this.startFrame)&&(this.togglePlayback(!1),t.paused=!0),t.loop&&(t.seek>this.endFrame||this.finished&&!t.paused)&&this.startFrame!==this.endTime&&(t.seek=this.startFrame);const e=t.paused||this.finished||!this.audio.isInRange(this.status.time);return await this.audio.setPaused(e)&&this.syncAudio(-3),this.audio.setMuted(t.muted),t}async run(){const t=await this.prepare(),e=this.playback.state;if(this.playback.state=t.paused?i.q.Paused:i.q.Playing,t.seek>=0||!this.isInRange(this.status.frame)){const e=t.seek<0?this.status.frame:t.seek,s=this.clampRange(e);this.logger.profile("seek time"),await this.playback.seek(s),this.logger.profile("seek time"),this.syncAudio(-3)}else{if(t.paused||1===t.speed&&this.audio.isReady()&&this.audio.isInRange(this.status.time)&&this.audio.getTime()<this.status.time)return t.paused&&e!==i.q.Paused&&await this.render.dispatch(),!t.paused&&this.status.time>this.audio.getTime()+.02&&this.syncAudio(),void this.request();if(this.audio.isReady()&&1===t.speed&&this.audio.isInRange(this.status.time)&&this.status.framesToSeconds(this.playback.frame+1)<this.audio.getTime()-.02){const t=this.status.secondsToFrames(this.audio.getTime());await this.playback.seek(t)}else this.status.frame<this.endFrame&&(await this.playback.progress(),1!==t.speed&&this.syncAudio())}!t.paused&&this.playback.currentScene.slides.isWaiting()&&(this.togglePlayback(!1),t.paused=!0),await this.render.dispatch(),this.frame.current=this.playback.frame,this.request()}request(){this.active&&(this.requestId??(this.requestId=requestAnimationFrame((async t=>{if(this.requestId=null,t-this.renderTime>=1e3/(this.status.fps+5)){this.renderTime=t,await this.lock.acquire();try{await this.run()}catch(e){this.logger.error(e)}this.lock.release()}else this.request()}))))}clampRange(t){return(0,a.uZ)(this.startFrame,this.endFrame,t)}isInRange(t){return t>=this.startFrame&&t<=this.endFrame}syncAudio(t){void 0===t&&(t=0),this.audio.setTime(this.status.framesToSeconds(this.playback.frame+t))}}},9989:(t,e,s)=>{"use strict";s.d(e,{H:()=>r});var i=s(1119),n=s(29797);class r{get canvasSize(){return this.size.scale(this.resolutionScale)}constructor(){this.background=null,this.resolutionScale=1,this.colorSpace="srgb",this.size=n.F.zero,this.finalBuffer=document.createElement("canvas"),this.currentBuffer=document.createElement("canvas"),this.previousBuffer=document.createElement("canvas");const t=this.colorSpace;this.context=(0,i.f)({colorSpace:t},this.finalBuffer),this.currentContext=(0,i.f)({colorSpace:t},this.currentBuffer),this.previousContext=(0,i.f)({colorSpace:t},this.previousBuffer)}configure(t){let{colorSpace:e=this.colorSpace,size:s=this.size,resolutionScale:n=this.resolutionScale,background:r=this.background}=t;e!==this.colorSpace&&(this.colorSpace=e,this.context=(0,i.f)({colorSpace:e},this.finalBuffer),this.currentContext=(0,i.f)({colorSpace:e},this.currentBuffer),this.previousContext=(0,i.f)({colorSpace:e},this.previousBuffer)),s.exactlyEquals(this.size)&&n===this.resolutionScale||(this.resolutionScale=n,this.size=s,this.resizeCanvas(this.context),this.resizeCanvas(this.currentContext),this.resizeCanvas(this.previousContext)),this.background="string"==typeof r?r:(null==r?void 0:r.serialize())??null}async render(t,e){e&&(this.transformCanvas(this.previousContext),await e.render(this.previousContext)),this.transformCanvas(this.currentContext),await t.render(this.currentContext);const s=this.canvasSize;this.context.clearRect(0,0,s.width,s.height),this.background&&(this.context.save(),this.context.fillStyle=this.background,this.context.fillRect(0,0,s.width,s.height),this.context.restore()),e&&this.context.drawImage(this.previousBuffer,0,0),this.context.drawImage(this.currentBuffer,0,0)}transformCanvas(t){const e=this.canvasSize.scale(.5);t.setTransform(this.resolutionScale,0,0,this.resolutionScale,e.x,e.y)}resizeCanvas(t){const e=this.canvasSize;t.canvas.width=e.width,t.canvas.height=e.height}}},42075:(t,e,s)=>{"use strict";function i(t){const e={[t.name]:t},s=Object.getOwnPropertyDescriptor(e,t.name);if(s){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];for(let i=n.length-1;i>=0;i--)n[i](e,t.name,s)}}s.d(e,{G:()=>i})},79116:(t,e,s)=>{"use strict";s.d(e,{V:()=>n});const i=Symbol.for("@motion-canvas/core/decorators/UNINITIALIZED");function n(t){return(e,s)=>{let n=i;Object.defineProperty(e,s,{get(){return n===i&&(n=t.call(this)),n}})}}},67292:(t,e,s)=>{"use strict";function i(t){return function(e,s,i){i.value.prototype.name=t??s,i.value.prototype.threadable=!0}}s.d(e,{C:()=>i})},96881:(t,e,s)=>{"use strict";s.d(e,{p:()=>n});var i=s(11395);class n extends i.p{dispatch(t){this.notifySubscribers(t)}}},11395:(t,e,s)=>{"use strict";s.d(e,{l:()=>n,p:()=>i});class i{constructor(){this.subscribable=new n(this),this.subscribers=new Set}subscribe(t){return this.subscribers.add(t),()=>this.unsubscribe(t)}unsubscribe(t){this.subscribers.delete(t)}clear(){this.subscribers.clear()}notifySubscribers(t){return[...this.subscribers].map((e=>e(t)))}}class n{constructor(t){this.dispatcher=t}subscribe(t){return this.dispatcher.subscribe(t)}unsubscribe(t){this.dispatcher.unsubscribe(t)}}},1323:(t,e,s)=>{"use strict";s.d(e,{G:()=>n});var i=s(11395);class n extends i.p{set current(t){this.value=t,this.notifySubscribers(t)}get current(){return this.value}constructor(t){super(),this.value=t,this.subscribable=new r(this)}subscribe(t,e){void 0===e&&(e=!0);const s=super.subscribe(t);return e&&t(this.value),s}}class r extends i.l{get current(){return this.dispatcher.current}subscribe(t,e){return void 0===e&&(e=!0),this.dispatcher.subscribe(t,e)}}},5376:(t,e,s)=>{"use strict";s.d(e,{$:()=>o});var i=s(51284),n=s(42075),r=s(67292);function*o(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];for(const i of e)yield i;yield*(0,i.v)(...e)}(0,n.G)(o,(0,r.C)())},77396:(t,e,s)=>{"use strict";s.d(e,{K:()=>n});var i=s(75168);function n(t,e){let s;return"string"==typeof t?(s=e(),(0,i.i)(s,t)):(s=t(),(0,i.i)(s,s)),s}},84266:(t,e,s)=>{"use strict";s.d(e,{A:()=>l,X:()=>h});var i=s(42075),n=s(67292),r=s(30092),o=s(56632),a=s(97715);function*l(t,e){yield*h((0,r.Y)(t)),e&&(yield*e)}function*h(t,e){void 0===t&&(t=0);const s=(0,o.nn)(),i=(0,a.te)().framesToSeconds(1),n=s.time()+t;for(;n-i>s.fixed;)yield;s.time(n),e&&(yield*e)}(0,i.G)(l,(0,n.C)()),(0,i.G)(h,(0,n.C)())},82344:(t,e,s)=>{"use strict";s.d(e,{C:()=>n});var i=s(1323);class n{get onChanged(){return this.value.subscribable}get onDisabled(){return this.disabled.subscribable}constructor(t,e){this.name=t,this.type=void 0,this.spacing=!1,this.disabled=new i.G(!1),this.value=new i.G(e)}get(){return this.value.current}set(t){this.value.current=this.parse(t)}parse(t){return t}serialize(){return this.value.current}clone(){return new this.constructor(this.name,this.get())}disable(t){return void 0===t&&(t=!0),this.disabled.current=t,this}space(t){return void 0===t&&(t=!0),this.spacing=t,this}}},92673:(t,e,s)=>{"use strict";s.d(e,{v:()=>o});var i=s(82344),n=s(1323);class r extends i.C{get onFieldsChanged(){return this.event.subscribable}constructor(t,e){const s=new Map(Object.entries(e));super(t,Object.fromEntries(Array.from(s,(t=>{let[e,s]=t;return[e,s.get()]})))),this.type=Object,this.ignoreChange=!1,this.customFields={},this.handleChange=()=>{this.ignoreChange||(this.value.current=this.transform("get"))},this.event=new n.G([...s.values()]),this.fields=s;for(const[i,n]of this.fields)Object.defineProperty(this,i,{value:n}),n.onChanged.subscribe(this.handleChange)}set(t){this.ignoreChange=!0;for(const[e,s]of Object.entries(t)){const t=this.fields.get(e);t?t.set(s):this.customFields[e]=s}this.ignoreChange=!1,this.handleChange()}serialize(){return this.transform("serialize")}clone(){return new this.constructor(this.name,this.transform("clone"))}transform(t){return{...Object.fromEntries(Array.from(this.fields,(e=>{let[s,i]=e;return[s,i[t]()]}))),...this.customFields}}}const o=r},11726:(t,e,s)=>{"use strict";s.d(e,{k:()=>r});var i=s(13170),n=s(37762);class r{constructor(t){this.state=t}static createSeed(){return Math.floor(4294967296*Math.random())}nextFloat(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),(0,i.UI)(t,e,this.next())}nextInt(t,e){void 0===t&&(t=0),void 0===e&&(e=4294967296);let s=Math.floor((0,i.UI)(t,e,this.next()));return s===e&&(s=t),s}floatArray(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),(0,n.w)(t).map((()=>this.nextFloat(e,s)))}intArray(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=4294967296),(0,n.w)(t).map((()=>this.nextInt(e,s)))}spawn(){return new r(this.nextInt())}next(){this.state|=0,this.state=this.state+1831565813|0;let t=Math.imul(this.state^this.state>>>15,1|this.state);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}},46096:(t,e,s)=>{"use strict";s.d(e,{N:()=>o});var i=s(13170),n=s(16249),r=s(68003);class o extends n.V{constructor(t,e,s,o,a,l){var h;void 0===a&&(a=void 0),void 0===l&&(l={}),super(void 0,o,a,e,l),this.entries=t,this.signals=[],this.parser=e;for(const c of t){let t,o;Array.isArray(c)?([t,o]=c,(h=o.context).owner??(h.owner=this)):(t=c,o=new n.V((0,r.Pj)(s,(t=>e(t)[c])),i.UI,a??this.invokable).toSignal()),this.signals.push([t,o]),Object.defineProperty(this.invokable,t,{value:o})}}toSignal(){return this.invokable}parse(t){return this.parser(t)}getter(){return this.parse(Object.fromEntries(this.signals.map((t=>{let[e,s]=t;return[e,s()]}))))}setter(t){if((0,r.PG)(t))for(const[e,s]of this.signals)s((()=>this.parser(t())[e]));else{const e=this.parse(t);for(const[t,s]of this.signals)s(e[t])}return this.owner}reset(){for(const[,t]of this.signals)t.reset();return this.owner}save(){for(const[,t]of this.signals)t.save();return this.owner}}},81865:(t,e,s)=>{"use strict";s.d(e,{h:()=>o});var i=s(3163),n=s(90031),r=s(76062);class o extends r.k{constructor(t,e){super(e),this.factory=t,this.markDirty()}toSignal(){return this.invokable}dispose(){super.dispose(),this.last=void 0}invoke(){if(this.event.isRaised()){this.clearDependencies(),this.startCollecting();try{this.last=this.factory(...arguments)}catch(e){var t;(0,i.wL)().error({...(0,n.d)(e),inspect:null==(t=this.owner)?void 0:t.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}}},76062:(t,e,s)=>{"use strict";s.d(e,{k:()=>o});var i=s(11395);class n extends i.p{constructor(){super(...arguments),this.value=!1}raise(){this.value||(this.value=!0,this.notifySubscribers())}reset(){this.value=!1}isRaised(){return this.value}subscribe(t){const e=super.subscribe(t);return this.value&&t(),e}}var r=s(49111);class o{static collectPromise(t,e){void 0===e&&(e=null);const s={promise:t,value:e,stack:(new Error).stack},i=this.collectionStack.at(-1);return i&&(s.owner=i.owner),t.then((t=>{s.value=t,null==i||i.markDirty()})),this.promises.push(s),s}static hasPromises(){return this.promises.length>0}static async consumePromises(){const t=[...this.promises];return await Promise.all(t.map((t=>t.promise))),this.promises=this.promises.filter((e=>!t.includes(e))),t}constructor(t){this.owner=t,this.dependencies=new Set,this.event=new n,this.markDirty=()=>this.event.raise(),this.invokable=this.invoke.bind(this),Object.defineProperty(this.invokable,"context",{value:this}),Object.defineProperty(this.invokable,"toPromise",{value:this.toPromise.bind(this)})}invoke(){}startCollecting(){if(o.collectionSet.has(this))throw new r.t("A circular dependency occurred between signals.","This can happen when signals reference each other in a loop.\n        Try using the attached stack trace to locate said loop.");o.collectionSet.add(this),o.collectionStack.push(this)}finishCollecting(){if(o.collectionSet.delete(this),o.collectionStack.pop()!==this)throw new Error("collectStart/collectEnd was called out of order.")}clearDependencies(){this.dependencies.forEach((t=>t.unsubscribe(this.markDirty))),this.dependencies.clear()}collect(){const t=o.collectionStack.at(-1);t&&(t.dependencies.add(this.event.subscribable),this.event.subscribe(t.markDirty))}dispose(){this.clearDependencies(),this.event.clear(),this.owner=null}async toPromise(){do{await o.consumePromises(),this.invokable()}while(o.hasPromises());return this.invokable}}o.collectionSet=new Set,o.collectionStack=[],o.promises=[]},16249:(t,e,s)=>{"use strict";s.d(e,{V:()=>d});var i=s(97074),n=s(74534),r=s(3163),o=s(90031),a=s(77396),l=s(84266),h=s(76062),c=s(68003),u=s(60771);class d extends h.k{constructor(t,e,s,i,n){void 0===s&&(s=void 0),void 0===i&&(i=t=>t),void 0===n&&(n={}),super(s),this.initial=t,this.interpolation=e,this.parser=i,Object.defineProperty(this.invokable,"reset",{value:this.reset.bind(this)}),Object.defineProperty(this.invokable,"save",{value:this.save.bind(this)}),Object.defineProperty(this.invokable,"isInitial",{value:this.isInitial.bind(this)}),void 0!==this.initial&&(this.current=this.initial,this.markDirty(),(0,c.PG)(this.initial)||(this.last=this.parse(this.initial))),this.extensions={getter:this.getter.bind(this),setter:this.setter.bind(this),tweener:this.tweener.bind(this),...n}}toSignal(){return this.invokable}parse(t){return this.parser(t)}set(t){return this.extensions.setter(t),this.owner}setter(t){return t===u.T&&(t=this.initial),this.current===t||(this.current=t,this.markDirty(),this.clearDependencies(),(0,c.PG)(t)||(this.last=this.parse(t))),this.owner}get(){return this.extensions.getter()}getter(){if(this.event.isRaised()&&(0,c.PG)(this.current)){this.clearDependencies(),this.startCollecting();try{this.last=this.parse(this.current())}catch(e){var t;(0,r.wL)().error({...(0,o.d)(e),inspect:null==(t=this.owner)?void 0:t.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}invoke(t,e,s,n){if(void 0===s&&(s=i.qb),void 0===n&&(n=this.interpolation),void 0===t)return this.get();if(void 0===e)return this.set(t);return this.createQueue(s,n).to(t,e)}createQueue(t,e){var s=this;const i=this.get(),n=[],r=(0,a.K)((function*(){for(;n.length>0;)yield*n.shift()}));return r.to=function(i,o,a,l){return void 0===a&&(a=t),void 0===l&&(l=e),t=a,e=l,n.push(s.tween(i,o,a,l)),r},r.back=function(o,a,l){return void 0===a&&(a=t),void 0===l&&(l=e),t=a,e=l,n.push(s.tween(i,o,t,e)),r},r.wait=t=>(n.push((0,l.X)(t)),r),r.run=t=>(n.push(t),r),r.do=t=>(n.push((0,a.K)((function*(){t()}))),r),r}*tween(t,e,s,i){t===u.T&&(t=this.initial),yield*this.extensions.tweener(t,e,s,i),this.set(t)}*tweener(t,e,s,i){const r=this.get();yield*(0,n.i)(e,(e=>{this.set(i(r,this.parse((0,c.Wg)(t)),s(e)))}))}dispose(){super.dispose(),this.initial=void 0,this.current=void 0,this.last=void 0}reset(){return void 0!==this.initial&&this.set(this.initial),this.owner}save(){return this.set(this.get())}isInitial(){return this.collect(),this.current===this.initial}raw(){return this.current}}},73662:(t,e,s)=>{"use strict";s.d(e,{D:()=>n});var i=s(81865);function n(t,e){return new i.h(t,e).toSignal()}},97140:(t,e,s)=>{"use strict";s.d(e,{g:()=>r});var i=s(13170),n=s(16249);function r(t,e,s){return void 0===e&&(e=i.o0),new n.V(t,e,s).toSignal()}},60771:(t,e,s)=>{"use strict";s.d(e,{T:()=>i});const i=Symbol.for("@motion-canvas/core/signals/default")},68003:(t,e,s)=>{"use strict";function i(t){return"function"==typeof t}function n(t,e){return i(t)?()=>e(t()):e(t)}function r(t){return i(t)?t():t}s.d(e,{PG:()=>i,Pj:()=>n,Wg:()=>r})},50580:(t,e,s)=>{"use strict";s.d(e,{j:()=>o});var i=s(56632),n=s(97140),r=s(75168);class o{get fixed(){return this.fixedTime}get canceled(){var t;return this.isCanceled||((null==(t=this.parent)?void 0:t.canceled)??!1)}get paused(){var t;return this.isPaused||((null==(t=this.parent)?void 0:t.paused)??!1)}constructor(t){this.runner=t,this.children=[],this.time=(0,n.g)(0),this.parent=null,this.isCanceled=!1,this.isPaused=!1,this.fixedTime=0}next(){if(this.paused)return{value:null,done:!1};(0,i.h$)(this);const t=this.runner.next(this.value);return(0,i.kw)(this),this.value=null,t}update(t){this.paused||(this.time(this.time()+t),this.fixedTime+=t),this.children=this.children.filter((t=>!t.canceled))}add(t){t.cancel(),t.parent=this,t.isCanceled=!1,t.time(this.time()),t.fixedTime=this.fixedTime,this.children.push(t),(0,r.i)(t.runner,`unknown ${this.children.length}`)}cancel(){this.isCanceled=!0,this.parent=null}pause(t){this.isPaused=t}}},80638:(t,e,s)=>{"use strict";function i(t){return t&&("object"==typeof t||"function"==typeof t)&&"toPromise"in t}function n(t){return null!==t&&"object"==typeof t&&Symbol.iterator in t&&"next"in t}s.d(e,{R:()=>n,x:()=>i})},51284:(t,e,s)=>{"use strict";s.d(e,{v:()=>o});var i=s(42075),n=s(67292),r=s(56632);function*o(t){let e=!0;for(var s=arguments.length,i=new Array(s>1?s-1:0),n=1;n<s;n++)i[n-1]=arguments[n];"boolean"==typeof t?e=t:i.push(t);const o=(0,r.nn)(),a=i.map((t=>o.children.find((e=>e.runner===t)))).filter((t=>t)),l=o.time();let h;if(e){for(;a.find((t=>!t.canceled));)yield;h=Math.max(...a.map((t=>t.time())))}else{for(;!a.find((t=>t.canceled));)yield;const t=a.filter((t=>t.canceled));h=Math.min(...t.map((t=>t.time())))}o.time(Math.max(l,h))}(0,i.G)(o,(0,n.C)())},75168:(t,e,s)=>{"use strict";function i(t,e){const s=Object.getPrototypeOf(t);s.threadable||(s.threadable=!0,s.name="string"==typeof e?e:n(e))}function n(t){return Object.getPrototypeOf(t).name??null}s.d(e,{i:()=>i,z:()=>n})},5881:(t,e,s)=>{"use strict";s.d(e,{C:()=>c,t:()=>h});var i=s(42075),n=s(67292),r=s(50580),o=s(80638),a=s(75168),l=s(97715);function h(t){return"function"==typeof(null==t?void 0:t.then)}function*c(t,e){const s=(0,l.te)(),i=t();(0,a.i)(i,"root");const n=new r.j(i);null==e||e(n);let h=[n];for(;h.length>0;){const t=[],e=[...h],i=s.framesToSeconds(1)*s.speed;for(;e.length>0;){const s=e.pop();if(!s||s.canceled)continue;const n=s.next();if(n.done)s.cancel();else if((0,o.R)(n.value)){const t=new r.j(n.value);s.value=n.value,s.add(t),e.push(s),e.push(t)}else n.value?(s.value=yield n.value,e.push(s)):(s.update(i),t.unshift(s))}h=t.filter((t=>!t.canceled)),h.length>0&&(yield)}}(0,i.G)(c,(0,n.C)())},13170:(t,e,s)=>{"use strict";s.d(e,{JC:()=>r,UI:()=>a,Vz:()=>u,a2:()=>l,o0:()=>o,uZ:()=>h,vl:()=>c});var i=s(3163),n=s(29797);function r(t,e,s){if(e.length>=t.length){const i=Math.floor(e.length*s),n=Math.floor(a(t.length-1,e.length,s));let r="";for(let s=0;s<e.length;s++)s<i?r+=e[s]:(t[s]||s<=n)&&(r+=t[s]??e[s]);return r}{const i=Math.round(t.length*(1-s)),n=Math.floor(a(t.length+1,e.length,s)),r=[];for(let s=t.length-1;s>=0;s--)s<i?r.unshift(t[s]):(e[s]||s<n)&&r.unshift(e[s]??t[s]);return r.join("")}}function o(t,e,s,n){if(void 0===n&&(n=!1),0===s)return t;if(1===s)return e;if(null!=t&&null!=e){if("number"==typeof t&&"number"==typeof e)return a(t,e,s);if("string"==typeof t&&"string"==typeof e)return r(t,e,s);if("boolean"==typeof t&&"boolean"==typeof e)return s<.5?t:e;if("lerp"in t)return t.lerp(e,s);if(t&&e&&"object"==typeof t&&"object"==typeof e)if(Array.isArray(t)&&Array.isArray(e)){if(t.length===e.length)return t.map(((t,i)=>o(t,e[i],s)))}else{let i=!1;if(t instanceof Map||e instanceof Map||(i=!0,t=new Map(Object.entries(t)),e=new Map(Object.entries(e))),t instanceof Map&&e instanceof Map){const n=new Map;for(const i of new Set([...t.keys(),...e.keys()])){const r=o(t.get(i),e.get(i),s,!0);void 0!==r&&n.set(i,r)}return i?Object.fromEntries(n):n}}return e}n||(0,i.wL)().warn(`Attempting to lerp ${t} -> ${e} may result in unexpected behavior.`)}function a(t,e,s){return t+(e-t)*s}function l(t,e,s,i,n){return s+(n-t)*(i-s)/(e-t)}function h(t,e,s){return s<t?t:s>e?e:s}function c(t,e,s,i,n){const r=l(t,e,s,i,n);return s>i&&([s,i]=[i,s]),h(s,i,r)}function u(t,e,s){let i=e;s>1?s=1/s:i=!i;const r=a(i?Math.acos(h(-1,1,1-t)):Math.asin(t),a(0,Math.PI/2,t),s);let o=Math.sin(r),l=1-Math.cos(r);return e&&([o,l]=[l,o]),new n.F(o,l)}},97074:(t,e,s)=>{"use strict";s.d(e,{BH:()=>_,Bl:()=>F,C6:()=>q,FG:()=>l,Fs:()=>a,GE:()=>j,Ge:()=>P,Ij:()=>M,J7:()=>g,Kx:()=>E,Mg:()=>k,N1:()=>r,O$:()=>n,Q9:()=>u,SJ:()=>N,UE:()=>D,Y3:()=>m,Yw:()=>B,ad:()=>x,cv:()=>H,du:()=>L,eE:()=>W,e_:()=>w,ei:()=>C,en:()=>Z,g4:()=>f,hN:()=>S,hl:()=>h,j$:()=>R,jv:()=>O,lj:()=>T,mC:()=>A,n5:()=>v,pl:()=>y,qS:()=>I,qb:()=>p,rz:()=>b,sK:()=>U,to:()=>c,vh:()=>o,w2:()=>d,zk:()=>z});var i=s(13170);function n(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),(0,i.a2)(-1,1,e,s,Math.sin(t))}function r(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.cos(t*Math.PI/2),(0,i.UI)(e,s,t)}function o(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=Math.sin(t*Math.PI/2),(0,i.UI)(e,s,t)}function a(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=-(Math.cos(Math.PI*t)-1)/2,(0,i.UI)(e,s,t)}function l(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t*=t,(0,i.UI)(e,s,t)}function h(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.pow(1-t,2),(0,i.UI)(e,s,t)}function c(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,(0,i.UI)(e,s,t)}function u(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t*=t*t,(0,i.UI)(e,s,t)}function d(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.pow(1-t,3),(0,i.UI)(e,s,t)}function p(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,(0,i.UI)(e,s,t)}function f(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t*=t*t*t,(0,i.UI)(e,s,t)}function m(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.pow(1-t,4),(0,i.UI)(e,s,t)}function g(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,(0,i.UI)(e,s,t)}function v(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t*=t*t*t*t,(0,i.UI)(e,s,t)}function y(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.pow(1-t,5),(0,i.UI)(e,s,t)}function b(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,(0,i.UI)(e,s,t)}function w(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=0===t?0:Math.pow(2,10*t-10),(0,i.UI)(e,s,t)}function x(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1===t?1:1-Math.pow(2,-10*t),(0,i.UI)(e,s,t)}function S(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=0===t?0:1===t?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,(0,i.UI)(e,s,t)}function k(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=1-Math.sqrt(1-Math.pow(t,2)),(0,i.UI)(e,s,t)}function C(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=Math.sqrt(1-Math.pow(t-1,2)),(0,i.UI)(e,s,t)}function P(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),t=t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,(0,i.UI)(e,s,t)}function R(t){return void 0===t&&(t=1.70158),function(e,s,n){return void 0===s&&(s=0),void 0===n&&(n=1),e=(t+1)*e*e*e-t*e*e,(0,i.UI)(s,n,e)}}function T(t){return void 0===t&&(t=1.70158),function(e,s,n){return void 0===s&&(s=0),void 0===n&&(n=1),e=1+(t+1)*Math.pow(e-1,3)+t*Math.pow(e-1,2),(0,i.UI)(s,n,e)}}function F(t,e){return void 0===t&&(t=1.70158),void 0===e&&(e=1.525),function(s,n,r){return void 0===n&&(n=0),void 0===r&&(r=1),s=s<.5?Math.pow(2*s,2)*(2*(t*e+1)*s-t*e)/2:(Math.pow(2*s-2,2)*((t*e+1)*(2*s-2)+t*e)+2)/2,(0,i.UI)(n,r,s)}}function I(t){return void 0===t&&(t=2.094395),function(e,s,n){return void 0===s&&(s=0),void 0===n&&(n=1),e=0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*t),(0,i.UI)(s,n,e)}}function E(t){return void 0===t&&(t=2.094395),function(e,s,n){return void 0===s&&(s=0),void 0===n&&(n=1),e=0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*t)+1,(0,i.UI)(s,n,e)}}function L(t){return void 0===t&&(t=1.39626),function(e,s,n){return void 0===s&&(s=0),void 0===n&&(n=1),e=0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*t)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*t)/2+1,(0,i.UI)(s,n,e)}}function O(t,e){void 0===t&&(t=7.5625),void 0===e&&(e=2.75);const s=z(t,e);return function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),1-s(1-t,e,i)}}function z(t,e){return void 0===t&&(t=7.5625),void 0===e&&(e=2.75),function(s,n,r){return void 0===n&&(n=0),void 0===r&&(r=1),s<1/e?s*=t*s:s=s<2/e?t*(s-=1.505/e)*s+.75:s<2.5/e?t*(s-=2.25/e)*s+.9375:t*(s-=2.625/e)*s+.984375,(0,i.UI)(n,r,s)}}function M(t,e){void 0===t&&(t=7.5625),void 0===e&&(e=2.75);const s=z(t,e);return function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t<.5?(1-s(1-2*t,e,i))/2:(1+s(2*t-1,e,i))/2}}function j(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),(0,i.UI)(e,s,t)}function A(t,e,s){return void 0===e&&(e=0),void 0===s&&(s=1),(0,i.a2)(-1,1,e,s,Math.cos(t))}const B=R(),D=T(),_=F(),N=O(),q=z(),Z=M(),W=I(),U=E(),H=L()},74534:(t,e,s)=>{"use strict";s.d(e,{i:()=>o});var i=s(42075),n=s(67292),r=s(56632);function*o(t,e,s){const i=(0,r.nn)(),n=i.time(),o=i.time()+t;for(e(0,0);o>i.fixed;){const s=i.fixed-n;s>0&&e(s/t,s),yield}i.time(o),e(1,t),null==s||s(1,t)}(0,i.G)(o,(0,n.C)())},23357:(t,e,s)=>{"use strict";s.d(e,{b:()=>o});var i=s(29797),n=s(13170),r=s(46096);class o{static createSignal(t,e){return void 0===e&&(e=o.lerp),new r.N(["x","y","width","height"],(t=>new o(t)),t,e).toSignal()}static lerp(t,e,s){let r,a,l,h;return"number"==typeof s?r=a=l=h=s:s instanceof i.F?(r=l=s.x,a=h=s.y):(r=s.x,a=s.y,l=s.width,h=s.height),new o((0,n.UI)(t.x,e.x,r),(0,n.UI)(t.y,e.y,a),(0,n.UI)(t.width,e.width,l),(0,n.UI)(t.height,e.height,h))}static arcLerp(t,e,s,i,r){return void 0===i&&(i=!1),r??(r=(t.position.sub(e.position).ctg+t.size.sub(e.size).ctg)/2),o.lerp(t,e,(0,n.Vz)(s,i,r))}static fromSizeCentered(t){return new o(-t.width/2,-t.height/2,t.width,t.height)}static fromPoints(){let t=1/0,e=1/0,s=-1/0,i=-1/0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(const o of r)o.x>s&&(s=o.x),o.x<t&&(t=o.x),o.y>i&&(i=o.y),o.y<e&&(e=o.y);return new o(t,e,s-t,i-e)}static fromBBoxes(){let t=1/0,e=1/0,s=-1/0,i=-1/0;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];for(const o of r){const n=o.x+o.width;n>s&&(s=n),o.x<t&&(t=o.x);const r=o.y+o.height;r>i&&(i=r),o.y<e&&(e=o.y)}return new o(t,e,s-t,i-e)}lerp(t,e){return o.lerp(this,t,e)}get position(){return new i.F(this.x,this.y)}set position(t){this.x=t.x,this.y=t.y}get size(){return new i.F(this.width,this.height)}get center(){return new i.F(this.x+this.width/2,this.y+this.height/2)}get left(){return this.x}set left(t){this.width+=this.x-t,this.x=t}get right(){return this.x+this.width}set right(t){this.width=t-this.x}get top(){return this.y}set top(t){this.height+=this.y-t,this.y=t}get bottom(){return this.y+this.height}set bottom(t){this.height=t-this.y}get topLeft(){return this.position}get topRight(){return new i.F(this.x+this.width,this.y)}get bottomLeft(){return new i.F(this.x,this.y+this.height)}get bottomRight(){return new i.F(this.x+this.width,this.y+this.height)}get corners(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]}get pixelPerfect(){return new o(Math.floor(this.x),Math.floor(this.y),Math.ceil(this.width+1),Math.ceil(this.height+1))}constructor(t,e,s,n){if(void 0===e&&(e=0),void 0===s&&(s=0),void 0===n&&(n=0),this.x=0,this.y=0,this.width=0,this.height=0,null!=t){if("number"==typeof t)return this.x=t,this.y=e,this.width=s,void(this.height=n);if(t instanceof i.F)return this.x=t.x,this.y=t.y,void(e instanceof i.F&&(this.width=e.x,this.height=e.y));if(Array.isArray(t))return this.x=t[0],this.y=t[1],this.width=t[2],void(this.height=t[3]);this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}}transform(t){return new o(this.position.transformAsPoint(t),this.size.transform(t))}transformCorners(t){return this.corners.map((e=>e.transformAsPoint(t)))}expand(t){return new o(this.x-t,this.y-t,this.width+2*t,this.height+2*t)}addSpacing(t){const e=new o(this);return e.left-=t.left,e.top-=t.top,e.right+=t.right,e.bottom+=t.bottom,e}includes(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height}intersects(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}intersection(t){const e=new o;return this.intersects(t)&&(e.left=Math.max(this.left,t.left),e.top=Math.max(this.top,t.top),e.right=Math.min(this.right,t.right),e.bottom=Math.min(this.bottom,t.bottom)),e}toSymbol(){return o.symbol}serialize(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}o.symbol=Symbol.for("@motion-canvas/core/types/Rect")},30204:(t,e,s)=>{"use strict";s.d(e,{I:()=>i.Color});var i=s(5392),n=s(16249);i.Color.symbol=i.Color.prototype.symbol=Symbol.for("@motion-canvas/core/types/Color"),i.Color.lerp=i.Color.prototype.lerp=function(t,e,s,n){void 0===n&&(n="lch"),"string"==typeof t&&(t=new i.Color(t)),"string"==typeof e&&(e=new i.Color(e));const r=t instanceof i.Color,o=e instanceof i.Color;return r||(t=o?e.alpha(0):new i.Color("rgba(0, 0, 0, 0)")),o||(e=r?t.alpha(0):new i.Color("rgba(0, 0, 0, 0)")),(0,i.mix)(t,e,s,n)},i.Color.createLerp=i.Color.prototype.createLerp=t=>(e,s,n)=>i.Color.lerp(e,s,n,t),i.Color.createSignal=function(t,e){return void 0===e&&(e=i.Color.lerp),new n.V(t,e,void 0,(t=>new i.Color(t))).toSignal()},i.Color.prototype.toSymbol=()=>i.Color.symbol,i.Color.prototype.serialize=function(){return this.css()},i.Color.prototype.lerp=function(t,e,s){return i.Color.lerp(this,t,e,s)}},74741:(t,e,s)=>{"use strict";s.d(e,{$:()=>n,X:()=>r});var i=s(29797);function n(t,e){return i.F.fromDegrees(t).transform(e).degrees}function r(t,e){return i.F.magnitude(e.m11,e.m12)*t}},98378:(t,e,s)=>{"use strict";s.d(e,{M5:()=>i,Nm:()=>n,WS:()=>l,aP:()=>r,lk:()=>a});var i,n,r,o=s(29797);function a(t,e){return void 0===e&&(e=i.Horizontal|i.Vertical),e&i.Vertical&&(t&n.Top?t=t&~n.Top|n.Bottom:t&n.Bottom&&(t=t&~n.Bottom|n.Top)),e&i.Horizontal&&(t&n.Left?t=t&~n.Left|n.Right:t&n.Right&&(t=t&~n.Right|n.Left)),t}function l(t){if(t===r.Middle)return o.F.zero;let e=0;t&n.Left?e=-1:t&n.Right&&(e=1);let s=0;return t&n.Top?s=-1:t&n.Bottom&&(s=1),new o.F(e,s)}!function(t){t[t.Vertical=1]="Vertical",t[t.Horizontal=2]="Horizontal"}(i||(i={})),function(t){t[t.Top=4]="Top",t[t.Bottom=8]="Bottom",t[t.Left=16]="Left",t[t.Right=32]="Right"}(n||(n={})),function(t){t[t.Middle=3]="Middle",t[t.Top=5]="Top",t[t.Bottom=9]="Bottom",t[t.Left=18]="Left",t[t.Right=34]="Right",t[t.TopLeft=20]="TopLeft",t[t.TopRight=36]="TopRight",t[t.BottomLeft=24]="BottomLeft",t[t.BottomRight=40]="BottomRight"}(r||(r={}))},43188:(t,e,s)=>{"use strict";s.d(e,{K:()=>r});var i=s(13170),n=s(46096);class r{static createSignal(t,e){return void 0===e&&(e=r.lerp),new n.N(["top","right","bottom","left"],(t=>new r(t)),t,e).toSignal()}static lerp(t,e,s){return new r((0,i.UI)(t.top,e.top,s),(0,i.UI)(t.right,e.right,s),(0,i.UI)(t.bottom,e.bottom,s),(0,i.UI)(t.left,e.left,s))}get x(){return this.left+this.right}get y(){return this.top+this.bottom}constructor(t,e,s,i){if(void 0===t&&(t=0),this.top=0,this.right=0,this.bottom=0,this.left=0,null!=t){if(Array.isArray(t)&&(i=t[3],s=t[2],e=t[1],t=t[0]),"number"==typeof t)return this.top=t,this.right=void 0!==e?e:t,this.bottom=void 0!==s?s:t,void(this.left=void 0!==i?i:void 0!==e?e:t);this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left}}lerp(t,e){return r.lerp(this,t,e)}scale(t){return new r(this.top*t,this.right*t,this.bottom*t,this.left*t)}addScalar(t){return new r(this.top+t,this.right+t,this.bottom+t,this.left+t)}toSymbol(){return r.symbol}serialize(){return{top:this.top,right:this.right,bottom:this.bottom,left:this.left}}}r.symbol=Symbol.for("@motion-canvas/core/types/Spacing")},57292:(t,e,s)=>{"use strict";s.d(e,{I:()=>i,P:()=>n});const i=1e-6;function n(t){return t&&"object"==typeof t&&"toSymbol"in t}},29797:(t,e,s)=>{"use strict";s.d(e,{F:()=>l});var i=s(13170),n=s(98378),r=s(57292),o=s(46096),a=s(48733);class l{static createSignal(t,e,s){return void 0===e&&(e=l.lerp),new o.N(["x","y"],(t=>new l(t)),t,e,s).toSignal()}static lerp(t,e,s){let n,r;return"number"==typeof s?n=r=s:(n=s.x,r=s.y),new l((0,i.UI)(t.x,e.x,n),(0,i.UI)(t.y,e.y,r))}static arcLerp(t,e,s,n,r){return void 0===n&&(n=!1),r??(r=t.sub(e).ctg),l.lerp(t,e,(0,i.Vz)(s,n,r))}static createArcLerp(t,e){return(s,i,n)=>l.arcLerp(s,i,n,t,e)}static fromOrigin(t){const e=new l;return t===n.aP.Middle||(t&n.Nm.Left?e.x=-1:t&n.Nm.Right&&(e.x=1),t&n.Nm.Top?e.y=-1:t&n.Nm.Bottom&&(e.y=1)),e}static fromScalar(t){return new l(t,t)}static fromRadians(t){return new l(Math.cos(t),Math.sin(t))}static fromDegrees(t){return l.fromRadians(t*a.q)}static radians(t,e){return Math.atan2(e,t)}static degrees(t,e){return l.radians(t,e)*a.I}static magnitude(t,e){return Math.sqrt(t*t+e*e)}static squaredMagnitude(t,e){return t*t+e*e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}get magnitude(){return l.magnitude(this.x,this.y)}get squaredMagnitude(){return l.squaredMagnitude(this.x,this.y)}get normalized(){return this.scale(1/l.magnitude(this.x,this.y))}get safe(){return new l(isNaN(this.x)?0:this.x,isNaN(this.y)?0:this.y)}get flipped(){return new l(-this.x,-this.y)}get floored(){return new l(Math.floor(this.x),Math.floor(this.y))}get perpendicular(){return new l(this.y,-this.x)}get radians(){return l.radians(this.x,this.y)}get degrees(){return l.degrees(this.x,this.y)}get ctg(){return this.x/this.y}constructor(t,e){if(this.x=0,this.y=0,null!=t){if("object"!=typeof t)return this.x=t,void(this.y=e??t);if(Array.isArray(t))return this.x=t[0],void(this.y=t[1]);if("width"in t)return this.x=t.width,void(this.y=t.height);this.x=t.x,this.y=t.y}}lerp(t,e){return l.lerp(this,t,e)}getOriginOffset(t){const e=l.fromOrigin(t);return e.x*=this.x/2,e.y*=this.y/2,e}scale(t){return new l(this.x*t,this.y*t)}transformAsPoint(t){return new l(this.x*t.m11+this.y*t.m21+t.m41,this.x*t.m12+this.y*t.m22+t.m42)}transform(t){return new l(this.x*t.m11+this.y*t.m21,this.x*t.m12+this.y*t.m22)}mul(t){const e=new l(t);return new l(this.x*e.x,this.y*e.y)}div(t){const e=new l(t);return new l(this.x/e.x,this.y/e.y)}add(t){const e=new l(t);return new l(this.x+e.x,this.y+e.y)}sub(t){const e=new l(t);return new l(this.x-e.x,this.y-e.y)}dot(t){const e=new l(t);return this.x*e.x+this.y*e.y}mod(t){const e=new l(t);return new l(this.x%e.x,this.y%e.y)}addX(t){return new l(this.x+t,this.y)}addY(t){return new l(this.x,this.y+t)}toSymbol(){return l.symbol}serialize(){return{x:this.x,y:this.y}}exactlyEquals(t){return this.x===t.x&&this.y===t.y}equals(t,e){return void 0===e&&(e=r.I),Math.abs(this.x-t.x)<=e+Number.EPSILON&&Math.abs(this.y-t.y)<=e+Number.EPSILON}}l.symbol=Symbol.for("@motion-canvas/core/types/Vector2"),l.zero=new l,l.one=new l(1,1),l.right=new l(1,0),l.left=new l(-1,0),l.up=new l(0,1),l.down=new l(0,-1)},49111:(t,e,s)=>{"use strict";s.d(e,{t:()=>i});class i extends Error{constructor(t,e){super(t),this.remarks=e}}},15649:(t,e,s)=>{"use strict";s.d(e,{L:()=>i});class i{constructor(){this.resolveCurrent=null,this.current=null}async acquire(){for(;this.current;)await this.current;this.current=new Promise((t=>{this.resolveCurrent=t}))}release(){var t;this.current=null,null==(t=this.resolveCurrent)||t.call(this),this.resolveCurrent=null}}},15688:(t,e,s)=>{"use strict";function i(t){return t[0].toUpperCase()+t.slice(1)}s.d(e,{k:()=>i})},90031:(t,e,s)=>{"use strict";function i(t){return{message:t.message,stack:t.stack,remarks:t.remarks}}s.d(e,{d:()=>i})},1119:(t,e,s)=>{"use strict";function i(t,e){void 0===e&&(e=document.createElement("canvas"));const s=e.getContext("2d",t);if(!s)throw new Error("Could not create a 2D context.");return s}s.d(e,{f:()=>i})},48733:(t,e,s)=>{"use strict";s.d(e,{I:()=>i,q:()=>n});const i=180/Math.PI,n=Math.PI/180},37762:(t,e,s)=>{"use strict";function i(t,e,s){let i=0,n=t;void 0!==e&&(i=t,n=e),s=void 0===s?i<n?1:-1:s;const r=[];let o=Math.max(Math.ceil((n-i)/s),0),a=0;for(;o--;)r[a++]=i,i+=s;return r}s.d(e,{w:()=>i})},30092:(t,e,s)=>{"use strict";s.d(e,{Y:()=>r});var i=s(3163),n=s(56632);function r(t){const e=(0,i.$r)(),s=(0,n.nn)();return e.timeEvents.register(t,s.time())}},97715:(t,e,s)=>{"use strict";s.d(e,{Mh:()=>o,te:()=>n,wA:()=>r});const i=[];function n(){const t=i.at(-1);if(!t)throw new Error("The playback is not available in the current context.");return t}function r(t){i.push(t)}function o(t){if(i.pop()!==t)throw new Error("startPlayback/endPlayback were called out of order.")}},3163:(t,e,s)=>{"use strict";s.d(e,{$r:()=>n,DO:()=>r,ug:()=>o,vl:()=>l,wL:()=>a});const i=[];function n(){const t=i.at(-1);if(!t)throw new Error("The scene is not available in the current context.");return t}function r(t){i.push(t)}function o(t){if(i.pop()!==t)throw new Error("startScene/endScene were called out of order.")}function a(){var t;return(null==(t=i.at(-1))?void 0:t.logger)??console}function l(){n().enterCanTransitionOut()}},56632:(t,e,s)=>{"use strict";s.d(e,{h$:()=>o,kw:()=>a,nn:()=>r});var i=s(49111);const n=[];function r(){const t=n.at(-1);if(!t)throw new i.t("The thread is not available in the current context.","<p><code>useThread()</code> can only be called from within generator functions.\n      It&#39;s not available during rendering.</p>\n");return t}function o(t){n.push(t)}function a(t){if(n.pop()!==t)throw new Error("startThread/endThread was called out of order.")}},69573:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(2784);function n(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}))}},10700:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(2784);function n(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M3 15h8v-2H3v2zm0 4h8v-2H3v2zm0-8h8V9H3v2zm0-6v2h8V5H3zm10 0h8v14h-8V5z"}))}},48015:(t,e,s)=>{"use strict";s.d(e,{Z:()=>n});var i=s(2784);function n(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M4 15h16v-2H4v2zm0 4h16v-2H4v2zm0-8h16V9H4v2zm0-6v2h16V5H4z"}))}},26773:(t,e,s)=>{"use strict";s.d(e,{Z:()=>Pt});var i=s(2784),n=s(18888),r=s(35565),o=s(1727),a=s(99387),l=s(77120),h=s(53947),c=s(86253);const u=l.Qf.define([{tag:c.pJ.comment,color:"var(--hl-comment)"},{tag:c.pJ.docComment,color:"var(--hl-comment)"},{tag:c.pJ.blockComment,color:"var(--hl-comment)"},{tag:c.pJ.keyword,color:"var(--hl-keyword)"},{tag:c.pJ.number,color:"var(--hl-number)"},{tag:c.pJ.inserted,color:"var(--hl-number)"},{tag:c.pJ.constant(c.pJ.propertyName),color:"var(--hl-constant)"},{tag:c.pJ.attributeName,color:"var(--hl-variable)"},{tag:c.pJ.variableName,color:"var(--hl-variable)"},{tag:c.pJ.propertyName,color:"var(--hl-variable)"},{tag:c.pJ.deleted,color:"var(--hl-string)"},{tag:c.pJ.string,color:"var(--hl-string)"},{tag:c.pJ.attributeValue,color:"var(--hl-string)"},{tag:c.pJ.tagName,color:"var(--hl-tag)"},{tag:c.pJ.typeName,color:"var(--hl-tag)"},{tag:c.pJ.punctuation,color:"var(--hl-punctuation)"},{tag:c.pJ.operator,color:"var(--hl-punctuation)"},{tag:c.pJ.function(c.pJ.variableName),color:"var(--hl-function)"},{tag:c.pJ.function(c.pJ.propertyName),color:"var(--hl-function)"},{tag:c.pJ.className,color:"var(--hl-class)"},{tag:c.pJ.character,color:"var(--hl-char)"}]),d=r.tk.theme({"&":{fontSize:"var(--ifm-code-font-size)",lineHeight:"21.04px",fontFamily:"var(--ifm-font-family-monospace)",color:"var(--hl-color)",backgroundColor:"var(--hl-background)"},"&.cm-focused .cm-cursor":{borderLeftColor:"var(--hl-color)"},"&.cm-focused":{outline:"none"},".cm-gutters":{backgroundColor:"var(--hl-background)",color:"var(--ifm-color-secondary-darkest)",borderRight:"1px solid var(--ifm-background-color)"},"& .cm-lineNumbers .cm-gutterElement":{paddingLeft:"var(--ifm-pre-padding)"},".cm-activeLineGutter":{backgroundColor:"var(--ifm-code-active-color)"},".cm-scroller":{fontFamily:"var(--ifm-font-family-monospace)",lineHeight:"var(--ifm-pre-line-height)",paddingTop:"var(--ifm-pre-padding)",paddingBottom:"var(--ifm-pre-padding)"},".cm-content":{padding:"0"},"& .cm-line":{paddingRight:"var(--ifm-pre-padding)"},"& .cm-selectionBackground, &.cm-focused .cm-selectionBackground, ::selection":{backgroundColor:"var(--ifm-code-selection-color)"},".cm-activeLine":{backgroundColor:"var(--ifm-code-active-color)"},".cm-selectionMatch":{backgroundColor:"var(--ifm-code-selection-color)"},".cm-foldPlaceholder":{backgroundColor:"var(--ifm-code-selection-color)",borderColor:"var(--ifm-color-emphasis-300)"},".cm-tooltip":{backgroundColor:"var(--ifm-background-surface-color)"}});var p=s(78128);function f(t){const[e,s]=(0,i.useState)(null==t?void 0:t.current);return(0,i.useEffect)((()=>t&&t.subscribe(s)),[t]),e}function m(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"}))}function g(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"}))}function v(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M8 5v14l11-7z"}))}function y(){return i.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor"},i.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}))}var b=s(48015),w=s(10700),x=s(69573),S=s(74391);const k=Object.entries(S.Z).map((t=>{let[e,s]=t;return{label:e,type:"function"==typeof s?(i=s,i.prototype&&i.prototype.constructor.name?"class":"function"):"variable"};var i}));var C,P=s(96881);!function(t){t.Error="error",t.Warn="warn",t.Info="info",t.Http="http",t.Verbose="verbose",t.Debug="debug",t.Silly="silly"}(C||(C={}));class R{constructor(){this.logged=new P.p,this.history=[],this.profilers={}}get onLogged(){return this.logged.subscribable}log(t){this.logged.dispatch(t),this.history.push(t)}error(t){this.logLevel(C.Error,t)}warn(t){this.logLevel(C.Warn,t)}info(t){this.logLevel(C.Info,t)}http(t){this.logLevel(C.Http,t)}verbose(t){this.logLevel(C.Verbose,t)}debug(t){this.logLevel(C.Debug,t)}silly(t){this.logLevel(C.Silly,t)}logLevel(t,e){const s="string"==typeof e?{message:e}:e;s.level=t,this.log(s)}profile(t,e){const s=performance.now();if(this.profilers[t]){const i=this.profilers[t];delete this.profilers[t];const n=e??{message:t};return n.level??(n.level=C.Debug),n.durationMs=s-i,void this.log(n)}this.profilers[t]=s}}var T=s(82344),F=s(92673),I=s(30204);class E extends T.C{constructor(){super(...arguments),this.type=I.I.symbol}parse(t){return null===t?null:new I.I(t)}serialize(){var t;return(null==(t=this.value.current)?void 0:t.serialize())??null}}var L=s(57292),O=s(13170);class z extends T.C{constructor(){super(...arguments),this.type=z.symbol}parse(t){return this.parseRange(1/0,t[0],t[1]??1/0)}update(t,e,s,i){this.value.current=this.parseRange(s/i-L.I,t/i-L.I,e/i-L.I)}parseRange(t,e,s){return void 0===e&&(e=this.value.current[0]),void 0===s&&(s=this.value.current[1]),(e=(0,O.uZ)(0,t,e))>(s=(0,O.uZ)(0,t,s??1/0))&&([e,s]=[s,e]),s>=t&&(s=1/0),[e,s]}}z.symbol=Symbol.for("@motion-canvas/core/meta/RangeMetaField");var M=s(29797);class j extends T.C{constructor(){super(...arguments),this.type=M.F.symbol}parse(t){return new M.F(t)}serialize(){return this.value.current.serialize()}}class A extends T.C{constructor(){super(...arguments),this.type=Number,this.presets=[]}parse(t){let e=parseFloat(t);return void 0!==this.min&&e<this.min&&(e=this.min),void 0!==this.max&&e>this.max&&(e=this.max),e}getPresets(){return this.presets}setPresets(t){return this.presets=t,this}setRange(t,e){return this.min=t,this.max=e,this}}class B extends T.C{constructor(t,e,s){void 0===s&&(s=e[0].value),super(t,s),this.options=e,this.type=B.symbol}set(t){super.set(this.getOption(t).value)}parse(t){return this.getOption(t).value}getOption(t){return this.options.find((e=>e.value===t))??this.options[0]}}B.symbol=Symbol.for("@motion-canvas/core/meta/EnumMetaField");var D=s(1323);class _ extends T.C{get onFieldsChanged(){return this.fields.subscribable}get options(){return this.optionFields[this.current]}get exporter(){return this.exporters[this.current]}constructor(t,e,s){void 0===s&&(s=0);const i=e.map((t=>t.meta())),n=new B("exporter",e.map((t=>({value:t.name,text:t.name}))),e[s].name);super(t,{name:n.get(),options:i[s].get()}),this.exporters=e,this.current=s,this.type=Object,this.handleChange=()=>{const t=this.exporterField.get(),e=Math.max(this.exporters.findIndex((e=>e.name===t)),0);this.current!==e&&(this.options.onChanged.unsubscribe(this.handleChange),this.current=e,this.options.onChanged.subscribe(this.handleChange,!1),this.fields.current=[this.exporterField,this.options]),this.value.current={name:this.exporterField.get(),options:this.options.get()}},this.exporterField=n,this.exporterField.onChanged.subscribe(this.handleChange,!1),this.exporterField.disable(i.length<2).space(),this.optionFields=i,this.optionFields[s].onChanged.subscribe(this.handleChange,!1),this.fields=new D.G([this.exporterField,this.options])}set(t){this.exporterField.set(t.name),this.options.set(t.options)}serialize(){return{name:this.exporterField.serialize(),options:this.options.serialize()}}clone(){return new this.constructor(this.name,this.exporters,this.current)}}const N=[{value:.25,text:"0.25x (Quarter)"},{value:.5,text:"0.5x (Half)"},{value:1,text:"1.0x (Full)"},{value:2,text:"2.0x (Double)"}],q=[{value:"srgb",text:"sRGB"},{value:"display-p3",text:"DCI-P3"}],Z=[{value:"image/png",text:"png"},{value:"image/jpeg",text:"jpeg"},{value:"image/webp",text:"webp"}],W=[{value:30,text:"30 FPS"},{value:60,text:"60 FPS"}];class U extends F.v{constructor(t){super("project",function(t){const e={version:new T.C("version",1),shared:new F.v("General",{background:new E("background",null),range:new z("range",[0,1/0]),size:new j("resolution",new M.F(1920,1080)),audioOffset:new A("audio offset",0)}),preview:new F.v("Preview",{fps:new A("frame rate",30).setPresets(W),resolutionScale:new B("scale",N,1)}),rendering:new F.v("Rendering",{fps:new A("frame rate",60).setPresets(W),resolutionScale:new B("scale",N,1),colorSpace:new B("color space",q),exporter:new _("exporter",t.plugins.flatMap((e=>(null==e.exporters?void 0:e.exporters(t))??[])))})};return e.shared.audioOffset.disable(!t.audio),e}(t))}getFullPreviewSettings(){return{...this.shared.get(),...this.preview.get()}}getFullRenderingSettings(){return{...this.shared.get(),...this.rendering.get()}}}var H=s(2672),$=s(9989),G=s(15914);class V extends T.C{constructor(){super(...arguments),this.type=Boolean}parse(t){return!!t}}class J{constructor(t){this.logger=t,this.name="image sequence",this.frameLookup=new Map,this.frameCounter=0,this.projectName="unknown",this.quality=1,this.fileType="image/png",this.groupByScene=!1}meta(){const t=new F.v(this.name,{fileType:new B("file type",Z),quality:new A("quality",100).setRange(0,100),groupByScene:new V("group by scene",!1)});return t.fileType.onChanged.subscribe((e=>{t.quality.disable("image/png"===e)})),t}async configure(t){const e=t.exporter.options;this.projectName=t.name,this.quality=(0,O.uZ)(0,1,e.quality/100),this.fileType=e.fileType,this.groupByScene=e.groupByScene}async start(){this.frameLookup.clear()}async handleFrame(t,e,s,i,n){this.frameLookup.has(e)&&this.logger.warn(`Frame no. ${e} is already being exported.`)}async stop(){for(;this.frameCounter>0;)await new Promise((t=>setTimeout(t,1e3)))}}const X={name:"mc-default-plugin",exporters:t=>[new J(t.logger)]};let Y=null,K=null,Q=null,tt=null,et=null,st=null,it=1;function nt(t,e,s){var i;if(t!==et)return Y||(window.mc={...S.Z,makeScene2D:t=>(K.config=t,K.onReplaced.current=K,K)},K=(0,G.r)((function*(){yield})),K.onReplaced=new D.G(K),Y={name:"fiddle",logger:new R,plugins:[X],scenes:[K]},Y.meta=new U(Y),Y.meta.shared.size.set(960),Q=new H.J(Y,{size:Y.meta.shared.size.get()}),tt=new $.H,tt.configure({size:Y.meta.shared.size.get()}),Q.onRender.subscribe((async()=>{await tt.render(Q.playback.currentScene,Q.playback.previousScene)})),Q.onRecalculated.subscribe((()=>{var t;tt.finalBuffer.parentElement!==st&&(null==(t=st)||t.append(tt.finalBuffer),et(Q))}))),null==(i=st)||i.removeChild(tt.finalBuffer),null==et||et(null),et=t,st=e,it!==s&&(Y.meta.shared.size.set([960,Math.floor(960/s)]),K.onReplaced.current={...K.onReplaced.current,size:Y.meta.shared.size.get()},tt.configure({size:Y.meta.shared.size.get()}),it=s),Q.activate(),Q.requestReset(),Q}const rt="root_icgl",ot="layoutControl_X__N",at="icon_brRG",lt="active_qxTr",ht="progress_HsLC",ct="controls_R4ai",ut="previewOnly_FFUw",dt="section_UscS",pt="error_N64d",ft="editor_xQGp",mt="source_Dq6N",gt="preview_C9cZ",vt="button_ESGX",yt="picker_Whdf",bt="codeOnly_lee0";var wt=s(53487);const xt=/ *\/\/ ?(\S+) ?(.*)/,St=["highlight-next-line","highlight-start","highlight-end"];var kt=s(6277);function Ct(t){var e;let{options:s,value:n,className:r,onChange:o}=t;const a=(0,i.useRef)(),l=(0,i.useRef)(),[h,c]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const t=t=>{a.current&&!a.current.contains(t.target)&&c(!1)};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}}),[a]),i.createElement("div",{ref:a,className:(0,kt.Z)("dropdown dropdown--right",h&&"dropdown--show",r)},i.createElement("a",{ref:l,className:"navbar__link",href:"#",onClick:t=>{t.preventDefault(),c(!h)}},(null==(e=s.find((t=>t.value===n)))?void 0:e.name)??n),i.createElement("ul",{className:"dropdown__menu"},s.map(((t,e)=>i.createElement("li",{key:t.value},i.createElement("a",{href:"#",className:(0,kt.Z)("dropdown__link",n===t.value&&"dropdown__link--active"),onClick:e=>{e.preventDefault(),o(t.value),c(!1),l.current.focus()},onKeyDown:t=>{e!==s.length-1||"Tab"!==t.key||t.shiftKey||(t.preventDefault(),c(!1),l.current.focus())}},t.name))))))}function Pt(t){let{children:e,className:s,mode:c="editor",ratio:S="4"}=t;const[C,P]=(0,i.useState)(null),R=(0,i.useRef)(null),T=(0,i.useRef)(),F=(0,i.useRef)(),[I,E]=(0,i.useState)(c),[L,O]=(0,i.useState)(null),z=f(null==C?void 0:C.onDurationChanged),M=f(null==C?void 0:C.onFrameChanged),j=f(null==C?void 0:C.onStateChanged),[A,B]=(0,i.useState)(null),[D,_]=(0,i.useState)(null),N=(0,i.useMemo)((()=>{if(S.includes("/")){const t=S.split("/"),e=parseFloat(t[0])/parseFloat(t[1]);if(!isNaN(e))return e}const t=parseFloat(S);return isNaN(t)?4:t}),[S]),q=function(t,e){void 0===e&&(e=!0),nt(P,F.current,N);const s=(0,wt.v)(t.sliceString(0));var i;O(s),s||(_(t),!e||null!=D&&D.eq(t)||F.current.animate((void 0===i&&(i=4),[{boxShadow:"0 0 0px 0 #ccc inset",easing:"cubic-bezier(0.33, 1, 0.68, 1)"},{boxShadow:`0 0 0px ${i}px #ccc inset`,easing:"cubic-bezier(0.32, 0, 0.67, 0)"},{boxShadow:"0 0 0px 0 #ccc inset"}]),{duration:300}))},[Z,W]=(0,i.useState)(0),U=(0,i.useMemo)((()=>function(t){let e={name:"Default",lines:[]};const s=[e];for(const i of t.split("\n")){const t=xt.exec(i);if(!t){e.lines.push(i);continue}const[,n,r]=t;St.includes(n)||("snippet"===n?e.lines.length>0?(e={name:r,lines:[]},s.push(e)):e.name=r:e.lines.push(i))}return s}(e).map((t=>({name:t.name,state:o.yy.create({doc:o.xv.of(t.lines),extensions:[n.Xy,r.$f.of([h.oc,{key:"Mod-s",preventDefault:!0,run:t=>(q(t.state.doc),!0)}]),r.tk.updateListener.of((t=>{B(t.state.doc),O(null)})),a.Lz.data.of({autocomplete:t=>{if("String"===(0,l.qz)(t.state).resolveInner(t.pos,-1).name)return;const e=t.matchBefore(/\w*/);return e.from!=e.to||t.explicit?{from:e.from,options:k}:null}}),(0,a.eJ)({jsx:!0,typescript:!0}),(0,l.nF)(u),d]})})))),[e]);(0,i.useEffect)((()=>{R.current=new r.tk({parent:T.current,state:U[Z].state});const t=function(t,e,s){return et?null:nt(t,e,s)}(P,F.current,N);return t&&(q(U[Z].state.doc,!1),"code"!==I&&t.togglePlayback(!0)),()=>{et===P&&Y&&(Q.deactivate(),et=null,st=null,tt.finalBuffer.remove()),R.current.destroy()}}),[]);const H=D&&A&&!A.eq(D),$=A&&!A.eq(U[Z].state.doc)||H;return i.createElement("div",{className:(0,kt.Z)(rt,s,{[bt]:"code"===I,[ut]:"preview"===I})},i.createElement("div",{className:ot},i.createElement("button",{className:(0,kt.Z)(at,"code"===I&&lt),onClick:()=>{E("code"),null==C||C.togglePlayback(!1)},title:"Source code"},i.createElement(b.Z,null)),i.createElement("button",{className:(0,kt.Z)(at,"editor"===I&&lt),onClick:()=>E("editor"),title:"Editor with preview"},i.createElement(w.Z,null)),i.createElement("button",{className:(0,kt.Z)(at,"preview"===I&&lt),onClick:()=>E("preview"),title:"Preview"},i.createElement(x.Z,null))),i.createElement("div",{className:gt,style:{aspectRatio:S},ref:F},!C&&i.createElement("div",null,"Press play to preview the animation")),z>0&&i.createElement("div",{className:ht,style:{width:C?M/z*100+"%":0}}),i.createElement("div",{className:ct},i.createElement("div",{className:dt},H&&i.createElement("button",{onClick:()=>q(R.current.state.doc),className:vt},i.createElement("kbd",null,"CTRL"),i.createElement("kbd",null,"S"),i.createElement("small",null,"Update preview"))),i.createElement("div",{className:dt},i.createElement("button",{className:at,onClick:()=>null==C?void 0:C.requestPreviousFrame()},i.createElement(m,null)),i.createElement("button",{className:at,onClick:()=>{if(C)D||q(R.current.state.doc),C.togglePlayback();else{const t=nt(P,F.current,N);q(R.current.state.doc),t.togglePlayback(!0)}}},!C||((null==j?void 0:j.paused)??1)?i.createElement(v,null):i.createElement(y,null)),i.createElement("button",{className:at,onClick:()=>null==C?void 0:C.requestNextFrame()},i.createElement(g,null))),i.createElement("div",{className:dt},0===U.length&&$&&i.createElement("button",{className:vt,onClick:()=>{R.current.setState(U[Z].state),q(U[Z].state.doc),B(U[Z].state.doc)}},i.createElement("small",null,"Reset example")),U.length>1&&i.createElement(Ct,{className:yt,value:$?-1:Z,onChange:t=>{W(t),R.current.setState(U[t].state),q(U[t].state.doc)},options:U.map(((t,e)=>({value:e,name:t.name}))).concat($?{value:-1,name:"Custom"}:[])}))),L&&i.createElement("pre",{className:pt},L.message),i.createElement("div",{className:ft,ref:T},i.createElement(p.Z,{className:mt,language:"tsx"},U[0].state.doc.toString()+("code"===I?"":"\n"))))}},74391:(t,e,s)=>{"use strict";s.d(e,{Z:()=>Je});var i={};s.r(i),s.d(i,{Circle:()=>v,CubicBezier:()=>D,Curve:()=>M,Grid:()=>K,Icon:()=>X,Img:()=>G,Knot:()=>st,Latex:()=>dt,Layout:()=>pt.A,Line:()=>yt,Node:()=>Q.N,Polygon:()=>St,QuadBezier:()=>Rt,Ray:()=>wt,Rect:()=>N.U,Shape:()=>p.b,Spline:()=>Ot,Txt:()=>jt,Video:()=>_t,View2D:()=>zt.h});var n={};s.r(n),s.d(n,{all:()=>Nt.$,any:()=>Ut,chain:()=>$t,delay:()=>Vt,every:()=>Xt,loop:()=>Yt,loopFor:()=>Kt,loopUntil:()=>te,noop:()=>ee,run:()=>se.K,sequence:()=>ie,waitFor:()=>Gt.X,waitUntil:()=>Gt.A});var r={};s.r(r),s.d(r,{DEG2RAD:()=>m.q,DetailedError:()=>he.t,RAD2DEG:()=>m.I,Semaphore:()=>pe.L,beginSlide:()=>ne,capitalize:()=>re.k,createRef:()=>ge,debug:()=>ae,deprecate:()=>le,endPlayback:()=>Jt.Mh,endScene:()=>Z.ug,endThread:()=>At.kw,errorToLog:()=>ce.d,finishScene:()=>Z.vl,getContext:()=>ue.f,isProxyEnabled:()=>U,makeRef:()=>ve,makeRefs:()=>ye,range:()=>de.w,startPlayback:()=>Jt.wA,startScene:()=>Z.DO,startThread:()=>At.h$,useContext:()=>we,useContextAfter:()=>xe,useDuration:()=>Qt.Y,useLogger:()=>Z.wL,usePlayback:()=>Jt.te,useRandom:()=>me,useScene:()=>Z.$r,useThread:()=>At.nn,useTime:()=>be,viaProxy:()=>W});var o={};s.r(o),s.d(o,{CompoundSignalContext:()=>Se.N,ComputedContext:()=>ke.h,DEFAULT:()=>Fe.T,DependencyContext:()=>q.k,SignalContext:()=>Te.V,createComputed:()=>Ce.D,createComputedAsync:()=>Re,createSignal:()=>Pe.g,isReactive:()=>ft.PG,modify:()=>ft.Pj,unwrap:()=>ft.Wg});var a={};s.r(a),s.d(a,{BBox:()=>C.b,Center:()=>Oe.M5,Color:()=>_.I,Direction:()=>Oe.Nm,EPSILON:()=>Ee.I,Matrix2D:()=>Le,Origin:()=>Oe.aP,Spacing:()=>ze.K,Vector2:()=>y.F,flipOrigin:()=>Oe.lk,isType:()=>Ee.P,originToOffset:()=>Oe.WS,transformAngle:()=>Ie.$,transformScalar:()=>Ie.X});var l={};s.r(l),s.d(l,{BeatSpring:()=>De,BounceSpring:()=>Ne,JumpSpring:()=>Ze,PlopSpring:()=>_e,SmoothSpring:()=>Ue,StrikeSpring:()=>We,SwingSpring:()=>qe,arcLerp:()=>x.Vz,clamp:()=>x.uZ,clampRemap:()=>x.vl,cos:()=>Me.mC,createEaseInBack:()=>Me.j$,createEaseInBounce:()=>Me.jv,createEaseInElastic:()=>Me.qS,createEaseInOutBack:()=>Me.Bl,createEaseInOutBounce:()=>Me.Ij,createEaseInOutElastic:()=>Me.du,createEaseOutBack:()=>Me.lj,createEaseOutBounce:()=>Me.zk,createEaseOutElastic:()=>Me.Kx,deepLerp:()=>x.o0,easeInBack:()=>Me.Yw,easeInBounce:()=>Me.SJ,easeInCirc:()=>Me.Mg,easeInCubic:()=>Me.Q9,easeInElastic:()=>Me.eE,easeInExpo:()=>Me.e_,easeInOutBack:()=>Me.BH,easeInOutBounce:()=>Me.en,easeInOutCirc:()=>Me.Ge,easeInOutCubic:()=>Me.qb,easeInOutElastic:()=>Me.cv,easeInOutExpo:()=>Me.hN,easeInOutQuad:()=>Me.to,easeInOutQuart:()=>Me.J7,easeInOutQuint:()=>Me.rz,easeInOutSine:()=>Me.Fs,easeInQuad:()=>Me.FG,easeInQuart:()=>Me.g4,easeInQuint:()=>Me.n5,easeInSine:()=>Me.N1,easeOutBack:()=>Me.UE,easeOutBounce:()=>Me.C6,easeOutCirc:()=>Me.ei,easeOutCubic:()=>Me.w2,easeOutElastic:()=>Me.sK,easeOutExpo:()=>Me.ad,easeOutQuad:()=>Me.hl,easeOutQuart:()=>Me.Y3,easeOutQuint:()=>Me.pl,easeOutSine:()=>Me.vh,linear:()=>Me.GE,makeSpring:()=>Be,map:()=>x.UI,remap:()=>x.a2,sin:()=>Me.O$,spring:()=>Ae,textLerp:()=>x.JC,tween:()=>je.i});var h={};s.r(h),s.d(h,{Thread:()=>Ge.j,cancel:()=>He,getTaskName:()=>$e.z,isPromisable:()=>Ht.x,isPromise:()=>Ve.t,isThreadGenerator:()=>Ht.R,join:()=>qt.v,setTaskName:()=>$e.i,threads:()=>Ve.C});var c=s(15914);const u=Symbol.for("@motion-canvas/2d/fragment");function d(t,e){const{ref:s,children:i,...n}=e,r=Array.isArray(i)?i.flat():i;if(t===u)return r;if(null!=(o=t.prototype)&&o.isClass){const e=new t({...n,children:r});return null==s||s(e),e}return t({...n,ref:s,children:r});var o}var p=s(13730),f=s(93091),m=s(48733),g=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class v extends p.b{constructor(t){super(t)}getPath(){return this.createPath()}getRipplePath(){return this.createPath(this.rippleSize())}createPath(t){void 0===t&&(t=0);const e=new Path2D,s=this.startAngle()*m.q,i=this.endAngle()*m.q,n=this.size().scale(.5),r=this.closed();return r&&e.moveTo(0,0),e.ellipse(0,0,n.x+t,n.y+t,0,s,i),r&&e.closePath(),e}}g([(0,f.nn)(0),(0,f.td)()],v.prototype,"startAngle",void 0),g([(0,f.nn)(360),(0,f.td)()],v.prototype,"endAngle",void 0),g([(0,f.nn)(!1),(0,f.td)()],v.prototype,"closed",void 0);var y=s(29797),b=s(11258);class w{}var x=s(13170);class S{constructor(t,e){void 0===e&&(e=20),this.curve=t,this.sampledDistances=[],this.resample(e)}resample(t){this.sampledDistances=[0];let e=0,s=this.curve.eval(0).position;for(let i=1;i<t;i++){const n=i/(t-1),r=this.curve.eval(n);e+=s.sub(r.position).magnitude,this.sampledDistances.push(e),s=r.position}this.sampledDistances[this.sampledDistances.length-1]=this.curve.arcLength}pointAtDistance(t){return this.curve.eval(this.distanceToT(t))}distanceToT(t){const e=this.sampledDistances.length;t=(0,x.uZ)(0,this.curve.arcLength,t);for(let s=0;s<e;s++){const i=this.sampledDistances[s],n=this.sampledDistances[s+1];if(t>=i&&t<=n)return(0,x.a2)(i,n,s/(e-1),(s+1)/(e-1),t)}return 1}}class k extends w{get arcLength(){return this.length}constructor(t,e){super(),this.curve=t,this.length=e,this.pointSampler=new S(this)}getBBox(){return this.curve.getBounds()}eval(t){const e=this.tangent(t);return{position:this.curve.eval(t),tangent:e,normal:e.perpendicular}}getPoint(t){const e=this.pointSampler.pointAtDistance(this.arcLength*t);return{position:e.position,tangent:e.tangent,normal:e.tangent.perpendicular}}transformPoints(t){return this.points.map((e=>e.transformAsPoint(t)))}tangent(t){return this.curve.evalDerivative(t).normalized}draw(t,e,s,i){void 0===e&&(e=0),void 0===s&&(s=1),void 0===i&&(i=!0);let n=null,r=e,o=s,a=this.points;if(0!==e||1!==s){const t=this.length*e,i=this.length*s;r=this.pointSampler.distanceToT(t),o=this.pointSampler.distanceToT(i);const l=(o-r)/(1-r),[,h]=this.split(r);[n]=h.split(l),a=n.points}i&&(0,b.Ao)(t,a[0]),(n??this).doDraw(t);const l=this.tangent(r),h=this.tangent(o);return[{position:a[0],tangent:l,normal:l.perpendicular},{position:a.at(-1),tangent:h,normal:h.perpendicular}]}}var C=s(23357);class P{static constant(t){return new P(t)}static linear(t,e){return new P(t,e)}static quadratic(t,e,s){return new P(t,e,s)}static cubic(t,e,s,i){return new P(t,e,s,i)}get degree(){return 0!==this.c3?3:0!==this.c2?2:0!==this.c1?1:0}constructor(t,e,s,i){this.c0=t,this.c1=e??0,this.c2=s??0,this.c3=i??0}differentiate(t){switch(void 0===t&&(t=1),t){case 0:return this;case 1:return new P(this.c1,2*this.c2,3*this.c3,0);case 2:return new P(2*this.c2,6*this.c3,0,0);case 3:return new P(6*this.c3,0,0,0);default:throw new Error("Unsupported derivative")}}eval(t,e){return void 0===e&&(e=0),0!==e?this.differentiate(e).eval(t):this.c3*(t*t*t)+this.c2*(t*t)+this.c1*t+this.c0}split(t){const e=1-t;return[new P(this.c0,this.c1*t,this.c2*t*t,this.c3*t*t*t),new P(this.eval(0),e*this.differentiate(1).eval(t),e*e/2*this.differentiate(2).eval(t),e*e*e/6*this.differentiate(3).eval(t))]}roots(){switch(this.degree){case 3:return this.solveCubicRoots();case 2:return this.solveQuadraticRoots();case 1:return this.solveLinearRoot();case 0:return[];default:throw new Error(`Unsupported polynomial degree: ${this.degree}`)}}localExtrema(){return this.differentiate().roots()}localExtrema01(){const t=this.localExtrema(),e=[];for(let s=0;s<t.length;s++){const i=t[s];i>=0&&i<=1&&e.push(t[s])}return e}outputRange01(){let t=[this.eval(0),this.eval(1)];return this.localExtrema01().forEach((e=>{return s=this.eval(e),void(t=t[1]>t[0]?[Math.min(t[0],s),Math.max(t[1],s)]:[Math.min(t[1],s),Math.max(t[0],s)]);var s})),t}solveCubicRoots(){const t=this.c0,e=this.c1,s=this.c2,i=this.c3,n=t*t,r=t*s,o=e*e,a=(3*r-o)/(3*n),l=(2*o*e-9*r*e+27*n*i)/(27*n*t),h=this.solveDepressedCubicRoots(a,l),c=s=>s-e/(3*t);switch(h.length){case 1:return[c(h[0])];case 2:return[c(h[0]),c(h[1])];case 3:return[c(h[0]),c(h[1]),c(h[2])];default:return[]}}solveDepressedCubicRoots(t,e){if(this.almostZero(t))return[Math.cbrt(-e)];const s=2*Math.PI,i=4*t*t*t+27*e*e;if(i<1e-5){const i=2*Math.sqrt(-t/3),n=3*e/(2*t)*Math.sqrt(-3/t),r=t=>i*Math.cos(1/3*Math.acos((0,x.uZ)(-1,1,n))-s/3*t);return n>=.9999?[r(0),r(2)]:n<=-.9999?[r(1),r(2)]:[r(0),r(1),r(2)]}if(i>0&&t<0){const s=1/3*Math.acosh(-3*Math.abs(e)/(2*t)*Math.sqrt(-3/t));return[-2*Math.sign(e)*Math.sqrt(-t/3)*Math.cosh(s)]}if(t>0){const s=1/3*Math.asinh(3*e/(2*t)*Math.sqrt(3/t));return[-2*Math.sqrt(t/3)*Math.sinh(s)]}return[]}solveQuadraticRoots(){const t=this.c2,e=this.c1,s=e*e-4*t*this.c0;if(this.almostZero(s))return[-e/(2*t)];if(s>=0){const i=Math.sqrt(s),n=(-e-i)/(2*t),r=(-e+i)/(2*t);return[Math.min(n,r),Math.max(n,r)]}return[]}solveLinearRoot(){return[-this.c0/this.c1]}almostZero(t){return Math.abs(0-t)<=Number.EPSILON}}class R{constructor(t,e,s,i){this.c0=t,this.c1=e,this.c2=s,this.c3=i,t instanceof P?(this.x=t,this.y=e):void 0!==i?(this.x=new P(t.x,e.x,s.x,i.x),this.y=new P(t.y,e.y,s.y,i.y)):(this.x=new P(t.x,e.x,s.x),this.y=new P(t.y,e.y,s.y))}eval(t,e){return void 0===e&&(e=0),new y.F(this.x.differentiate(e).eval(t),this.y.differentiate(e).eval(t))}split(t){const[e,s]=this.x.split(t),[i,n]=this.y.split(t);return[new R(e,i),new R(s,n)]}differentiate(t){return void 0===t&&(t=1),new R(this.x.differentiate(t),this.y.differentiate(t))}evalDerivative(t){return this.differentiate().eval(t)}getBounds(){const t=this.x.outputRange01(),e=this.y.outputRange01();return C.b.fromPoints(new y.F(Math.min(...t),Math.max(...e)),new y.F(Math.max(...t),Math.min(...e)))}}var T=s(79116),F=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class I extends k{get points(){return[this.p0,this.p1,this.p2,this.p3]}constructor(t,e,s,i){super(new R(t,t.flipped.add(e).scale(3),t.scale(3).sub(e.scale(6)).add(s.scale(3)),t.flipped.add(e.scale(3)).sub(s.scale(3)).add(i)),I.getLength(t,e,s,i)),this.p0=t,this.p1=e,this.p2=s,this.p3=i}split(t){const e=new y.F(this.p0.x+(this.p1.x-this.p0.x)*t,this.p0.y+(this.p1.y-this.p0.y)*t),s=new y.F(this.p1.x+(this.p2.x-this.p1.x)*t,this.p1.y+(this.p2.y-this.p1.y)*t),i=new y.F(this.p2.x+(this.p3.x-this.p2.x)*t,this.p2.y+(this.p3.y-this.p2.y)*t),n=new y.F(e.x+(s.x-e.x)*t,e.y+(s.y-e.y)*t),r=new y.F(s.x+(i.x-s.x)*t,s.y+(i.y-s.y)*t),o=new y.F(n.x+(r.x-n.x)*t,n.y+(r.y-n.y)*t);return[new I(this.p0,e,n,o),new I(o,r,i,this.p3)]}doDraw(t){(0,b.JQ)(t,this.p1,this.p2,this.p3)}static getLength(t,e,s,i){return I.el.setAttribute("d",`M ${t.x} ${t.y} C ${e.x} ${e.y} ${s.x} ${s.y} ${i.x} ${i.y}`),I.el.getTotalLength()}}F([(0,T.V)((()=>document.createElementNS("http://www.w3.org/2000/svg","path")))],I,"el",void 0);var E=s(88104),L=s(46350);function O(t,e){const s=(0,x.uZ)(0,t.arcLength,e);let i=0;for(const n of t.segments){const t=i;if(i+=n.arcLength,i>=s){const e=(s-t)/n.arcLength;return n.getPoint((0,x.uZ)(0,1,e))}}return{position:y.F.zero,tangent:y.F.up,normal:y.F.up}}var z=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class M extends p.b{desiredSize(){return this.childrenBBox().size}constructor(t){super(t)}percentageToDistance(t){return(0,x.uZ)(0,this.baseArcLength(),this.startOffset()+this.offsetArcLength()*t)}distanceToPercentage(t){return(t-this.startOffset())/this.offsetArcLength()}baseArcLength(){return this.profile().arcLength}offsetArcLength(){const t=this.startOffset(),e=this.endOffset(),s=this.baseArcLength();return(0,x.uZ)(0,s,s-t-e)}arcLength(){return this.offsetArcLength()*Math.abs(this.start()-this.end())}completion(){return Math.abs(this.start()-this.end())}curveDrawingInfo(){const t=new Path2D,e=this.profile();let s=this.percentageToDistance(this.start()),i=this.percentageToDistance(this.end());s>i&&([s,i]=[i,s]);const n=i-s,r=Math.min(n/2,this.arrowSize());this.startArrow()&&(s+=r/2),this.endArrow()&&(i-=r/2);let o=0,a=null,l=null,h=null,c=null;for(const u of e.segments){const e=o;if(o+=u.arcLength,o<s)continue;const n=(s-e)/u.arcLength,r=(i-e)/u.arcLength,d=(0,x.uZ)(0,1,n),p=(0,x.uZ)(0,1,r),[f,m]=u.draw(t,d,p,null===a);if(null===a&&(a=f.position,l=f.normal.flipped.perpendicular),h=m.position,c=m.normal.flipped.perpendicular,o>i)break}return 1===this.end()&&this.closed()&&t.closePath(),{startPoint:a??y.F.zero,startTangent:l??y.F.right,endPoint:h??y.F.zero,endTangent:c??y.F.right,arrowSize:r,path:t,startOffset:s}}getPointAtDistance(t){return O(this.profile(),t+this.startOffset())}getPointAtPercentage(t){return O(this.profile(),this.percentageToDistance(t))}applyStyle(t){super.applyStyle(t);const{arcLength:e}=this.profile();t.lineDashOffset-=e/2}getComputedLayout(){return this.offsetComputedLayout(super.getComputedLayout())}offsetComputedLayout(t){return t.position=t.position.sub(this.childrenBBox().center),t}getPath(){return this.curveDrawingInfo().path}getCacheBBox(){const t=this.childrenBBox(),e=this.arrowSize(),s=this.lineWidth(),i=this.lineWidthCoefficient();return t.expand(Math.max(0,e,s*i))}lineWidthCoefficient(){return"square"===this.lineCap()?.70715:.5}drawShape(t){super.drawShape(t);const{startPoint:e,startTangent:s,endPoint:i,endTangent:n,arrowSize:r}=this.curveDrawingInfo();r<.001||(t.save(),t.beginPath(),this.endArrow()&&this.drawArrow(t,i,n.flipped,r),this.startArrow()&&this.drawArrow(t,e,s,r),t.fillStyle=(0,b.ho)(this.stroke(),t),t.closePath(),t.fill(),t.restore())}drawArrow(t,e,s,i){const n=s.perpendicular,r=e.add(s.scale(-i/2));(0,b.Ao)(t,r),(0,b.kZ)(t,r.add(s.add(n).scale(i))),(0,b.kZ)(t,r.add(s.sub(n).scale(i))),(0,b.kZ)(t,r),t.closePath()}}z([(0,f.nn)(!1),(0,f.td)()],M.prototype,"closed",void 0),z([(0,f.nn)(0),(0,f.td)()],M.prototype,"start",void 0),z([(0,f.nn)(0),(0,f.td)()],M.prototype,"startOffset",void 0),z([(0,f.nn)(!1),(0,f.td)()],M.prototype,"startArrow",void 0),z([(0,f.nn)(1),(0,f.td)()],M.prototype,"end",void 0),z([(0,f.nn)(0),(0,f.td)()],M.prototype,"endOffset",void 0),z([(0,f.nn)(!1),(0,f.td)()],M.prototype,"endArrow",void 0),z([(0,f.nn)(24),(0,f.td)()],M.prototype,"arrowSize",void 0),z([(0,L.F)()],M.prototype,"arcLength",null),z([(0,L.F)()],M.prototype,"curveDrawingInfo",null);var j=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class A extends M{profile(){const t=this.segment();return{segments:[t],arcLength:t.arcLength,minSin:0}}childrenBBox(){return C.b.fromPoints(...this.segment().points)}desiredSize(){return this.segment().getBBox().size}offsetComputedLayout(t){return t.position=t.position.sub(this.segment().getBBox().center),t}drawOverlay(t,e){const s=this.computedSize(),i=this.childrenBBox().transformCorners(e),n=s.mul(this.offset()).scale(.5).transformAsPoint(e),r=this.overlayInfo(e);t.lineWidth=1,t.strokeStyle="white",t.fillStyle="white",t.stroke(r.curve),t.fillStyle="white",t.globalAlpha=.5,t.beginPath(),t.stroke(r.handleLines),t.globalAlpha=1,t.lineWidth=2;for(const o of[r.startPoint,r.endPoint])(0,b.Ao)(t,o),t.beginPath(),(0,b.Nb)(t,o,4),t.closePath(),t.stroke(),t.fill();t.fillStyle="black";for(const o of r.controlPoints)(0,b.Ao)(t,o),t.beginPath(),(0,b.Nb)(t,o,4),t.closePath(),t.fill(),t.stroke();t.lineWidth=1,t.beginPath(),(0,b.wp)(t,n),t.stroke(),t.beginPath(),(0,b.pS)(t,i),t.closePath(),t.stroke()}}j([(0,L.F)()],A.prototype,"childrenBBox",null);var B=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class D extends A{constructor(t){super(t)}segment(){return new I(this.p0(),this.p1(),this.p2(),this.p3())}overlayInfo(t){const[e,s,i,n]=this.segment().transformPoints(t),r=new Path2D;(0,b.Ao)(r,e),(0,b.JQ)(r,s,i,n);const o=new Path2D;return(0,b.Ao)(o,e),(0,b.kZ)(o,s),(0,b.Ao)(o,i),(0,b.kZ)(o,n),{curve:r,startPoint:e,endPoint:n,controlPoints:[s,i],handleLines:o}}}B([(0,E.y)("p0")],D.prototype,"p0",void 0),B([(0,E.y)("p1")],D.prototype,"p1",void 0),B([(0,E.y)("p2")],D.prototype,"p2",void 0),B([(0,E.y)("p3")],D.prototype,"p3",void 0),B([(0,L.F)()],D.prototype,"segment",null);var _=s(30204),N=s(15498),q=s(76062),Z=s(3163);function W(t){if(!U())return t;if(t.startsWith("/cors-proxy/"))return t;const e=new URL(window.location.toString());try{const s=new URL(t,e);if(!s.protocol.startsWith("http"))return t;if(e.host===s.host)return t;if(!function(t){const e=function(){if("true"!==(void 0).VITEST&&H)return[...H];const t=(U(),[]);return H=t,[...H]}();if(0===e.length)return!0;for(const s of e)if(s.toLowerCase().trim()===t)return!0;return!1}(s.host))return t}catch(s){return t}return`/cors-proxy/${encodeURIComponent(t)}`}function U(){return!1}let H;var $=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class G extends N.U{constructor(t){super(t)}desiredSize(){const t=super.desiredSize();if(null===t.x&&null===t.y){const t=this.image();return{x:t.naturalWidth,y:t.naturalHeight}}return t}image(){const t=W(this.src()),e=this.view().assetHash();let s=G.pool[t];return s||(s=document.createElement("img"),s.crossOrigin="anonymous",s.src=`${t}?${e}`,G.pool[t]=s),s.complete||q.k.collectPromise(new Promise(((t,e)=>{s.addEventListener("load",t),s.addEventListener("error",e)}))),s}imageCanvas(){const t=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!t)throw new Error("Could not create an image canvas");return t}filledImageCanvas(){const t=this.imageCanvas(),e=this.image();return t.canvas.width=e.naturalWidth,t.canvas.height=e.naturalHeight,t.imageSmoothingEnabled=this.smoothing(),t.drawImage(e,0,0),t}draw(t){this.drawShape(t),this.clip()&&t.clip(this.getPath());const e=this.alpha();if(e>0){const s=C.b.fromSizeCentered(this.computedSize());t.save(),e<1&&(t.globalAlpha*=e),t.imageSmoothingEnabled=this.smoothing(),(0,b.AE)(t,this.image(),s),t.restore()}this.drawChildren(t)}applyFlex(){super.applyFlex();const t=this.image();this.element.style.aspectRatio=(this.ratio()??t.naturalWidth/t.naturalHeight).toString()}getColorAtPoint(t){const e=this.computedSize(),s=this.naturalSize(),i=new y.F(t).add(this.computedSize().scale(.5)).mul(s.div(e).safe);return this.getPixelColor(i)}naturalSize(){const t=this.image();return new y.F(t.naturalWidth,t.naturalHeight)}getPixelColor(t){const e=this.filledImageCanvas(),s=new y.F(t),i=e.getImageData(s.x,s.y,1,1).data;return new _.I({r:i[0],g:i[1],b:i[2],a:i[3]/255})}collectAsyncResources(){super.collectAsyncResources(),this.image()}}G.pool={},$([(0,f.td)()],G.prototype,"src",void 0),$([(0,f.nn)(1),(0,f.td)()],G.prototype,"alpha",void 0),$([(0,f.nn)(!0),(0,f.td)()],G.prototype,"smoothing",void 0),$([(0,L.F)()],G.prototype,"image",null),$([(0,L.F)()],G.prototype,"imageCanvas",null),$([(0,L.F)()],G.prototype,"filledImageCanvas",null),$([(0,L.F)()],G.prototype,"naturalSize",null);var V=s(43595),J=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class X extends G{constructor(t){super(t)}svgUrl(){return`https://api.iconify.design/${this.icon().replace(":","/")}.svg?color=${encodeURIComponent(this.color().hex())}`}getSrc(){return this.svgUrl()}setSrc(){(0,Z.wL)().warn("The Icon Component does not accept setting the `src`. If you need access to `src`, use '<Img/>` instead.")}}J([(0,f.td)()],X.prototype,"icon",void 0),J([(0,f.nn)("white"),(0,V.j)()],X.prototype,"color",void 0),J([(0,L.F)()],X.prototype,"svgUrl",null);var Y=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class K extends p.b{constructor(t){super(t)}drawShape(t){t.save(),this.applyStyle(t),this.drawRipple(t);const e=this.spacing(),s=this.computedSize().scale(.5),i=s.div(e).floored;for(let n=-i.x;n<=i.x;n++)t.beginPath(),t.moveTo(e.x*n,-s.height),t.lineTo(e.x*n,s.height),t.stroke();for(let n=-i.y;n<=i.y;n++)t.beginPath(),t.moveTo(-s.width,e.y*n),t.lineTo(s.width,e.y*n),t.stroke();t.restore()}}Y([(0,f.nn)(80),(0,E.y)("spacing")],K.prototype,"spacing",void 0);var Q=s(20092),tt=s(37060),et=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class st extends Q.N{get startHandleAuto(){return this.auto.startHandle}get endHandleAuto(){return this.auto.endHandle}constructor(t){super(void 0===t.startHandle&&void 0===t.endHandle?{auto:1,...t}:t)}points(){const t=!this.startHandle.isInitial()||!this.endHandle.isInitial(),e=t?this.startHandle():y.F.zero,s=t?this.endHandle():y.F.zero;return{position:this.position(),startHandle:e.transformAsPoint(this.localToParent()),endHandle:s.transformAsPoint(this.localToParent()),auto:{start:this.startHandleAuto(),end:this.endHandleAuto()}}}getDefaultEndHandle(){return this.startHandle().flipped}getDefaultStartHandle(){return this.endHandle().flipped}}et([(0,f.YS)(y.F),(0,f.td)()],st.prototype,"startHandle",void 0),et([(0,f.YS)(y.F),(0,f.td)()],st.prototype,"endHandle",void 0),et([(0,f.r_)(!1),(0,f.nn)((()=>({startHandle:0,endHandle:0}))),(0,f.E2)((t=>"object"!=typeof t||Array.isArray(t)?("number"==typeof t&&(t=[t,t]),{startHandle:t[0],endHandle:t[1]}):t)),(0,tt.I)({startHandle:"startHandleAuto",endHandle:"endHandleAuto"})],st.prototype,"auto",void 0),et([(0,L.F)()],st.prototype,"points",null);var it=s(98911),nt=s(2322),rt=s(64238),ot=s(81962),at=s(86226),lt=s(50099),ht=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};const ct=(0,at.liteAdaptor)();(0,lt.Q)(ct);const ut=it.mathjax.document("",{InputJax:new nt.TeX({packages:ot.b}),OutputJax:new rt.SVG({fontCache:"local"})});class dt extends G{constructor(t){super(t),this.imageElement=document.createElement("img")}image(){const t=`${this.tex()}::${JSON.stringify(this.options())}`;if(dt.svgContentsPool[t])return this.imageElement.src=dt.svgContentsPool[t],this.imageElement.complete||q.k.collectPromise(new Promise(((t,e)=>{this.imageElement.addEventListener("load",t),this.imageElement.addEventListener("error",e)}))),this.imageElement;const e=this.tex(),s=ct.innerHTML(ut.convert(e,this.options()));if(s.includes("data-mjx-error")){const t=s.match(/data-mjx-error="(.*?)"/);t&&t.length>0&&(0,Z.wL)().error(`Invalid MathJax: ${t[1]}`)}const i=`data:image/svg+xml;base64,${btoa(`<?xml version="1.0" encoding="UTF-8" standalone="no" ?>\n${s}`)}`;dt.svgContentsPool[t]=i;const n=document.createElement("img");return n.src=i,n.src=i,n.complete||q.k.collectPromise(new Promise(((t,e)=>{n.addEventListener("load",t),n.addEventListener("error",e)}))),n}}dt.svgContentsPool={},ht([(0,f.nn)({}),(0,f.td)()],dt.prototype,"options",void 0),ht([(0,f.td)()],dt.prototype,"tex",void 0);var pt=s(70989),ft=s(68003);class mt extends w{constructor(t,e){super(),this.from=t,this.to=e,this.vector=e.sub(t),this.length=this.vector.magnitude,this.normal=this.vector.perpendicular.normalized.safe}get arcLength(){return this.length}draw(t,e,s,i){void 0===e&&(e=0),void 0===s&&(s=1),void 0===i&&(i=!1);const n=this.from.add(this.vector.scale(e)),r=this.from.add(this.vector.scale(s));return i&&(0,b.Ao)(t,n),(0,b.kZ)(t,r),[{position:n,tangent:this.normal.flipped,normal:this.normal},{position:r,tangent:this.normal,normal:this.normal}]}getPoint(t){return{position:this.from.add(this.vector.scale(t)),tangent:this.normal.flipped,normal:this.normal}}}class gt extends w{constructor(t,e,s,i,n){super(),this.center=t,this.radius=e,this.from=s,this.to=i,this.counter=n,this.angle=Math.acos((0,x.uZ)(-1,1,s.dot(i))),this.length=Math.abs(this.angle*e)}get arcLength(){return this.length}draw(t,e,s){const i=this.counter?-1:1,n=this.from.radians+e*this.angle*i,r=this.to.radians-(1-s)*this.angle*i;Math.abs(this.angle)>1e-4&&t.arc(this.center.x,this.center.y,this.radius,n,r,this.counter);const o=y.F.fromRadians(n),a=y.F.fromRadians(r);return[{position:this.center.add(o.scale(this.radius)),tangent:this.counter?o:o.flipped,normal:this.counter?o:o.flipped},{position:this.center.add(a.scale(this.radius)),tangent:this.counter?a.flipped:a,normal:this.counter?a.flipped:a}]}getPoint(t){const e=this.counter?-1:1,s=this.from.radians+t*this.angle*e,i=y.F.fromRadians(s);return{position:this.center.add(i.scale(this.radius)),tangent:this.counter?i:i.flipped,normal:this.counter?i:i.flipped}}}var vt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class yt extends M{constructor(t){super(t),void 0===t.children&&void 0===t.points&&(0,Z.wL)().warn({message:"No points specified for the line",remarks:'<p>The line won&#39;t be visible unless you specify at least two points:</p>\n<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span>\n  stroke=<span class="hljs-string">&quot;#fff&quot;</span>\n  lineWidth={<span class="hljs-number">8</span>}\n  points={[\n    [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>],\n    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],\n    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],\n  ]}\n/&gt;\n</code></pre>\n<p>Alternatively, you can define the points using the children:</p>\n<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>}&gt;\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">x</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> /&gt;</span></span>\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">y</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>\n&lt;/<span class="hljs-title class_">Line</span>&gt;\n</code></pre>\n<p>If you did this intentionally, and want to disable this message, set the\n<code>points</code> property to <code>null</code>:</p>\n<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>} points={<span class="hljs-literal">null</span>} /&gt;\n</code></pre>\n',inspect:this.key})}childrenBBox(){const t=this.points(),e=t?t.map((t=>new y.F((0,ft.Wg)(t)))):this.children().filter((t=>!(t instanceof pt.A)||t.isLayoutRoot())).map((t=>t.position()));return C.b.fromPoints(...e)}parsedPoints(){const t=this.points();return t?t.map((t=>new y.F((0,ft.Wg)(t)))):this.children().map((t=>t.position()))}profile(){return function(t,e,s){const i={arcLength:0,segments:[],minSin:1};if(0===t.length)return i;if(s){const e=t[0].add(t[t.length-1]).scale(.5);t.unshift(e),t.push(e)}let n=t[0];for(let o=2;o<t.length;o++){const s=t[o-2],r=t[o-1],a=t[o],l=s.sub(r),h=a.sub(r),c=l.normalized.safe,u=h.normalized.safe,d=Math.acos((0,x.uZ)(-1,1,c.dot(u))),p=Math.tan(d/2),f=Math.sin(d/2),m=Math.min(e,p*l.magnitude*(2===o?1:.5),p*h.magnitude*(o===t.length-1?1:.5)),g=0===f?0:m/f,v=0===p?0:m/p,y=c.add(u).scale(.5).normalized.safe.scale(g).add(r),b=c.perpendicular.dot(u)<0,w=new mt(n,r.add(c.scale(v))),S=new gt(y,m,c.perpendicular.scale(b?1:-1),u.perpendicular.scale(b?-1:1),b);i.segments.push(w),i.segments.push(S),i.arcLength+=w.arcLength,i.arcLength+=S.arcLength,i.minSin=Math.min(i.minSin,Math.abs(f)),n=r.add(u.scale(v))}const r=new mt(n,t[t.length-1]);return i.segments.push(r),i.arcLength+=r.arcLength,i}(this.parsedPoints(),this.radius(),this.closed())}lineWidthCoefficient(){const t=this.radius(),e=this.lineJoin();let s=super.lineWidthCoefficient();if(0===t&&"miter"===e){const{minSin:t}=this.profile();t>0&&(s=Math.max(s,.5/t))}return s}drawOverlay(t,e){const s=this.childrenBBox().transformCorners(e),i=this.computedSize().mul(this.offset()).scale(.5).transformAsPoint(e);t.fillStyle="white",t.strokeStyle="black",t.lineWidth=1;const n=new Path2D,r=this.parsedPoints().map((t=>t.transformAsPoint(e)));if(r.length>0){(0,b.Ao)(n,r[0]);for(const e of r)(0,b.kZ)(n,e),t.beginPath(),(0,b.Nb)(t,e,4),t.closePath(),t.fill(),t.stroke()}t.strokeStyle="white",t.stroke(n),t.beginPath(),(0,b.wp)(t,i),t.stroke(),t.beginPath(),(0,b.pS)(t,s),t.closePath(),t.stroke()}}vt([(0,f.nn)(0),(0,f.td)()],yt.prototype,"radius",void 0),vt([(0,f.nn)(null),(0,f.td)()],yt.prototype,"points",void 0),vt([(0,L.F)()],yt.prototype,"childrenBBox",null),vt([(0,L.F)()],yt.prototype,"parsedPoints",null),vt([(0,L.F)()],yt.prototype,"profile",null);var bt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class wt extends M{constructor(t){super(t)}childrenBBox(){return C.b.fromPoints(this.from(),this.to())}profile(){const t=new mt(this.from(),this.to());return{arcLength:t.arcLength,minSin:1,segments:[t]}}drawOverlay(t,e){const s=this.childrenBBox().transformCorners(e),i=this.computedSize().mul(this.offset()).scale(.5).transformAsPoint(e),n=this.from().transformAsPoint(e),r=this.to().transformAsPoint(e);t.fillStyle="white",t.strokeStyle="black",t.lineWidth=1,t.beginPath(),(0,b.Nb)(t,n,4),t.fill(),t.stroke(),t.beginPath(),(0,b.Nb)(t,r,4),t.fill(),t.stroke(),t.strokeStyle="white",t.beginPath(),(0,b.pS)(t,[n,r]),t.stroke(),t.beginPath(),(0,b.wp)(t,i),t.stroke(),t.beginPath(),(0,b.pS)(t,s),t.closePath(),t.stroke()}}bt([(0,E.y)("from")],wt.prototype,"from",void 0),bt([(0,E.y)("to")],wt.prototype,"to",void 0);var xt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class St extends p.b{constructor(t){super(t)}getPath(){const t=new Path2D,e=this.sides(),s=C.b.fromSizeCentered(this.size());return(0,b.is)(t,s,e),t}getRipplePath(){const t=new Path2D,e=this.sides(),s=this.rippleSize(),i=C.b.fromSizeCentered(this.size()).expand(s);return(0,b.is)(t,i,e),t}}xt([(0,f.nn)(6),(0,f.td)()],St.prototype,"sides",void 0);var kt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class Ct extends k{get points(){return[this.p0,this.p1,this.p2]}constructor(t,e,s){super(new R(t,t.flipped.add(e).scale(2),t.sub(e.scale(2)).add(s)),Ct.getLength(t,e,s)),this.p0=t,this.p1=e,this.p2=s}split(t){const e=new y.F(this.p0.x+(this.p1.x-this.p0.x)*t,this.p0.y+(this.p1.y-this.p0.y)*t),s=new y.F(this.p1.x+(this.p2.x-this.p1.x)*t,this.p1.y+(this.p2.y-this.p1.y)*t),i=new y.F(e.x+(s.x-e.x)*t,e.y+(s.y-e.y)*t);return[new Ct(this.p0,e,i),new Ct(i,s,this.p2)]}static getLength(t,e,s){return Ct.el.setAttribute("d",`M ${t.x} ${t.y} Q ${e.x} ${e.y} ${s.x} ${s.y}`),Ct.el.getTotalLength()}doDraw(t){(0,b.pt)(t,this.p1,this.p2)}}kt([(0,T.V)((()=>document.createElementNS("http://www.w3.org/2000/svg","path")))],Ct,"el",void 0);var Pt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class Rt extends A{constructor(t){super(t)}segment(){return new Ct(this.p0(),this.p1(),this.p2())}overlayInfo(t){const[e,s,i]=this.segment().transformPoints(t),n=new Path2D;(0,b.Ao)(n,e),(0,b.pt)(n,s,i);const r=new Path2D;return(0,b.Ao)(r,e),(0,b.kZ)(r,s),(0,b.kZ)(r,i),{curve:n,startPoint:e,endPoint:i,controlPoints:[s],handleLines:r}}}function Tt(t){return t instanceof I}function Ft(t,e,s,i){if(0===t.auto.start&&0===t.auto.end)return;const n=t.position.sub(e.position).magnitude,r=i*n/(n+s.position.sub(t.position).magnitude),o=i-r,a=new y.F(t.position.x-r*(s.position.x-e.position.x),t.position.y-r*(s.position.y-e.position.y)),l=new y.F(t.position.x+o*(s.position.x-e.position.x),t.position.y+o*(s.position.y-e.position.y));t.startHandle=t.startHandle.lerp(a,t.auto.start),t.endHandle=t.endHandle.lerp(l,t.auto.end)}function It(t,e,s,i,n){const r=void 0!==n?new I(e,s,i,n):new Ct(e,s,i);t.segments.push(r),t.arcLength+=r.arcLength}function Et(t,e,s){const i={segments:[],arcLength:0,minSin:1},n=t.length;for(let h=0;h<n;h++){const e=(h-1+n)%n,i=(h+1)%n;Ft(t[h],t[e],t[i],s)}const r=t[0],o=t[1];e||1!==r.auto.start||1!==r.auto.end?It(i,r.position,r.endHandle,o.startHandle,o.position):It(i,r.position,o.startHandle,o.position);for(let h=1;h<n-2;h++){const e=t[h],s=t[h+1];It(i,e.position,e.endHandle,s.startHandle,s.position)}const a=t.at(-1),l=t.at(-2);return t.length>2&&(e||1!==a.auto.start||1!==a.auto.end?It(i,l.position,l.endHandle,a.startHandle,a.position):It(i,l.position,l.endHandle,a.position)),e&&It(i,a.position,a.endHandle,r.startHandle,r.position),function(t){for(let e=0;e<t.segments.length;e++){const s=t.segments[e],i=t.segments[(e+1)%t.segments.length];if(!Tt(s)||!Tt(i))continue;const n=s.p2.sub(s.p3).normalized.safe,r=i.p1.sub(i.p0).normalized.safe,o=n.dot(r);if(!(1-Math.abs(o)>1e-4))continue;const a=Math.acos((0,x.uZ)(-1,1,o)),l=Math.sin(a/2);t.minSin=Math.min(t.minSin,Math.abs(l))}}(i),i}Pt([(0,E.y)("p0")],Rt.prototype,"p0",void 0),Pt([(0,E.y)("p1")],Rt.prototype,"p1",void 0),Pt([(0,E.y)("p2")],Rt.prototype,"p2",void 0),Pt([(0,L.F)()],Rt.prototype,"segment",null);var Lt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class Ot extends M{constructor(t){super(t),(void 0===t.children||t.children.length<2)&&(void 0===t.points||t.points.length<2)&&void 0===t.spawner&&(0,Z.wL)().warn({message:"Insufficient number of knots specified for spline. A spline needs at least two knots.",remarks:'<p>The spline won&#39;t be visible unless you specify at least two knots:</p>\n<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Spline</span>\n  stroke=<span class="hljs-string">&quot;#fff&quot;</span>\n  lineWidth={<span class="hljs-number">8</span>}\n  points={[\n    [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>],\n    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],\n    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],\n  ]}\n/&gt;\n</code></pre>\n<p>For more control over the knot handles, you can alternatively provide the knots\nas children to the spline using the <code>Knot</code> component:</p>\n<pre><code class="language-tsx">&lt;<span class="hljs-title class_">Spline</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>}&gt;\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> <span class="hljs-attr">x</span>=<span class="hljs-string">{100}</span> <span class="hljs-attr">endHandle</span>=<span class="hljs-string">{[-50,</span> <span class="hljs-attr">0</span>]} /&gt;</span></span>\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> /&gt;</span></span>\n  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Knot</span> <span class="hljs-attr">y</span>=<span class="hljs-string">{100}</span> <span class="hljs-attr">startHandle</span>=<span class="hljs-string">{[-100,</span> <span class="hljs-attr">50</span>]} /&gt;</span></span>\n&lt;/<span class="hljs-title class_">Spline</span>&gt;\n</code></pre>\n',inspect:this.key})}profile(){return Et(this.knots(),this.closed(),this.smoothness())}knots(){const t=this.points();return t?t.map((t=>{const e=new y.F((0,ft.Wg)(t));return{position:e,startHandle:e,endHandle:e,auto:{start:1,end:1}}})):this.children().filter(this.isKnot).map((t=>t.points()))}childrenBBox(){const t=this.profile().segments.flatMap((t=>t.points));return C.b.fromPoints(...t)}lineWidthCoefficient(){const t=this.lineJoin();let e=super.lineWidthCoefficient();if("miter"!==t)return e;const{minSin:s}=this.profile();return s>0&&(e=Math.max(e,.5/s)),e}desiredSize(){return this.getTightBBox().size}offsetComputedLayout(t){return t.position=t.position.sub(this.getTightBBox().center),t}getTightBBox(){const t=this.profile().segments.map((t=>t.getBBox()));return C.b.fromBBoxes(...t)}drawOverlay(t,e){const s=this.computedSize(),i=this.childrenBBox().transformCorners(e),n=s.mul(this.offset()).scale(.5).transformAsPoint(e),r=this.profile().segments;t.lineWidth=1,t.strokeStyle="white",t.fillStyle="white";const o=new Path2D;for(let a=0;a<r.length;a++){const t=r[a],[s,i,n,l]=t.transformPoints(e);(0,b.Ao)(o,s),t instanceof I?(0,b.JQ)(o,i,n,l):(0,b.pt)(o,i,n)}t.stroke(o);for(let a=0;a<r.length;a++){const s=r[a];t.fillStyle="white";const[i,n,o,l]=s.transformPoints(e),h=new Path2D;t.globalAlpha=.5,(0,b.Ao)(h,i),(0,b.kZ)(h,n),s instanceof I?((0,b.Ao)(h,o),(0,b.kZ)(h,l),t.beginPath(),t.stroke(h)):((0,b.kZ)(h,o),t.beginPath(),t.stroke(h)),t.globalAlpha=1,t.lineWidth=2,(0,b.Ao)(t,i),t.beginPath(),(0,b.Nb)(t,i,4),t.closePath(),t.stroke(),t.fill(),a===r.length-1&&void 0!==l&&((0,b.Ao)(t,l),t.beginPath(),(0,b.Nb)(t,l,4),t.closePath(),t.stroke(),t.fill()),t.fillStyle="black";for(const e of[n,o])e.magnitude>0&&((0,b.Ao)(t,e),t.beginPath(),(0,b.Nb)(t,e,4),t.closePath(),t.fill(),t.stroke())}t.lineWidth=1,t.beginPath(),(0,b.wp)(t,n),t.stroke(),t.beginPath(),(0,b.pS)(t,i),t.closePath(),t.stroke()}isKnot(t){return t instanceof st}}Lt([(0,f.nn)(.4),(0,f.td)()],Ot.prototype,"smoothness",void 0),Lt([(0,f.nn)(null),(0,f.td)()],Ot.prototype,"points",void 0),Lt([(0,L.F)()],Ot.prototype,"profile",null),Lt([(0,L.F)()],Ot.prototype,"knots",null),Lt([(0,L.F)()],Ot.prototype,"childrenBBox",null),Lt([(0,L.F)()],Ot.prototype,"getTightBBox",null);var zt=s(70419),Mt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class jt extends p.b{constructor(t){let{children:e,...s}=t;super(s),e&&this.text(e)}draw(t){this.requestFontUpdate(),this.applyStyle(t),this.applyText(t),t.font=this.styles.font,"letterSpacing"in t&&(t.letterSpacing=`${this.letterSpacing()}px`);const e=this.element.getBoundingClientRect(),{width:s,height:i}=this.size(),n=document.createRange();let r="";const o=new C.b;for(const a of this.element.childNodes){if(!a.textContent)continue;n.selectNodeContents(a);const l=n.getBoundingClientRect(),h=s/-2+l.left-e.left,c=i/-2+l.top-e.top;o.y===c?(o.width+=l.width,r+=a.textContent):(this.drawText(t,r,o),o.x=h,o.y=c,o.width=l.width,o.height=l.height,r=a.textContent)}this.drawText(t,r,o)}drawText(t,e,s){const i=s.y+s.height/2;t.save(),t.textBaseline="middle",this.lineWidth()<=0?t.fillText(e,s.x,i):this.strokeFirst()?(t.strokeText(e,s.x,i),t.fillText(e,s.x,i)):(t.fillText(e,s.x,i),t.strokeText(e,s.x,i)),t.restore()}formattedText(){return jt.formatter.innerText=this.text(),jt.formatter.innerText}updateLayout(){this.applyFont(),this.applyFlex(),this.justifyContent.isInitial()&&(this.element.style.justifyContent=this.styles.getPropertyValue("text-align"));if("nowrap"!==this.styles.whiteSpace&&"pre"!==this.styles.whiteSpace)if(this.element.innerText="",jt.segmenter)for(const t of jt.segmenter.segment(this.formattedText()))this.element.appendChild(document.createTextNode(t.segment));else for(const t of this.formattedText().split(""))this.element.appendChild(document.createTextNode(t));else if("pre"===this.styles.whiteSpace){this.element.innerText="";for(const t of this.text().split("\n"))this.element.appendChild(document.createTextNode(t+"\n"))}else this.element.innerText=this.formattedText()}}Mt([(0,f.nn)(""),(0,f.JI)(x.JC),(0,f.td)()],jt.prototype,"text",void 0),Mt([(0,L.F)()],jt.prototype,"formattedText",null),Mt([(0,T.V)((()=>{const t=document.createElement("div");return zt.h.shadowRoot.append(t),t}))],jt,"formatter",void 0),Mt([(0,T.V)((()=>{try{return new Intl.Segmenter(void 0,{granularity:"grapheme"})}catch(t){return null}}))],jt,"segmenter",void 0);var At=s(56632),Bt=s(88733),Dt=function(t,e,s,i){var n,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,s,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,s,o):n(e,s))||o);return r>3&&o&&Object.defineProperty(e,s,o),o};class _t extends N.U{constructor(t){let{play:e,...s}=t;super(s),this.lastTime=-1,e&&this.play()}isPlaying(){return this.playing()}getCurrentTime(){return this.clampTime(this.time())}getDuration(){return this.video().duration}desiredSize(){const t=super.desiredSize();if(null===t.x&&null===t.y){const t=this.video();return{x:t.videoWidth,y:t.videoHeight}}return t}completion(){return this.clampTime(this.time())/this.video().duration}video(){const t=this.src(),e=`${this.key}/${t}`;let s=_t.pool[e];return s||(s=document.createElement("video"),s.src=t,_t.pool[e]=s),s.readyState<2&&q.k.collectPromise(new Promise((t=>{const e=()=>{t(),s.removeEventListener("canplay",e)};s.addEventListener("canplay",e)}))),s}seekedVideo(){const t=this.video(),e=this.clampTime(this.time());return t.paused||t.pause(),this.lastTime===e||this.setCurrentTime(e),t}fastSeekedVideo(){const t=this.video(),e=this.clampTime(this.time());if(this.lastTime===e)return t;const s=this.playing()&&e<t.duration;return s?t.paused&&q.k.collectPromise(t.play()):t.paused||t.pause(),Math.abs(t.currentTime-e)>.2?this.setCurrentTime(e):s||(t.currentTime=e),t}draw(t){this.drawShape(t),this.clip()&&t.clip(this.getPath());const e=this.alpha();if(e>0){const s=this.view().playbackState(),i=s===Bt.q.Playing||s===Bt.q.Presenting?this.fastSeekedVideo():this.seekedVideo(),n=C.b.fromSizeCentered(this.computedSize());t.save(),e<1&&(t.globalAlpha*=e),t.imageSmoothingEnabled=this.smoothing(),(0,b.AE)(t,i,n),t.restore()}this.drawChildren(t)}applyFlex(){super.applyFlex();const t=this.video();this.element.style.aspectRatio=(this.ratio()??t.videoWidth/t.videoHeight).toString()}setCurrentTime(t){const e=this.video();e.readyState<2||(e.currentTime=t,this.lastTime=t,e.seeking&&q.k.collectPromise(new Promise((t=>{const s=()=>{t(),e.removeEventListener("seeked",s)};e.addEventListener("seeked",s)}))))}play(){const t=(0,At.nn)().time,e=t()-this.time();this.playing(!0),this.time((()=>this.clampTime(t()-e)))}pause(){this.playing(!1),this.time.save(),this.video().pause()}seek(t){const e=this.playing();this.time(this.clampTime(t)),e?this.play():this.pause()}clampTime(t){const e=this.video().duration;return this.loop()&&(t%=e),(0,x.uZ)(0,e,t)}collectAsyncResources(){super.collectAsyncResources(),this.seekedVideo()}}_t.pool={},Dt([(0,f.td)()],_t.prototype,"src",void 0),Dt([(0,f.nn)(1),(0,f.td)()],_t.prototype,"alpha",void 0),Dt([(0,f.nn)(!0),(0,f.td)()],_t.prototype,"smoothing",void 0),Dt([(0,f.nn)(!1),(0,f.td)()],_t.prototype,"loop",void 0),Dt([(0,f.nn)(0),(0,f.td)()],_t.prototype,"time",void 0),Dt([(0,f.nn)(!1),(0,f.td)()],_t.prototype,"playing",void 0),Dt([(0,L.F)()],_t.prototype,"completion",null),Dt([(0,L.F)()],_t.prototype,"video",null),Dt([(0,L.F)()],_t.prototype,"seekedVideo",null),Dt([(0,L.F)()],_t.prototype,"fastSeekedVideo",null);var Nt=s(5376),qt=s(51284),Zt=s(42075),Wt=s(67292);function*Ut(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];for(const i of e)yield i;yield*(0,qt.v)(!1,...e)}(0,Zt.G)(Ut,(0,Wt.C)());var Ht=s(80638);function*$t(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];for(const i of e)(0,Ht.R)(i)?yield*i:i()}(0,Zt.G)($t,(0,Wt.C)());var Gt=s(84266);function*Vt(t,e){yield*(0,Gt.X)(t),(0,Ht.R)(e)?yield*e:e()}(0,Zt.G)(Vt,(0,Wt.C)());var Jt=s(97715);function Xt(t,e){let s=!1;function*i(){const i=(0,Jt.te)();let n=0,r=0;for(e(r),s=!0;;)n>=i.secondsToFrames(t)?(n=0,r++,e(r),s=!0):s=!1,n++,yield}return(0,Zt.G)(i,(0,Wt.C)("every")),{runner:i(),setInterval(e){t=e,s=!1},setCallback(t){e=t,s=!1},*sync(){for(;!s;)yield}}}function*Yt(t,e){for(let s=0;s<t;s++){const t=e(s);t?yield*t:yield}}function*Kt(t,e){const s=(0,At.nn)(),i=(0,Jt.te)().framesToSeconds(1),n=s.time()+t;let r=0;for(;n-i>s.fixed;){const t=e(r);t?yield*t:yield,r+=1}s.time(n)}(0,Zt.G)(Yt,(0,Wt.C)()),(0,Zt.G)(Kt,(0,Wt.C)());var Qt=s(30092);function*te(t,e){yield*Kt((0,Qt.Y)(t),e)}function*ee(){}(0,Zt.G)(te,(0,Wt.C)()),(0,Zt.G)(ee,(0,Wt.C)());var se=s(77396);function*ie(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),i=1;i<e;i++)s[i-1]=arguments[i];for(const n of s)yield n,yield*(0,Gt.X)(t);yield*(0,qt.v)(...s)}function*ne(t){const{slides:e}=(0,Z.$r)(),s=(0,At.nn)();for(e.register(t,s.fixed),yield;e.shouldWait(t);)yield}(0,Zt.G)(ie,(0,Wt.C)());var re=s(15688);function oe(t){switch(typeof t){case"string":return t;case"undefined":return"undefined";default:return Number.isNaN(t)?"NaN":JSON.stringify(t)}}function ae(t){const e={message:oe(t)};t&&"object"==typeof t&&(e.object=t),(0,Z.wL)().debug(e)}function le(t,e,s){return function(){(0,Z.wL)().warn({message:e,remarks:s,stack:(new Error).stack});for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t.apply(this,n)}}var he=s(49111),ce=s(90031),ue=s(1119),de=s(37762),pe=s(15649),fe=s(11726);function me(t,e){return void 0===e&&(e=!0),"number"==typeof t?new fe.k(e?t:t+(0,Z.$r)().meta.seed.get()):(0,Z.$r)().random}function ge(){let t;return e=>{if(void 0===e)return t;t=e}}function ve(t,e){return s=>{t[e]=s}}function ye(){return{}}function be(){return(0,At.nn)().time()}function we(t){return(0,Z.$r)().lifecycleEvents.onBeginRender.subscribe(t)}function xe(t){return(0,Z.$r)().lifecycleEvents.onFinishRender.subscribe(t)}var Se=s(46096),ke=s(81865),Ce=s(73662),Pe=s(97140);function Re(t,e){let s;void 0===e&&(e=null);const i=(0,Pe.g)(t);return(0,Ce.D)((()=>{const t=i();var n;s&&s.promise===t||(s=ke.h.collectPromise(t,(null==(n=s)?void 0:n.value)??e));return s.value}))}var Te=s(16249),Fe=s(60771),Ie=s(74741),Ee=s(57292);class Le{static fromRotation(t){return Le.identity.rotate(t)}static fromTranslation(t){return Le.identity.translate(new y.F(t))}static fromScaling(t){return Le.identity.scale(new y.F(t))}get x(){return new y.F(this.values[0],this.values[1])}get y(){return new y.F(this.values[2],this.values[3])}get scaleX(){return this.values[0]}set scaleX(t){this.values[0]=this.x.normalized.scale(t).x}set scaleY(t){this.values[3]=this.y.normalized.scale(t).y}get scaleY(){return this.values[3]}set translateX(t){this.values[4]=t}get translateX(){return this.values[4]}set translateY(t){this.values[5]=t}get translateY(){return this.values[5]}set rotation(t){const e=this.rotate(t-this.rotation);this.values[0]=e.values[0],this.values[1]=e.values[1],this.values[2]=e.values[2],this.values[3]=e.values[3]}get rotation(){return y.F.degrees(this.values[0],this.values[1])}set translation(t){const e=new y.F(t);this.values[4]=e.x,this.values[5]=e.y}get translation(){return new y.F(this.values[4],this.values[5])}set scaling(t){const e=new y.F(t),s=new y.F(this.values[0],this.values[1]).normalized,i=new y.F(this.values[2],this.values[3]).normalized;this.values[0]=s.x*e.x,this.values[1]=s.y*e.y,this.values[2]=i.x*e.x,this.values[3]=i.y*e.y}get scaling(){return new y.F(this.values[0],this.values[3])}get inverse(){const t=this.values[0],e=this.values[1],s=this.values[2],i=this.values[3],n=this.values[4],r=this.values[5];let o=t*i-e*s;return o?(o=1/o,new Le(i*o,-e*o,-s*o,t*o,(s*r-i*n)*o,(e*n-t*r)*o)):null}get determinant(){return this.values[0]*this.values[3]-this.values[1]*this.values[2]}get domMatrix(){return new DOMMatrix([this.values[0],this.values[1],this.values[2],this.values[3],this.values[4],this.values[5]])}constructor(t,e,s,i,n,r){if(this.values=new Float32Array(6),0===arguments.length)return void(this.values=new Float32Array([1,0,0,1,0,0]));if(6===arguments.length)return this.values[0]=t,this.values[1]=e,this.values[2]=s,this.values[3]=i,this.values[4]=n,void(this.values[5]=r);if(t instanceof Le)return void(this.values=t.values);if(Array.isArray(t)){if(2===t.length)return this.values[0]=t[0],this.values[1]=t[1],this.values[2]=e[0],this.values[3]=e[1],this.values[4]=s[0],void(this.values[5]=s[1]);if(3===t.length){const e=new y.F(t[0]),s=new y.F(t[1]),i=new y.F(t[2]);return this.values[0]=e.x,this.values[1]=e.y,this.values[2]=s.x,this.values[3]=s.y,this.values[4]=i.x,void(this.values[5]=i.y)}return this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3],this.values[4]=t[4],void(this.values[5]=t[5])}const o=new y.F(t),a=new y.F(e),l=new y.F(s);this.values[0]=o.x,this.values[1]=o.y,this.values[2]=a.x,this.values[3]=a.y,this.values[4]=l.x,this.values[5]=l.y}column(t){return new y.F(this.values[2*t],this.values[2*t+1])}row(t){return[this.values[t],this.values[t+2],this.values[t+4]]}mul(t){const e=this.values[0],s=this.values[1],i=this.values[2],n=this.values[3],r=this.values[4],o=this.values[5],a=t.values[0],l=t.values[1],h=t.values[2],c=t.values[3],u=t.values[4],d=t.values[5];return new Le(e*a+i*l,s*a+n*l,e*h+i*c,s*h+n*c,e*u+i*d+r,s*u+n*d+o)}rotate(t,e){void 0===e&&(e=!0),e&&(t*=m.q);const s=this.values[0],i=this.values[1],n=this.values[2],r=this.values[3],o=this.values[4],a=this.values[5],l=Math.sin(t),h=Math.cos(t);return new Le(s*h+n*l,i*h+r*l,s*-l+n*h,i*-l+r*h,o,a)}scale(t){const e=new y.F(t);return new Le(this.values[0]*e.x,this.values[1]*e.x,this.values[2]*e.y,this.values[3]*e.y,this.values[4],this.values[5])}mulScalar(t){return new Le(this.values[0]*t,this.values[1]*t,this.values[2]*t,this.values[3]*t,this.values[4]*t,this.values[5]*t)}translate(t){const e=new y.F(t);return new Le(this.values[0],this.values[1],this.values[2],this.values[3],this.values[0]*e.x+this.values[2]*e.y+this.values[4],this.values[1]*e.x+this.values[3]*e.y+this.values[5])}add(t){return new Le(this.values[0]+t.values[0],this.values[1]+t.values[1],this.values[2]+t.values[2],this.values[3]+t.values[3],this.values[4]+t.values[4],this.values[5]+t.values[5])}sub(t){return new Le(this.values[0]-t.values[0],this.values[1]-t.values[1],this.values[2]-t.values[2],this.values[3]-t.values[3],this.values[4]-t.values[4],this.values[5]-t.values[5])}toSymbol(){return Le.symbol}equals(t,e){return void 0===e&&(e=Ee.I),Math.abs(this.values[0]-t.values[0])<=e+Number.EPSILON&&Math.abs(this.values[1]-t.values[1])<=e+Number.EPSILON&&Math.abs(this.values[2]-t.values[2])<=e+Number.EPSILON&&Math.abs(this.values[3]-t.values[3])<=e+Number.EPSILON&&Math.abs(this.values[4]-t.values[4])<=e+Number.EPSILON&&Math.abs(this.values[5]-t.values[5])<=e+Number.EPSILON}exactlyEquals(t){return this.values[0]===t.values[0]&&this.values[1]===t.values[1]&&this.values[2]===t.values[2]&&this.values[3]===t.values[3]&&this.values[4]===t.values[4]&&this.values[5]===t.values[5]}}Le.symbol=Symbol.for("@motion-canvas/core/types/Matrix2D"),Le.identity=new Le(1,0,0,1,0,0),Le.zero=new Le(0,0,0,0,0,0);var Oe=s(98378),ze=s(43188),Me=s(97074),je=s(74534);function*Ae(t,e,s,i,n,r){const o="number"==typeof i?i:.001;r="number"==typeof i?r:n;const a=(t,e)=>{"function"==typeof i?i(t,e):"function"==typeof n&&n(t,e)};if((t=t??{mass:.05,stiffness:10,damping:.5}).mass<=0)return void(0,Z.wL)().error(new Error("Spring mass must be greater than 0."));if(t.stiffness<0)return void(0,Z.wL)().error(new Error("Spring stiffness must be greater or equal to 0."));if(t.damping<0)return void(0,Z.wL)().error(new Error("Spring damping must be greater or equal to 0."));const l=(0,At.nn)();let h=e,c=t.initialVelocity??0;const u=e=>{if(null===t)return;const i=h-s,n=-t.stiffness*i-t.damping*c;c+=n/t.mass*e,h+=c*e},d=1/120;a(e,0);const p=l.time();let f=p,m=!1;for(;!m;){for(;f<l.fixed;){const t=l.fixed-f;if(d>t?(u(t),f=l.fixed):(u(d),f+=d),Math.abs(s-h)<o&&Math.abs(c)<o){l.time(f),m=!0;break}}m||(a(h,l.fixed-p),yield)}a(s,l.fixed-p),null==r||r(s,l.fixed-p)}function Be(t,e,s,i){return{mass:t,stiffness:e,damping:s,initialVelocity:i}}(0,Zt.G)(Ae,(0,Wt.C)());const De=Be(.13,5.7,1.2,10),_e=Be(.2,20,.68,0),Ne=Be(.08,4.75,.05,0),qe=Be(.39,19.85,2.82,0),Ze=Be(.04,10,.7,8),We=Be(.03,20,.9,4.8),Ue=Be(.16,15.35,1.88,0);function He(){const t=(0,At.nn)();for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];for(const n of s){const e=t.children.find((t=>t.runner===n));e&&!e.canceled&&(e.cancel(),e.time(t.time()))}}var $e=s(75168),Ge=s(50580),Ve=s(5881);const Je={...i,...n,...r,...o,...a,...l,...h,_Fragment:u,_jsx:d,_jsxs:d,makeScene2D:c.r}},53487:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>transform});var _babel_standalone__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87243),_babel_standalone__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_standalone__WEBPACK_IMPORTED_MODULE_0__),_site_src_components_Fiddle_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(74391);function transform(code){try{const result=_babel_standalone__WEBPACK_IMPORTED_MODULE_0__.transform(code,{filename:"fiddle.tsx",presets:["typescript",["react",{runtime:"automatic",importSource:"@motion-canvas/2d/lib"}]],plugins:["mc"]});eval(result.code)}catch(e){return e}return null}_babel_standalone__WEBPACK_IMPORTED_MODULE_0__.registerPlugin("mc",(t=>{let{types:e}=t;return{visitor:{Program(t){t.node.body.unshift(e.variableDeclaration("const",[e.variableDeclarator(e.objectPattern(Object.keys(_site_src_components_Fiddle_runtime__WEBPACK_IMPORTED_MODULE_1__.Z).map((t=>e.objectProperty(e.identifier(t),e.identifier(t),!1,!0)))),e.memberExpression(e.identifier("window"),e.identifier("mc")))]))},ImportDeclaration(t){t.remove()},ExportDefaultDeclaration(t){t.replaceWith(t.node.declaration)}}}}))},96030:(t,e,s)=>{"use strict";s.d(e,{Z:()=>a});var i=s(94627),n=s(2784);function r(t){let{name:e}=t;return n.createElement("a",{className:i.Z.contributor,title:e,href:`https://github.com/${e}`,target:"_blank"},n.createElement("img",{loading:"lazy",src:`https://github.com/${e}.png`,width:20,height:20,alt:`${e}'s avatar`}))}var o=s(97644);function a(t){let{user:e,pr:s,children:a}=t;return n.createElement("li",{className:i.Z.element},n.createElement(r,{name:e}),a,s&&n.createElement(o.Z,{id:s}))}},56139:(t,e,s)=>{"use strict";s.d(e,{Z:()=>l});var i=s(2784),n=s(94627),r=s(83851);const o={feat:"New features \ud83c\udf89",fix:"Fixed bugs \ud83d\udc1b"},a={feat:"new-features",fix:"fixed-bugs"};function l(t){let{type:e,children:s}=t;return i.createElement(i.Fragment,null,i.createElement(r.Z,{id:a[e],as:"h3"},o[e]),i.createElement("ul",{className:n.Z.group},s))}},97644:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});var i=s(2784),n=s(94627);function r(t){let{id:e}=t;return i.createElement("a",{className:n.Z.pr,title:`Pull request #${e}`,href:`https://github.com/motion-canvas/motion-canvas/pull/${e}`,target:"_blank"},i.createElement("small",null,"#",e))}},47387:(t,e,s)=>{"use strict";s.r(e),s.d(e,{assets:()=>y,contentTitle:()=>g,default:()=>x,frontMatter:()=>m,metadata:()=>v,toc:()=>b});var i=s(7896),n=(s(2784),s(30876)),r=s(56139),o=s(96030),a=s(97644),l=s(89817),h=s(26773),c=s(78128),u=s(43647),d=s(48015),p=s(10700),f=s(69573);const m={slug:"version-3.6.0",title:"Motion Canvas v3.6.0",description:"The Cardinal Update",authors:"aarthificial"},g=void 0,v={permalink:"/blog/version-3.6.0",editUrl:"https://github.com/motion-canvas/motion-canvas/blob/main/packages/docs/blog/2023-05-08-version-3.6.0.mdx",source:"@site/blog/2023-05-08-version-3.6.0.mdx",title:"Motion Canvas v3.6.0",description:"The Cardinal Update",date:"2023-05-08T00:00:00.000Z",formattedDate:"May 8, 2023",tags:[],readingTime:1.865,hasTruncateMarker:!1,authors:[{name:"Jacob",title:"Motion Canvas Creator",url:"https://twitter.com/aarthificial",imageURL:"https://github.com/aarthificial.png",key:"aarthificial"}],frontMatter:{slug:"version-3.6.0",title:"Motion Canvas v3.6.0",description:"The Cardinal Update",authors:"aarthificial"},nextItem:{title:"Motion Canvas v3.5.0",permalink:"/blog/version-3.5.0"}},y={authorsImageUrls:[void 0]},b=[],w={toc:b};function x(t){let{components:e,...s}=t;return(0,n.kt)("wrapper",(0,i.Z)({},w,s,{components:e,mdxType:"MDXLayout"}),(0,n.kt)(r.Z,{type:"feat",mdxType:"IssueGroup"},(0,n.kt)(o.Z,{user:"aarthificial",mdxType:"Issue"},(0,n.kt)(l.Z,{to:"/docs/layouts#cardinal-directions",mdxType:"Link"},"Cardinal points")," let you position nodes relative to their corners and edges",(0,n.kt)(a.Z,{id:636,mdxType:"PullRequest"}),(0,n.kt)(h.Z,{mode:"preview",className:"margin-top--sm margin-bottom--sm",mdxType:"Fiddle"},u.Z)),(0,n.kt)(o.Z,{user:"aarthificial",pr:628,mdxType:"Issue"},"New"," ",(0,n.kt)(l.Z,{to:"/api/2d/components/Ray",mdxType:"Link"},(0,n.kt)("code",null,"Ray"))," ","node lets you easily define simple lines between two points."),(0,n.kt)(o.Z,{user:"aarthificial",mdxType:"Issue"},"New methods for chaining animations together:",(0,n.kt)(a.Z,{id:651,mdxType:"PullRequest"}),(0,n.kt)(c.Z,{language:"tsx",className:"margin-top--sm margin-bottom--sm",mdxType:"CodeBlock"},"yield* circle().scale(0.5, 0.2)\n  // tween to another value\n  .to(2, 0.2)\n  // wait for one second\n  .wait(1)\n  // tween back to the initial value\n  .back(0.2)\n  // execute a callback\n  .do(() => circle().fill('red'))\n  // run the given generator\n  .run(circle().position.y(100, 2));")),(0,n.kt)(o.Z,{user:"squigglesdev",mdxType:"Issue"},"New"," ",(0,n.kt)(l.Z,{to:"/api/core/flow#loopFor",mdxType:"Link"},(0,n.kt)("code",null,"loopFor"))," ","and"," ",(0,n.kt)(l.Z,{to:"/api/core/flow#loopUntil",mdxType:"Link"},(0,n.kt)("code",null,"loopUntil"))," ","flow functions.",(0,n.kt)(a.Z,{id:650,mdxType:"PullRequest"}),(0,n.kt)(a.Z,{id:624,mdxType:"PullRequest"})),(0,n.kt)(o.Z,{user:"aarthificial",pr:641,mdxType:"Issue"},"External changes to images are now automatically reflected in the preview."),(0,n.kt)(o.Z,{user:"ksassnowski",pr:622,mdxType:"Issue"},"New"," ",(0,n.kt)(l.Z,{to:"/api/core/types/Vector2#static-fromDegrees",mdxType:"Link"},(0,n.kt)("code",null,"fromDegrees")),", ",(0,n.kt)(l.Z,{to:"/api/core/types/Vector2#static-createArcLerp",mdxType:"Link"},(0,n.kt)("code",null,"createArcLerp"))," and ",(0,n.kt)(l.Z,{to:"/api/core/types/Vector2#mod",mdxType:"Link"},(0,n.kt)("code",null,"mod"))," ",(0,n.kt)("code",null,"Vector2")," methods.",(0,n.kt)(a.Z,{id:640,mdxType:"PullRequest"})),(0,n.kt)(o.Z,{user:"aarthificial",pr:635,mdxType:"Issue"},"New"," ",(0,n.kt)(l.Z,{to:"/api/2d/components/Curve#completion",mdxType:"Link"},(0,n.kt)("code",null,"completion"))," ","and"," ",(0,n.kt)(l.Z,{to:"/api/2d/components/Curve#arcLength",mdxType:"Link"},(0,n.kt)("code",null,"arcLength")),"properties for curves.",(0,n.kt)(a.Z,{id:627,mdxType:"PullRequest"})),(0,n.kt)(o.Z,{user:"aarthificial",pr:630,mdxType:"Issue"},"New"," ",(0,n.kt)(l.Z,{to:"/api/core/utils#DEG2RAD",mdxType:"Link"},(0,n.kt)("code",null,"DEG2RAD"))," ","and"," ",(0,n.kt)(l.Z,{to:"/api/core/utils#RAD2DEG",mdxType:"Link"},(0,n.kt)("code",null,"RAD2DEG"))," ","constants for converting between degrees and radians."),(0,n.kt)(o.Z,{user:"aarthificial",pr:642,mdxType:"Issue"},"You can now toggle fiddles between the code"," ",(0,n.kt)("sub",null,(0,n.kt)(d.Z,{mdxType:"IconText"})),", editor ",(0,n.kt)("sub",null,(0,n.kt)(p.Z,{mdxType:"IconSplit"}))," and preview ",(0,n.kt)("sub",null,(0,n.kt)(f.Z,{mdxType:"IconImage"}))," mode (You can try it out in the example above).")),(0,n.kt)(r.Z,{type:"fix",mdxType:"IssueGroup"},(0,n.kt)(o.Z,{user:"someguythatcodes",pr:617,mdxType:"Issue"},"Clear DependencyContext promises once resolved."),(0,n.kt)(o.Z,{user:"aarthificial",pr:647,mdxType:"Issue"},"Fix fiddle accessibility."),(0,n.kt)(o.Z,{user:"aarthificial",pr:645,mdxType:"Issue"},"Fix cyclic dependency in cardinal points."),(0,n.kt)(o.Z,{user:"aarthificial",pr:644,mdxType:"Issue"},"Correctly append Txt nodes to view."),(0,n.kt)(o.Z,{user:"aarthificial",pr:643,mdxType:"Issue"},"Fix taking snapshots.",(0,n.kt)(a.Z,{id:638,mdxType:"PullRequest"})),(0,n.kt)(o.Z,{user:"gmile",pr:620,mdxType:"Issue"},"Fix a typo in a viewport ID.")),(0,n.kt)("small",null,"Check out ",(0,n.kt)(l.Z,{to:"/docs/updating",mdxType:"Link"},"the Update Guide")," for information on how to update your existing projects."))}x.isMDXComponent=!0},94627:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});const i={contributor:"contributor_Ndjr",pr:"pr_hMGy",group:"group_CvIc",element:"element_spNy"}},43647:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});const i="import {makeScene2D} from '@motion-canvas/2d';\nimport {Rect} from '@motion-canvas/2d/lib';\nimport {createRef} from '@motion-canvas/core/lib/utils';\n\nexport default makeScene2D(function* (view) {\n  const rect = createRef<Rect>();\n\n  view.add(\n    <>\n      <Rect\n        ref={rect}\n        width={200}\n        height={100}\n        rotation={-10}\n        fill={'#333333'}\n      />\n      <Rect\n        size={50}\n        fill={'#e6a700'}\n        rotation={rect().rotation}\n        // Try changing \"right\" to \"top\"\n        right={rect().left}\n      />\n      <Rect\n        size={100}\n        fill={'#e13238'}\n        rotation={10}\n        bottomLeft={rect().bottomRight}\n      />\n    </>,\n  );\n\n  yield* rect().rotation(10, 1).to(-10, 1);\n});\n"}}]);